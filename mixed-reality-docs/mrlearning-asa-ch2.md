---
title: 'Tutoriales de anclaje espacial de Azure: 2. Guardar, recuperar y compartir anclajes espaciales de Azure'
description: Realiza este curso para aprender a implementar Azure Face Recognition dentro de una aplicación de realidad mixta.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 1cc3ef7b85eb52105f3d7cf9ccbdf1faf46458be
ms.sourcegitcommit: 23b130d03fea46a50a712b8301fe4e5deed6cf9c
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/24/2019
ms.locfileid: "75334424"
---
# <a name="2-saving-retrieving-and-sharing-azure-spatial-anchors"></a><span data-ttu-id="0d4cd-105">2. guardar, recuperar y compartir anclajes espaciales de Azure</span><span class="sxs-lookup"><span data-stu-id="0d4cd-105">2. Saving, retrieving, and sharing Azure Spatial Anchors</span></span>

<span data-ttu-id="0d4cd-106">En este tutorial, obtendrá información sobre cómo guardar los anclajes espaciales de Azure en varias sesiones de la aplicación si guarda la información de delimitador en el almacenamiento de HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-106">In this tutorial, you will learn how to save our Azure Spatial Anchors across multiple app sessions by saving our anchor information to the HoloLens 2's storage.</span></span> <span data-ttu-id="0d4cd-107">También aprenderá a compartir esta información de delimitador en otros dispositivos para una alineación de delimitador de varios dispositivos.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-107">You will also learn how to share this anchor information to other devices for a multi-device anchor alignment.</span></span>

## <a name="objectives"></a><span data-ttu-id="0d4cd-108">Objetivos</span><span class="sxs-lookup"><span data-stu-id="0d4cd-108">Objectives</span></span>

* <span data-ttu-id="0d4cd-109">Obtenga información sobre cómo guardar y recuperar información del delimitador espacial de Azure desde el disco local de HoloLens 2 para la persistencia entre sesiones de aplicación</span><span class="sxs-lookup"><span data-stu-id="0d4cd-109">Learn how to save and retrieve Azure Spatial Anchor information from the HoloLens 2 local disk, for persistence between app sessions</span></span>
* <span data-ttu-id="0d4cd-110">Aprenda a compartir información de delimitador espacial de Azure entre usuarios en un escenario de varios dispositivos</span><span class="sxs-lookup"><span data-stu-id="0d4cd-110">Learn how to share Azure Spatial Anchor information between users in a multi-device scenario</span></span>

## <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a><span data-ttu-id="0d4cd-111">Persistencia de los delimitadores de Azure entre sesiones de aplicación: guardar el ID. de delimitador en el disco</span><span class="sxs-lookup"><span data-stu-id="0d4cd-111">Persist Azure anchors between app sessions - Save anchor ID to Disk</span></span>

1. <span data-ttu-id="0d4cd-112">Busque y agregue SaveAnchorToDisk recurso prefabricado a su escena.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-112">Search for and add the SaveAnchorToDisk prefab to your scene.</span></span> <span data-ttu-id="0d4cd-113">Estos incluyen dos botones: un botón para guardar cualquier identificador de delimitador de Azure disponible en el almacenamiento de HoloLens 2 y otro para recuperar los identificadores del disco.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-113">These include two buttons; one button for saving any available Azure Anchor IDs to the HoloLens 2 storage, and another for retrieving any IDs from the disk.</span></span>

    ![module2chapter2step1im](images/module2chapter2step1im.PNG)

2. <span data-ttu-id="0d4cd-115">Configure cada botón según las instrucciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-115">Configure Each button according to the instructions below</span></span>

    <span data-ttu-id="0d4cd-116">En el caso del botón denominado SaveToDisk, cree un nuevo evento bajo el desencadenador de eventos presionado del botón, así como el desencadenador de evento al hacer clic.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-116">For the Button named SaveToDisk, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="0d4cd-117">Arrastre el objeto ParentAnchor al campo vacío y asigne el método SaveAzureAnchorIDToDisk () desde el componente ASAmoduleScript del objeto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-117">Drag the ParentAnchor object into the empty field, and assign the SaveAzureAnchorIDToDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

    >[!NOTE]
    ><span data-ttu-id="0d4cd-118">Algunos de los botones pueden aparecer superpuestos con los demás botones de la escena.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-118">Some of the buttons may appear overlapping the other buttons in the scene.</span></span> <span data-ttu-id="0d4cd-119">No dude en ajustar la posición del botón.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-119">Feel free to adjust the button's positioning.</span></span>

    ![module2chapter2step2aim](images/module2chapter2step2aim.PNG)

    ![module2chapter2step2aim](images/module2chapter2step2bim.PNG)

    ![module2chapter2step2aim](images/module2chapter2step2cim.PNG)

    <span data-ttu-id="0d4cd-123">En el caso del botón denominado GetFromDisk, cree un nuevo evento bajo el desencadenador de eventos presionado del botón, así como el desencadenador de evento al hacer clic.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-123">For the button named GetFromDisk, create a new event under the Button Pressed event trigger, as well as the On Click event trigger.</span></span> <span data-ttu-id="0d4cd-124">Arrastre el objeto ParentAnchor al campo vacío y asigne el método LoadAzureAnchorIDsFromDisk () desde el componente ASAmoduleScript del objeto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-124">Drag the ParentAnchor object into the empty field, and assign the LoadAzureAnchorIDsFromDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="0d4cd-125">Siga las instrucciones del tutorial 1 para compilar la aplicación actualizada en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-125">Follow the instructions from Tutorial 1 to build the updated application to your device.</span></span> <span data-ttu-id="0d4cd-126">Después de presionar el botón crear anclaje de Azure, como hizo en la lección anterior, puede guardar el identificador de delimitador de Azure en el disco presionando el botón Guardar en el disco.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-126">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now save the Azure Anchor ID to disk by pressing the save to disk button.</span></span>

4. <span data-ttu-id="0d4cd-127">Reinicie la aplicación, inicie la sesión de Azure, presione cargar identificador de delimitador y, a continuación, presione buscar delimitador de Azure para ubicar el delimitador asociado con el ID. que hemos guardado en el disco.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-127">Restart the application, start the Azure Session, Press Load Anchor ID, and then press Locate Azure Anchor to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="0d4cd-128">La escena completa ahora debe ajustarse a la posición, en la ubicación en la que guardó el delimitador previamente.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-128">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

## <a name="share-azure-anchors-between-multiple-devices"></a><span data-ttu-id="0d4cd-129">Compartir anclajes de Azure entre varios dispositivos</span><span class="sxs-lookup"><span data-stu-id="0d4cd-129">Share Azure Anchors between multiple devices</span></span>

<span data-ttu-id="0d4cd-130">En esta sección, aprenderá a compartir el identificador de delimitador de Azure entre varios dispositivos.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-130">In this section, we'll learn how to share the Azure Anchor ID between multiple devices.</span></span> <span data-ttu-id="0d4cd-131">Esto permitirá que varios dispositivos consulten Azure para el mismo identificador de delimitador, lo que permite alinear espacialmente los hologramas y las escenas anclados.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-131">This will allow multiple devices to query Azure for the same anchor ID, allowing our anchored holograms and scenes to be spatially aligned.</span></span> <span data-ttu-id="0d4cd-132">La alineación espacial (ver los mismos hologramas en la misma ubicación física entre varios dispositivos) es fundamental para las experiencias compartidas locales en HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-132">Spatial alignment (seeing the same holograms in the same physical location between multiple devices) is key to local shared experiences in the HoloLens 2.</span></span> <span data-ttu-id="0d4cd-133">Hay muchas maneras de transferir información relacionada con los identificadores de Azure entre dispositivos, incluidos los métodos descritos en los [tutoriales](mrlearning-sharing(photon)-ch1.md)de tutoriales de experiencias compartidas de los delimitadores espaciales de Azure.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-133">There are many ways to transfer information regarding azure IDs between devices, including methods outlined in the Azure Spatial Anchors shared experiences tutorials [Tutorials](mrlearning-sharing(photon)-ch1.md).</span></span> <span data-ttu-id="0d4cd-134">En este ejemplo se usa un servicio web simple para cargar y descargar los ID. de delimitador entre dispositivos.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-134">This example uses a simple web service to upload and download Anchor IDs between devices.</span></span>

1. <span data-ttu-id="0d4cd-135">Agregue el recurso prefabricado ShareAnchor en la jerarquía.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-135">Add the ShareAnchor prefab into your hierarchy.</span></span> <span data-ttu-id="0d4cd-136">Este recurso prefabricado agrega dos nuevos botones a la escena. uno para cargar información de identificador de delimitador y otro para descargar información de identificador de delimitador.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-136">This prefab adds two new buttons to your scene; one for uploading anchor ID information and another for downloading anchor ID information.</span></span>

    ![module2chapter2step5im](images/module2chapter2step5im.PNG)

2. <span data-ttu-id="0d4cd-138">Configure cada botón según las instrucciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-138">Configure Each button according to the instructions below</span></span>

    <span data-ttu-id="0d4cd-139">En el caso del botón denominado SendSharedAnchor, cree un nuevo evento bajo el desencadenador de eventos presionado del botón, así como el desencadenador de evento al hacer clic.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-139">For the Button named SendSharedAnchor, create a new event under the Button Pressed event trigger, as well as the On Click event trigger.</span></span> <span data-ttu-id="0d4cd-140">Arrastre el objeto ParentAnchor al campo vacío y asigne el método ShareAnchor () desde el componente ASAmoduleScript del objeto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-140">Drag the ParentAnchor object into the empty field, and assign the ShareAnchor() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

    ![module2chapter2step6aim](images/module2chapter2step6aim.PNG)

    ![module2chapter2step6bim](images/module2chapter2step6bim.PNG)

    <span data-ttu-id="0d4cd-143">En el caso del botón denominado GetSharedAnchor, cree un nuevo evento bajo el desencadenador de eventos presionado del botón, así como el desencadenador de evento al hacer clic.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-143">For the Button named GetSharedAnchor, create a new event under the Button Pressed event trigger, as well as the On Click event trigger.</span></span> <span data-ttu-id="0d4cd-144">Arrastre el objeto ParentAnchor al campo vacío y asigne el método GetSharedAzureAnchor () desde el componente ASAmoduleScript del objeto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-144">Drag the ParentAnchor object into the empty field, and assign the GetSharedAzureAnchor() method from the ParentAnchor object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="0d4cd-145">Siga las instrucciones del [tutorial 1](mrlearning-base-ch1.md) para compilar la aplicación actualizada en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-145">Follow the instructions from [Tutorial 1](mrlearning-base-ch1.md) to build the updated application to your device.</span></span> <span data-ttu-id="0d4cd-146">Después de presionar el botón crear anclaje de Azure, como hizo en la lección anterior, ahora puede compartir el identificador de delimitador de Azure con otros dispositivos si presiona el botón compartir en otro dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-146">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now share the Azure Anchor ID to other devices by pressing the Share To Other Device button.</span></span>

    >[!NOTE]
    ><span data-ttu-id="0d4cd-147">Seleccione el delimitador primario y desplácese hacia abajo hasta el script de delimitador primario.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-147">Select the parent anchor and scroll down to the parent anchor script.</span></span> <span data-ttu-id="0d4cd-148">Asegúrese de que el PIN de uso compartido público sea único (puede cambiar el PIN a otro número) para que, cuando lo comparta, sepa que es suyo que está compartiendo.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-148">Ensure that your public sharing pin is unique (You can change the pin to another number), so that when you share it, you know it is yours that you are sharing.</span></span> <span data-ttu-id="0d4cd-149">Podría haber miles de usuarios compartiendo sus delimitadores de Azure, por lo que hacerlo le permitirá asegurarse de que comparte los delimitadores de Azure correctos.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-149">There could be thousands of users sharing their Azure anchors, so doing this will allow you to ensure you are sharing the correct Azure anchors.</span></span>

    ![module2chapter2step7bim](images/module2chapter2step7bim.PNG)

4. <span data-ttu-id="0d4cd-151">Si tiene otro dispositivo HoloLens 2, inicie la aplicación y, a continuación, inicie la sesión de Azure.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-151">If you have another HoloLens 2 device, start the application and then start the Azure Session.</span></span> <span data-ttu-id="0d4cd-152">Presione el botón obtener identificador de delimitador compartido y, a continuación, presione el botón buscar delimitador de Azure para buscar el delimitador asociado con el ID. que compartimos con el servicio Web.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-152">Press the Get Shared Anchor ID button, and then press the Locate Azure Anchor button to locate the anchor associated with the ID we shared using the web service.</span></span> <span data-ttu-id="0d4cd-153">La escena completa ahora debe ajustarse a la posición, donde se colocó en el otro dispositivo HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-153">The entire scene should now snap into position, at where it was placed on the other HoloLens 2 device!</span></span> <span data-ttu-id="0d4cd-154">Si solo tiene un HoloLens 2, puede probar la funcionalidad. para ello, reinicie la aplicación, inicie la sesión de Azure y, a continuación, presione el botón "obtener identificador de delimitador compartido", seguido del botón "buscar el anclaje de Azure" para buscar el delimitador asociado con el ID. guardado en el disco.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-154">If you only have one HoloLens 2, you may still test functionality by restarting the application, starting the Azure Session, and then press the "Get Shared Anchor ID" button, followed by the "Locate Azure Anchor button" to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="0d4cd-155">La escena completa ahora debe ajustarse a la posición, en la ubicación en la que guardó el delimitador previamente.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-155">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

## <a name="congratulations"></a><span data-ttu-id="0d4cd-156">Enhorabuena</span><span class="sxs-lookup"><span data-stu-id="0d4cd-156">Congratulations</span></span>

<span data-ttu-id="0d4cd-157">En esta lección ha aprendido a conservar los anclajes espaciales de Azure entre las sesiones de aplicación y los reinicios de aplicación al guardar el identificador de delimitador espacial de Azure en el disco local en HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-157">In this Lesson you learned how to persist Azure Spatial Anchors between application sessions and application restarts by saving the Azure Spatial Anchor ID to the local disk on HoloLens 2.</span></span> <span data-ttu-id="0d4cd-158">También aprendió a compartir anclajes espaciales de Azure entre varios dispositivos para una experiencia de uso compartido de hologramas estáticos y multiusuario.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-158">You also learned how to share Azure Spatial Anchors between multiple devices for a basic multi-user, static hologram shared experience.</span></span>

<span data-ttu-id="0d4cd-159">Aprendemos a implementar anclajes espaciales de Azure como parte de una experiencia compartida local totalmente interactiva durante la lección final del módulo de uso compartido.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-159">We learn how to implement Azure Spatial Anchors as part of a fully-interactive local shared experience during the final lesson of the Sharing Module.</span></span> <span data-ttu-id="0d4cd-160">Una experiencia de uso compartido local puede incluir funciones como la posición del objeto en 3D sincronizado, la rotación y la escala, los identificadores de cada usuario y los Estados de la aplicación compartida.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-160">A local sharing experience may include functionality such as synchronized 3D object position, rotation, and scale, identifiers for each user, and shared application states.</span></span> <span data-ttu-id="0d4cd-161">Los delimitadores espaciales de Azure mejoran estos escenarios compartidos proporcionando a cada participante un delimitador común que permite a todos los usuarios ver los objetos virtuales en la misma ubicación física.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-161">Azure Spatial Anchors enhances these shared scenarios by providing each participant with a common anchor that lets all users see virtual objects in the same physical location.</span></span> <span data-ttu-id="0d4cd-162">Esto es cierto en una variedad de plataformas de dispositivos, incluidos los dispositivos HoloLens, Android e iOS.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-162">This is true across a range of device platforms, including HoloLens, Android, and iOS devices.</span></span> <span data-ttu-id="0d4cd-163">Para obtener información sobre cómo desarrollar una experiencia compartida, complete todas las lecciones del módulo de uso compartido.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-163">To learn how to develop a shared experience, complete all lessons in the Sharing module.</span></span>

<span data-ttu-id="0d4cd-164">En la siguiente lección, aprenderá a proporcionar a los usuarios comentarios en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-164">In the next Lesson, you will learn how to provide users with real-time feedback.</span></span> <span data-ttu-id="0d4cd-165">Estos comentarios incluirán información sobre la creación del delimitador, la calidad de la comprensión del entorno y el estado de la sesión de Azure.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-165">This feedback will include information about Anchor creation, the quality of environment understanding, and the state of the Azure session.</span></span> <span data-ttu-id="0d4cd-166">Sin comentarios, es posible que los usuarios no sepan si un delimitador se ha cargado correctamente en Azure, si la calidad del entorno es suficiente para la creación del delimitador o el estado actual.</span><span class="sxs-lookup"><span data-stu-id="0d4cd-166">Without feedback, users may not know whether an anchor has successfully been uploaded to Azure, whether the quality of the environment is sufficient for anchor creation, or the current state.</span></span>

[<span data-ttu-id="0d4cd-167">Lección siguiente: 3. Mostrar comentarios del delimitador espacial de Azure</span><span class="sxs-lookup"><span data-stu-id="0d4cd-167">Next Lesson: 3. Displaying Azure Spatial Anchor feedback</span></span>](mrlearning-asa-ch3.md)
