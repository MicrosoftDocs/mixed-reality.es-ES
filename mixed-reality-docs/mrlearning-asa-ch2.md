---
title: 'Tutoriales sobre Azure Spatial Anchors: 2. Guardar, recuperar y compartir Azure Spatial Anchors'
description: Haz este curso para aprender a implementar Azure Face Recognition dentro de una aplicación de realidad mixta.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.localizationpriority: high
ms.openlocfilehash: 4de40bb0b66ed299fa4a571490b33a0454f25817
ms.sourcegitcommit: 5b2ba01aa2e4a80a3333bfdc850ab213a1b523b9
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/10/2020
ms.locfileid: "79031703"
---
# <a name="2-saving-retrieving-and-sharing-azure-spatial-anchors"></a><span data-ttu-id="70fe2-105">2. Guardar, recuperar y compartir Azure Spatial Anchors</span><span class="sxs-lookup"><span data-stu-id="70fe2-105">2. Saving, retrieving, and sharing Azure Spatial Anchors</span></span>

<span data-ttu-id="70fe2-106">En este tutorial, aprenderás cómo guardar Azure Spatial Anchors en varias sesiones de la aplicación guardando el identificador de anclaje en el almacenamiento de HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="70fe2-106">In this tutorial, you will learn how to save Azure Spatial Anchors across multiple app sessions by saving the anchor ID to the HoloLens 2's storage.</span></span> <span data-ttu-id="70fe2-107">También aprenderás a compartir este identificador de anclaje con otros dispositivos para una alineación de anclaje de varios dispositivos.</span><span class="sxs-lookup"><span data-stu-id="70fe2-107">You will also learn how to share this anchor ID to other devices for a multi-device anchor alignment.</span></span>

## <a name="objectives"></a><span data-ttu-id="70fe2-108">Objetivos</span><span class="sxs-lookup"><span data-stu-id="70fe2-108">Objectives</span></span>

* <span data-ttu-id="70fe2-109">Aprender a guardar y recuperar los identificadores de Azure Spatial Anchors en el disco local de HoloLens 2 para la persistencia entre sesiones de aplicación</span><span class="sxs-lookup"><span data-stu-id="70fe2-109">Learn how to save and retrieve Azure Spatial Anchor IDs to and from the HoloLens 2 local disk, for persistence between app sessions</span></span>
* <span data-ttu-id="70fe2-110">Aprender a compartir identificadores de Azure Spatial Anchor entre usuarios en un escenario de varios dispositivos</span><span class="sxs-lookup"><span data-stu-id="70fe2-110">Learn how to share Azure Spatial Anchor IDs between users in a multi-device scenario</span></span>

## <a name="preparing-the-scene"></a><span data-ttu-id="70fe2-111">Preparación de la escena</span><span class="sxs-lookup"><span data-stu-id="70fe2-111">Preparing the scene</span></span>

<span data-ttu-id="70fe2-112">Desde la ventana Project (Proyecto), desplázate hasta **Assets** (Recursos) > **MRTK.Tutorials.AzureSpatialAnchors** > carpeta **Prefabs**.</span><span class="sxs-lookup"><span data-stu-id="70fe2-112">In the Project window, navigate to **Assets** > **MRTK.Tutorials.AzureSpatialAnchors** > **Prefabs** folder.</span></span> <span data-ttu-id="70fe2-113">Mientras mantienes presionado el botón CTRL, haz clic en **ButtonParent_SaveAnchorId** y **ButtonParent_ShareAnchorId** para seleccionar los dos objetos prefabricados y, a continuación, arrástralos a la ventana Hierarchy (Jerarquía) para agregarlos a la escena:</span><span class="sxs-lookup"><span data-stu-id="70fe2-113">While holding down the CTRL button, click on **ButtonParent_SaveAnchorId** and **ButtonParent_ShareAnchorId** to select the two prefabs, then drag them into the Hierarchy window to add them to the scene:</span></span>

![mrlearning-asa](images/mrlearning-asa/tutorial2-section1-step1-1.png)

## <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a><span data-ttu-id="70fe2-115">Persistencia de anclajes de Azure entre sesiones de aplicación: guardar el identificador de anclaje en el disco</span><span class="sxs-lookup"><span data-stu-id="70fe2-115">Persist Azure Anchors between app sessions - Save anchor ID to disk</span></span>
<!-- TODO: Consider renaming to 'Persist Azure Anchors between app sessions' -->

<span data-ttu-id="70fe2-116">En esta sección, aprenderás a guardar y recuperar el identificador de anclaje de Azure desde y hasta el disco local de HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="70fe2-116">In this section, you will learn how to save and retrieve the Azure Anchor ID to and from the HoloLens 2 local disk.</span></span> <span data-ttu-id="70fe2-117">Esto te permitirá consultar Azure con el mismo identificador de anclaje en distintas sesiones de aplicación, lo que permite colocar los hologramas anclados en la misma ubicación que en la sesión de aplicación anterior.</span><span class="sxs-lookup"><span data-stu-id="70fe2-117">This will allow you to query Azure for the same anchor ID between different app sessions, allowing the anchored holograms to be position at the same location as in the previous app session.</span></span>

<span data-ttu-id="70fe2-118">En la ventana Hierarchy (Jerarquía), expande el objeto **ButtonParent_SaveAnchorId**, que contiene dos botones: uno para guardar el identificador del anclaje de Azure en el almacenamiento de HoloLens 2 y otro para recuperar el identificador guardado del disco:</span><span class="sxs-lookup"><span data-stu-id="70fe2-118">In the Hierarchy window, expand the **ButtonParent_SaveAnchorId** object which contains two buttons, one button for saving the Azure Anchor ID to the HoloLens 2 storage and another for retrieving the saved ID from the disk:</span></span>

![mrlearning-asa](images/mrlearning-asa/tutorial2-section2-step1-1.png)

<span data-ttu-id="70fe2-120">Sigue los mismos pasos de las instrucciones de [Configuración de los botones para el funcionamiento de la escena](mrlearning-asa-ch1.md#configuring-the-buttons-to-operate-the-scene) del tutorial anterior para configurar el componente **Pressable Button Holo Lens 2 (Script)** (Botón presionable de HoloLens 2 [script]) y el componente **Interactable (Script)** (Interactuable [script]) en cada uno de los dos botones:</span><span class="sxs-lookup"><span data-stu-id="70fe2-120">Follow the same steps as in the [configuring the buttons to operate the scene](mrlearning-asa-ch1.md#configuring-the-buttons-to-operate-the-scene) instructions from the previous tutorial to configure the **Pressable Button Holo Lens 2 (Script)** component and the **Interactable (Script)** component on each of the two buttons:</span></span>

* <span data-ttu-id="70fe2-121">Para el objeto **SaveAzureAnchorIdToDisk**, asigna la función AnchorModuleScript > **SaveAzureAnchorIdToDisk ()** .</span><span class="sxs-lookup"><span data-stu-id="70fe2-121">For the **SaveAzureAnchorIdToDisk** object, assign the AnchorModuleScript > **SaveAzureAnchorIdToDisk ()** function.</span></span>
* <span data-ttu-id="70fe2-122">Para el objeto **GetAzureAnchorIdFromDisk**, asigna la función AnchorModuleScript > **GetAzureAnchorIdFromDisk ()** .</span><span class="sxs-lookup"><span data-stu-id="70fe2-122">For the **GetAzureAnchorIdFromDisk** object, assign the AnchorModuleScript > **GetAzureAnchorIdFromDisk ()** function.</span></span>

<span data-ttu-id="70fe2-123">Si compilas la aplicación actualizada en HoloLens, puedes conservar Azure Spatial Anchors entre sesiones de aplicación si guardas el identificador del anclaje de Azure.</span><span class="sxs-lookup"><span data-stu-id="70fe2-123">If you build the updated application to your HoloLens, you can now persist Azure Spatial Anchors between app sessions by saving the Azure Anchor ID.</span></span> <span data-ttu-id="70fe2-124">Para probarlo, puedes seguir estos pasos:</span><span class="sxs-lookup"><span data-stu-id="70fe2-124">To test it out, you can follow these steps:</span></span>

1. <span data-ttu-id="70fe2-125">Mueve la experiencia del lanzacohetes a la ubicación deseada.</span><span class="sxs-lookup"><span data-stu-id="70fe2-125">Move the Rocket Launcher experience to desired location.</span></span>
2. <span data-ttu-id="70fe2-126">Inicia una sesión de Azure.</span><span class="sxs-lookup"><span data-stu-id="70fe2-126">Start Azure Session.</span></span>
3. <span data-ttu-id="70fe2-127">Crea un anclaje de (crea anclajes en la ubicación de la experiencia del lanzacohetes).</span><span class="sxs-lookup"><span data-stu-id="70fe2-127">Create Azure Anchor (creates anchors at the location of the Rocket Launcher experience).</span></span>
4. <span data-ttu-id="70fe2-128">Guarda el identificador del anclaje de Azure en el disco.</span><span class="sxs-lookup"><span data-stu-id="70fe2-128">Save Azure Anchor ID to Disk.</span></span>
5. <span data-ttu-id="70fe2-129">Reinicia la aplicación.</span><span class="sxs-lookup"><span data-stu-id="70fe2-129">Restart the application.</span></span>
6. <span data-ttu-id="70fe2-130">Obtén el anclaje de Azure del disco (carga el id. de anclaje que acabas de guardar).</span><span class="sxs-lookup"><span data-stu-id="70fe2-130">Get Azure Anchor from Disk (loads the anchor ID you just saved).</span></span>
7. <span data-ttu-id="70fe2-131">Inicia una sesión de Azure.</span><span class="sxs-lookup"><span data-stu-id="70fe2-131">Start Azure Session.</span></span>
8. <span data-ttu-id="70fe2-132">Busca el anclaje de Azure (coloca la experiencia del lanzacohetes en la ubicación del paso 3).</span><span class="sxs-lookup"><span data-stu-id="70fe2-132">Find Azure Anchor (positions the Rocket Launcher experience at the location from step 3).</span></span>

## <a name="share-azure-anchors-between-multiple-devices"></a><span data-ttu-id="70fe2-133">Compartir anclajes de Azure entre varios dispositivos</span><span class="sxs-lookup"><span data-stu-id="70fe2-133">Share Azure Anchors between multiple devices</span></span>

<span data-ttu-id="70fe2-134">En esta sección, obtendrás información sobre cómo compartir el identificador del anclaje de Azure entre varios dispositivos.</span><span class="sxs-lookup"><span data-stu-id="70fe2-134">In this section, you will learn how to share the Azure Anchor ID between multiple devices.</span></span> <span data-ttu-id="70fe2-135">Esto permitirá que varios dispositivos consulten Azure para el mismo identificador de anclaje, lo que permite alinear espacialmente los hologramas delimitados.</span><span class="sxs-lookup"><span data-stu-id="70fe2-135">This will allow multiple devices to query Azure for the same anchor ID, allowing the anchored holograms to be spatially aligned.</span></span> <span data-ttu-id="70fe2-136">La alineación espacial, que permite ver los mismos hologramas en la misma ubicación física entre varios dispositivos, es fundamental para las experiencias compartidas locales en HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="70fe2-136">Spatial alignment, i.e. seeing the same holograms in the same physical location between multiple devices, is key to local shared experiences in the HoloLens 2.</span></span>

<span data-ttu-id="70fe2-137">Hay muchas formas de transferir identificadores de anclaje de Azure entre dispositivos, incluidos los métodos descritos en la serie [Tutoriales de funcionalidades de varios usuarios](mrlearning-sharing(photon)-ch1.md).</span><span class="sxs-lookup"><span data-stu-id="70fe2-137">There are many ways to transfer Azure Anchor IDs between devices, including methods outlined in the the [Multi-user capabilities tutorials](mrlearning-sharing(photon)-ch1.md) series.</span></span> <span data-ttu-id="70fe2-138">En este ejemplo, usarás un servicio web simple para cargar y descargar los id. de anclaje entre dispositivos.</span><span class="sxs-lookup"><span data-stu-id="70fe2-138">In this example, you will use a simple web service to upload and download anchor IDs between devices.</span></span>

<span data-ttu-id="70fe2-139">En la ventana Hierarchy (Jerarquía), expande el objeto **ButtonParent_ShareAnchorId**, que contiene dos botones: uno para cargar el identificador del anclaje de Azure en el servidor web y otro para descargar el identificador del servidor web:</span><span class="sxs-lookup"><span data-stu-id="70fe2-139">In the Hierarchy window, expand the **ButtonParent_ShareAnchorId** object which contains two buttons; one button for uploading the Azure Anchor ID to the web server, and another for downloading the ID from the web server:</span></span>

![mrlearning-asa](images/mrlearning-asa/tutorial2-section3-step1-1.png)

<span data-ttu-id="70fe2-141">Sigue los mismos pasos de las instrucciones de [Configuración de los botones para el funcionamiento de la escena](mrlearning-asa-ch1.md#configuring-the-buttons-to-operate-the-scene) del tutorial anterior para configurar el componente **Pressable Button Holo Lens 2 (Script)** (Botón presionable de HoloLens 2 [script]) y el componente **Interactable (Script)** (Interactuable [script]) en cada uno de los dos botones:</span><span class="sxs-lookup"><span data-stu-id="70fe2-141">Follow the same steps as in the [configuring the buttons to operate the scene](mrlearning-asa-ch1.md#configuring-the-buttons-to-operate-the-scene) instructions from the previous tutorial to configure the **Pressable Button Holo Lens 2 (Script)** component and the **Interactable (Script)** component on each of the two buttons:</span></span>

* <span data-ttu-id="70fe2-142">Para el objeto **ShareAzureAnchorIdToNetwork**, asigna la función AnchorModuleScript > **ShareAzureAnchorIdToNetwork ()** .</span><span class="sxs-lookup"><span data-stu-id="70fe2-142">For the **ShareAzureAnchorIdToNetwork** object, assign the AnchorModuleScript > **ShareAzureAnchorIdToNetwork ()** function.</span></span>
* <span data-ttu-id="70fe2-143">Para el objeto **GetAzureAnchorIdFromNetwork**, asigna la función AnchorModuleScript > **GetAzureAnchorIdFromNetwork ()** .</span><span class="sxs-lookup"><span data-stu-id="70fe2-143">For the **GetAzureAnchorIdFromNetwork** object, assign the AnchorModuleScript > **GetAzureAnchorIdFromNetwork ()** function.</span></span>

<span data-ttu-id="70fe2-144">Si compilas la aplicación actualizada en dos dispositivos HoloLens, ahora puedes lograr la alineación espacial entre ellos al compartir el identificador de anclaje de Azure.</span><span class="sxs-lookup"><span data-stu-id="70fe2-144">If you build the updated application to two HoloLens devices, you can now achieve spatial alignment between them by sharing the Azure Anchor ID.</span></span> <span data-ttu-id="70fe2-145">Para probarlo, puedes seguir estos pasos:</span><span class="sxs-lookup"><span data-stu-id="70fe2-145">To test it out, you can follow these steps:</span></span>

1. <span data-ttu-id="70fe2-146">En el dispositivo HoloLens 1: mueve la experiencia del lanzacohetes a la ubicación deseada.</span><span class="sxs-lookup"><span data-stu-id="70fe2-146">On HoloLens device 1: Move the Rocket Launcher experience to desired location.</span></span>
2. <span data-ttu-id="70fe2-147">En el dispositivo HoloLens 1: inicia una sesión de Azure.</span><span class="sxs-lookup"><span data-stu-id="70fe2-147">On HoloLens device 1: Start Azure Session.</span></span>
3. <span data-ttu-id="70fe2-148">En el dispositivo HoloLens 1: crea un anclaje de Azure (crea anclajes en la ubicación de la experiencia del lanzacohetes).</span><span class="sxs-lookup"><span data-stu-id="70fe2-148">On HoloLens device 1: Create Azure Anchor (creates anchors at the location of the Rocket Launcher experience).</span></span>
4. <span data-ttu-id="70fe2-149">En el dispositivo HoloLens 1: comparte el id. de anclaje de Azure con la red</span><span class="sxs-lookup"><span data-stu-id="70fe2-149">On HoloLens device 1: Share Azure Anchor ID to Network.</span></span>
5. <span data-ttu-id="70fe2-150">En el dispositivo HoloLens 2: reinicia la aplicación.</span><span class="sxs-lookup"><span data-stu-id="70fe2-150">On HoloLens device 2: Restart the application.</span></span>
6. <span data-ttu-id="70fe2-151">En el dispositivo HoloLens 2: obtén el identificador de anclaje compartido de la red (captura el identificador de anclaje que se acaba de compartir desde el dispositivo HoloLens 1).</span><span class="sxs-lookup"><span data-stu-id="70fe2-151">On HoloLens device 2: Get Shared Anchor ID from Network (fetches the anchor ID just shared from HoloLens device 1).</span></span>
7. <span data-ttu-id="70fe2-152">En el dispositivo HoloLens 2: inicia una sesión de Azure.</span><span class="sxs-lookup"><span data-stu-id="70fe2-152">On HoloLens device 2: Start Azure Session.</span></span>
8. <span data-ttu-id="70fe2-153">En el dispositivo HoloLens 2: busca el anclaje de Azure (coloca la experiencia del lanzacohetes en la ubicación del paso 3).</span><span class="sxs-lookup"><span data-stu-id="70fe2-153">On HoloLens device 2: Find Azure Anchor (positions the Rocket Launcher experience at the location from step 3).</span></span>

> [!TIP]
> <span data-ttu-id="70fe2-154">Si solo tienes un dispositivo HoloLens, puedes probar la funcionalidad igualmente reiniciando la aplicación, en lugar de usar un segundo dispositivo HoloLens.</span><span class="sxs-lookup"><span data-stu-id="70fe2-154">If you only have one HoloLens, you can still test the functionality by restarting the application instead of using a second HoloLens device.</span></span>

## <a name="congratulations"></a><span data-ttu-id="70fe2-155">Enhorabuena</span><span class="sxs-lookup"><span data-stu-id="70fe2-155">Congratulations</span></span>

<span data-ttu-id="70fe2-156">En este tutorial has aprendido a conservar Azure Spatial Anchors entre las sesiones y reinicios de aplicación al guardar el identificador de anclaje espacial de Azure en el disco local en HoloLens.</span><span class="sxs-lookup"><span data-stu-id="70fe2-156">In this tutorial you learned how to persist Azure Spatial Anchors between application sessions and application restarts by saving the Azure Spatial Anchor ID to the local disk on HoloLens.</span></span> <span data-ttu-id="70fe2-157">También has aprendido a compartir Azure Spatial Anchors entre varios dispositivos para una experiencia de uso compartido con hologramas estáticos y varios usuarios.</span><span class="sxs-lookup"><span data-stu-id="70fe2-157">You also learned how to share Azure Spatial Anchors between multiple devices for a basic multi-user, static hologram shared experience.</span></span>

<span data-ttu-id="70fe2-158">En el siguiente tutorial, aprenderás a proporcionar a los usuarios comentarios en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="70fe2-158">In the next tutorial you will learn how to provide users with real-time feedback.</span></span> <span data-ttu-id="70fe2-159">Estos comentarios incluirán información sobre la creación de los anclajes, la calidad de la comprensión del entorno y el estado de la sesión de Azure.</span><span class="sxs-lookup"><span data-stu-id="70fe2-159">This feedback will include information about Anchor creation, the quality of environment understanding, and the state of the Azure session.</span></span> <span data-ttu-id="70fe2-160">Sin comentarios, es posible que los usuarios no sepan si un anclaje se ha cargado correctamente en Azure, si la calidad del entorno es suficiente para la creación del anclaje o el estado actual.</span><span class="sxs-lookup"><span data-stu-id="70fe2-160">Without feedback, users may not know whether an anchor has successfully been uploaded to Azure, whether the quality of the environment is sufficient for anchor creation, or the current state.</span></span>

[<span data-ttu-id="70fe2-161">Siguiente lección: 3. Visualización de comentarios de Azure Spatial Anchors</span><span class="sxs-lookup"><span data-stu-id="70fe2-161">Next Lesson: 3. Displaying Azure Spatial Anchor feedback</span></span>](mrlearning-asa-ch3.md)
