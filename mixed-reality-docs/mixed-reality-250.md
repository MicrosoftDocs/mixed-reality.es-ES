---
title: MR 250 - HoloLens e inmersivos de uso compartido
description: Siga este tutorial con auriculares de Unity, Visual Studio, HoloLens y Windows Mixed Reality para conocer los detalles de uso compartido hologramas entre dispositivos de realidad mixta de codificación.
author: keveleigh
ms.author: kurtie
ms.date: 03/21/2018
ms.topic: article
keywords: holotoolkit, mixedrealitytoolkit, controlador, uso compartido, el mando de xbox, redes, entre dispositivos de unity mixedrealitytoolkit, envolvente, movimiento
ms.openlocfilehash: 9e1cb0d168b8bf830b4477190516cd19caef7972
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/12/2019
ms.locfileid: "59598047"
---
>[!NOTE]
><span data-ttu-id="f0c39-104">Los tutoriales de Mixed Reality Academy se diseñaron con HoloLens (gen 1) y Mixed Reality Inmersivos en mente.</span><span class="sxs-lookup"><span data-stu-id="f0c39-104">The Mixed Reality Academy tutorials were designed with HoloLens (1st gen) and Mixed Reality Immersive Headsets in mind.</span></span>  <span data-ttu-id="f0c39-105">Por lo tanto, creemos que es importante dejar estos tutoriales en su lugar para los desarrolladores que todavía están buscando orientación en el desarrollo para esos dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-105">As such, we feel it is important to leave these tutorials in place for developers who are still looking for guidance in developing for those devices.</span></span>  <span data-ttu-id="f0c39-106">Estos tutoriales le **_no_** actualizarse con las interacciones que se usan para HoloLens 2 o los conjuntos de herramientas más recientes.</span><span class="sxs-lookup"><span data-stu-id="f0c39-106">These tutorials will **_not_** be updated with the latest toolsets or interactions being used for HoloLens 2.</span></span>  <span data-ttu-id="f0c39-107">Se mantendrán para seguir trabajando en los dispositivos compatibles.</span><span class="sxs-lookup"><span data-stu-id="f0c39-107">They will be maintained to continue working on the supported devices.</span></span> <span data-ttu-id="f0c39-108">Habrá una nueva serie de tutoriales que se registrará en el futuro que demostrará cómo desarrollar para HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="f0c39-108">There will be a new series of tutorials that will be posted in the future that will demonstrate how to develop for HoloLens 2.</span></span>  <span data-ttu-id="f0c39-109">Este aviso se actualizará con un vínculo a esos tutoriales cuando se hayan registrado.</span><span class="sxs-lookup"><span data-stu-id="f0c39-109">This notice will be updated with a link to those tutorials when they are posted.</span></span>

<br>

# <a name="mr-sharing-250-hololens-and-immersive-headsets"></a><span data-ttu-id="f0c39-110">MR 250 de uso compartido: HoloLens e inmersivos</span><span class="sxs-lookup"><span data-stu-id="f0c39-110">MR Sharing 250: HoloLens and immersive headsets</span></span>

<span data-ttu-id="f0c39-111">Con la flexibilidad de plataforma Universal de Windows (UWP), es fácil crear una aplicación que abarca varios dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-111">With the flexibility of Universal Windows Platform (UWP), it is easy to create an application that spans multiple devices.</span></span> <span data-ttu-id="f0c39-112">Con esta flexibilidad, podemos crear experiencias que aprovechan los puntos fuertes de cada dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-112">With this flexibility, we can create experiences that leverage the strengths of each device.</span></span> <span data-ttu-id="f0c39-113">Este tutorial tratará de una experiencia básica compartida que se ejecuta en HoloLens y Windows Mixed Reality inmersivos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-113">This tutorial will cover a basic shared experience that runs on both HoloLens and Windows Mixed Reality immersive headsets.</span></span> <span data-ttu-id="f0c39-114">Este contenido se entregó originalmente en la conferencia Microsoft Build 2017 en Seattle, WA.</span><span class="sxs-lookup"><span data-stu-id="f0c39-114">This content was originally delivered at the Microsoft Build 2017 conference in Seattle, WA.</span></span>

<span data-ttu-id="f0c39-115">**En este tutorial, se hará lo siguiente:**</span><span class="sxs-lookup"><span data-stu-id="f0c39-115">**In this tutorial, we will:**</span></span>

* <span data-ttu-id="f0c39-116">Configurar una red mediante UNET.</span><span class="sxs-lookup"><span data-stu-id="f0c39-116">Setup a network using UNET.</span></span>
* <span data-ttu-id="f0c39-117">Comparta hologramas entre dispositivos de realidad mixta.</span><span class="sxs-lookup"><span data-stu-id="f0c39-117">Share holograms across mixed reality devices.</span></span>
* <span data-ttu-id="f0c39-118">Establecer una vista diferente de la aplicación dependiendo de qué se usa el dispositivo de realidad mixta.</span><span class="sxs-lookup"><span data-stu-id="f0c39-118">Establish a different view of the application depending on which mixed reality device is being used.</span></span>
* <span data-ttu-id="f0c39-119">Crear una experiencia compartida donde los usuarios de HoloLens guiar a los usuarios de inmersivos a través de algunos rompecabezas simple.</span><span class="sxs-lookup"><span data-stu-id="f0c39-119">Create a shared experience where HoloLens users guide immersive headsets users through some simple puzzles.</span></span>

## <a name="device-support"></a><span data-ttu-id="f0c39-120">Compatibilidad con dispositivos</span><span class="sxs-lookup"><span data-stu-id="f0c39-120">Device support</span></span>

<table>
<tr>
<th><span data-ttu-id="f0c39-121">Curso</span><span class="sxs-lookup"><span data-stu-id="f0c39-121">Course</span></span></th><th style="width:150px"> <span data-ttu-id="f0c39-122"><a href="hololens-hardware-details.md">HoloLens</a></span><span class="sxs-lookup"><span data-stu-id="f0c39-122"><a href="hololens-hardware-details.md">HoloLens</a></span></span></th><th style="width:150px"> <span data-ttu-id="f0c39-123"><a href="immersive-headset-hardware-details.md">Inmersivos</a></span><span class="sxs-lookup"><span data-stu-id="f0c39-123"><a href="immersive-headset-hardware-details.md">Immersive headsets</a></span></span></th>
</tr><tr>
<td><span data-ttu-id="f0c39-124">MR 250 de uso compartido: HoloLens e inmersivos</span><span class="sxs-lookup"><span data-stu-id="f0c39-124">MR Sharing 250: HoloLens and immersive headsets</span></span></td><td style="text-align: center;"> <span data-ttu-id="f0c39-125">✔️</span><span class="sxs-lookup"><span data-stu-id="f0c39-125">✔️</span></span></td><td style="text-align: center;"> <span data-ttu-id="f0c39-126">✔️</span><span class="sxs-lookup"><span data-stu-id="f0c39-126">✔️</span></span></td>
</tr>
</table>

## <a name="before-you-start"></a><span data-ttu-id="f0c39-127">Antes de empezar</span><span class="sxs-lookup"><span data-stu-id="f0c39-127">Before you start</span></span>

### <a name="prerequisites"></a><span data-ttu-id="f0c39-128">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="f0c39-128">Prerequisites</span></span>

* <span data-ttu-id="f0c39-129">Un equipo con Windows 10 con el [herramientas de desarrollo necesario](install-the-tools.md) y [configurado para admitir un auricular envolvente de Windows Mixed Reality](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span><span class="sxs-lookup"><span data-stu-id="f0c39-129">A Windows 10 PC with the [necessary development tools](install-the-tools.md) and [configured to support a Windows Mixed Reality immersive headset](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>
* <span data-ttu-id="f0c39-130">Un controlador de Xbox que funciona con su PC.</span><span class="sxs-lookup"><span data-stu-id="f0c39-130">An Xbox controller that works with your PC.</span></span>
* <span data-ttu-id="f0c39-131">Al menos un dispositivo HoloLens y un auricular envolvente.</span><span class="sxs-lookup"><span data-stu-id="f0c39-131">At least one HoloLens device and one immersive headset.</span></span>
* <span data-ttu-id="f0c39-132">Una red que permite la difusión de UDP para la detección.</span><span class="sxs-lookup"><span data-stu-id="f0c39-132">A network which allows UDP Broadcast for discovery.</span></span>

### <a name="project-files"></a><span data-ttu-id="f0c39-133">Archivos de proyecto</span><span class="sxs-lookup"><span data-stu-id="f0c39-133">Project files</span></span>

* <span data-ttu-id="f0c39-134">Descargue el [archivos](https://github.com/Microsoft/MixedReality250/archive/master.zip) requerida por el proyecto.</span><span class="sxs-lookup"><span data-stu-id="f0c39-134">Download the [files](https://github.com/Microsoft/MixedReality250/archive/master.zip) required by the project.</span></span> <span data-ttu-id="f0c39-135">Extraiga los archivos en una forma sencilla de recordar la ubicación.</span><span class="sxs-lookup"><span data-stu-id="f0c39-135">Extract the files to an easy to remember location.</span></span>
* <span data-ttu-id="f0c39-136">Este proyecto requiere el [una versión recomendada de Unity con el soporte técnico de Windows Mixed Reality](install-the-tools.md).</span><span class="sxs-lookup"><span data-stu-id="f0c39-136">This project requires the [a recommended version of Unity with Windows Mixed Reality support](install-the-tools.md).</span></span>

>[!NOTE]
><span data-ttu-id="f0c39-137">Si desea buscar en el código de origen antes de descargar, tiene [disponible en GitHub](https://github.com/Microsoft/MixedReality250).</span><span class="sxs-lookup"><span data-stu-id="f0c39-137">If you want to look through the source code before downloading, it's [available on GitHub](https://github.com/Microsoft/MixedReality250).</span></span>

## <a name="chapter-1---holo-world"></a><span data-ttu-id="f0c39-138">Capítulo 1: Holo World</span><span class="sxs-lookup"><span data-stu-id="f0c39-138">Chapter 1 - Holo World</span></span>

>[!VIDEO https://www.youtube.com/embed/IC0rp6rLiEc]

### <a name="objectives"></a><span data-ttu-id="f0c39-139">Objetivos</span><span class="sxs-lookup"><span data-stu-id="f0c39-139">Objectives</span></span>

<span data-ttu-id="f0c39-140">Asegúrese de que el entorno de desarrollo está listo para funcionar con un proyecto simple.</span><span class="sxs-lookup"><span data-stu-id="f0c39-140">Make sure the development environment is ready to go with a simple project.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="f0c39-141">Vamos a crear</span><span class="sxs-lookup"><span data-stu-id="f0c39-141">What we will build</span></span>

<span data-ttu-id="f0c39-142">Una aplicación que se muestra un holograma en HoloLens o auriculares Windows Mixed Reality envolventes.</span><span class="sxs-lookup"><span data-stu-id="f0c39-142">An application that shows a hologram on either HoloLens or a Windows Mixed Reality immersive headset.</span></span>

### <a name="steps"></a><span data-ttu-id="f0c39-143">Pasos</span><span class="sxs-lookup"><span data-stu-id="f0c39-143">Steps</span></span>
* <span data-ttu-id="f0c39-144">Abra Unity.</span><span class="sxs-lookup"><span data-stu-id="f0c39-144">Open Unity.</span></span>
    * <span data-ttu-id="f0c39-145">Seleccione **abierto**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-145">Select **Open**.</span></span>
    * <span data-ttu-id="f0c39-146">Vaya a la que extrajo los archivos del proyecto.</span><span class="sxs-lookup"><span data-stu-id="f0c39-146">Navigate to where you extracted the project files.</span></span>
    * <span data-ttu-id="f0c39-147">Haga clic en **Seleccionar carpeta**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-147">Click **Select Folder**.</span></span>
    * <span data-ttu-id="f0c39-148">*Se tardará un poco mientras que para que Unity procesar el proyecto por primera vez.*</span><span class="sxs-lookup"><span data-stu-id="f0c39-148">*It will take a little while for Unity to process the project the first time.*</span></span>
* <span data-ttu-id="f0c39-149">Compruebe que está habilitada la realidad mixta en Unity.</span><span class="sxs-lookup"><span data-stu-id="f0c39-149">Check that Mixed Reality is enabled in Unity.</span></span>
    * <span data-ttu-id="f0c39-150">Abra el cuadro de diálogo de configuración de compilación (**Control + Mayús + B** o **archivo > configuración de compilación...** ).</span><span class="sxs-lookup"><span data-stu-id="f0c39-150">Open the build settings dialog (**Control+Shift+B** or **File > Build Settings...**).</span></span>
    * <span data-ttu-id="f0c39-151">Seleccione **Universal Windows Platform** , a continuación, haga clic en **Cambiar plataforma**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-151">Select **Universal Windows Platform** then click **Switch Platform**.</span></span>
    * <span data-ttu-id="f0c39-152">Seleccione **Editar > configuración del Reproductor**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-152">Select **Edit>Player Settings**.</span></span>
    * <span data-ttu-id="f0c39-153">En el **Inspector** en el lado derecho del panel, expanda **XR configuración**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-153">In the **Inspector** panel on the right hand side, expand **XR Settings**.</span></span>
    * <span data-ttu-id="f0c39-154">Compruebe el **admite la realidad Virtual** cuadro.</span><span class="sxs-lookup"><span data-stu-id="f0c39-154">Check the **Virtual Reality Supported** box.</span></span>
    * <span data-ttu-id="f0c39-155">*Windows Mixed Reality debe ser el SDK de realidad Virtual.*</span><span class="sxs-lookup"><span data-stu-id="f0c39-155">*Windows Mixed Reality should be the Virtual Reality SDK.*</span></span>
* <span data-ttu-id="f0c39-156">Crear una escena.</span><span class="sxs-lookup"><span data-stu-id="f0c39-156">Create a scene.</span></span>
    * <span data-ttu-id="f0c39-157">En el **jerarquía** haga **cámara principal** seleccione **eliminar**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-157">In the **Hierarchy** right click **Main Camera** select **Delete**.</span></span>
    * <span data-ttu-id="f0c39-158">Desde **HoloToolkit > entrada > prefabricados** arrastre **MixedRealityCameraParent** a la **jerarquía**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-158">From **HoloToolkit > Input > Prefabs** drag **MixedRealityCameraParent** to the **Hierarchy**.</span></span>
* <span data-ttu-id="f0c39-159">Agregar hologramas a la escena</span><span class="sxs-lookup"><span data-stu-id="f0c39-159">Add Holograms to the scene</span></span>
    * <span data-ttu-id="f0c39-160">Desde **AppPrefabs** arrastre **Skybox** a la **vista de escena**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-160">From **AppPrefabs** drag **Skybox** to the **Scene View**.</span></span>
    * <span data-ttu-id="f0c39-161">Desde **AppPrefabs** arrastre **administradores** a la **jerarquía**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-161">From **AppPrefabs** drag **Managers** to the **Hierarchy**.</span></span>
    * <span data-ttu-id="f0c39-162">Desde **AppPrefabs** arrastre **isla** a la **jerarquía**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-162">From **AppPrefabs** drag **Island** to the **Hierarchy**.</span></span>
* <span data-ttu-id="f0c39-163">Guarde y compile</span><span class="sxs-lookup"><span data-stu-id="f0c39-163">Save And build</span></span>
    * <span data-ttu-id="f0c39-164">Guardar (ya sea **Control + S** o **archivo > Guardar escena**)</span><span class="sxs-lookup"><span data-stu-id="f0c39-164">Save (either **Control+S** or **File > Save Scene**)</span></span>
    * <span data-ttu-id="f0c39-165">Puesto que se trata de una nueva escena, deberá asígnele el nombre.</span><span class="sxs-lookup"><span data-stu-id="f0c39-165">Since this is a new scene, you'll need to name it.</span></span> <span data-ttu-id="f0c39-166">Nombre no importa, pero utilizamos SharedMixedReality.</span><span class="sxs-lookup"><span data-stu-id="f0c39-166">Name doesn't matter, but we use SharedMixedReality.</span></span>
* <span data-ttu-id="f0c39-167">Exportar a Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f0c39-167">Export To Visual Studio</span></span>
    * <span data-ttu-id="f0c39-168">Abra el menú de la compilación (**Control + Mayús + B** o **archivo > configuración de compilación**)</span><span class="sxs-lookup"><span data-stu-id="f0c39-168">Open the build menu (**Control+Shift+B** or **File > Build Settings**)</span></span>
    * <span data-ttu-id="f0c39-169">Haga clic en **agregar escenas abiertos.**</span><span class="sxs-lookup"><span data-stu-id="f0c39-169">Click **Add Open Scenes.**</span></span>
    * <span data-ttu-id="f0c39-170">Comprobar **Unity C# proyectos**</span><span class="sxs-lookup"><span data-stu-id="f0c39-170">Check **Unity C# Projects**</span></span>
    * <span data-ttu-id="f0c39-171">Haz clic en **Compilación**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-171">Click **Build**.</span></span>
    * <span data-ttu-id="f0c39-172">En la ventana del explorador de archivos que aparece, cree una carpeta nueva denominada **aplicación**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-172">In the file explorer window that appears, create a New Folder named **App**.</span></span>
    * <span data-ttu-id="f0c39-173">Solo haga clic en el **aplicación** carpeta.</span><span class="sxs-lookup"><span data-stu-id="f0c39-173">Single click the **App** folder.</span></span>
    * <span data-ttu-id="f0c39-174">Presione **Seleccionar carpeta.**</span><span class="sxs-lookup"><span data-stu-id="f0c39-174">Press **Select Folder.**</span></span>
    * <span data-ttu-id="f0c39-175">**Espere a que finalice la compilación**</span><span class="sxs-lookup"><span data-stu-id="f0c39-175">**Wait for the build to complete**</span></span>
    * <span data-ttu-id="f0c39-176">En la ventana del explorador de archivos que aparece, vaya a la **aplicación** carpeta.</span><span class="sxs-lookup"><span data-stu-id="f0c39-176">In the file explorer window that appears, navigate into the **App** folder.</span></span>
    * <span data-ttu-id="f0c39-177">Haga doble clic en **SharedMixedReality.sln** para iniciar Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f0c39-177">Double-click **SharedMixedReality.sln** to launch Visual Studio</span></span>
* <span data-ttu-id="f0c39-178">Construido a partir de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f0c39-178">Build From Visual Studio</span></span>
    * <span data-ttu-id="f0c39-179">Mediante la barra de herramientas superior cambie destino a **versión** y **x86**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-179">Using the top toolbar change target to **Release** and **x86**.</span></span>
    * <span data-ttu-id="f0c39-180">Haga clic en la flecha situada junto a **máquina Local** y seleccione **dispositivo** para implementar en HoloLens</span><span class="sxs-lookup"><span data-stu-id="f0c39-180">Click the arrow next to **Local Machine** and select **Device** to deploy to HoloLens</span></span>
    * <span data-ttu-id="f0c39-181">Haga clic en la flecha situada junto a **dispositivo** y seleccione **máquina Local** implementar para los auriculares de realidad mixta.</span><span class="sxs-lookup"><span data-stu-id="f0c39-181">Click the arrow next to **Device** and select **Local Machine** to deploy for the mixed reality headset.</span></span>
    * <span data-ttu-id="f0c39-182">Haga clic en **Depurar -> Iniciar sin depurar** o **Control + F5** para iniciar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f0c39-182">Click **Debug->Start Without Debugging** or **Control+F5** to start the application.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="f0c39-183">Descripción detallada del código</span><span class="sxs-lookup"><span data-stu-id="f0c39-183">Digging into the code</span></span>

<span data-ttu-id="f0c39-184">En el panel proyecto, vaya a **Assets\HoloToolkit\Input\Scripts\Utilities** y haga doble clic en **MixedRealityCameraManager.cs** para abrirlo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-184">In the project panel, navigate to **Assets\HoloToolkit\Input\Scripts\Utilities** and double click **MixedRealityCameraManager.cs** to open it.</span></span>

<span data-ttu-id="f0c39-185">**Información general:** MixedRealityCameraManager.cs es un sencillo script que ajusta la configuración en segundo plano y de nivel de calidad basándose en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-185">**Overview:** MixedRealityCameraManager.cs is a simple script that adjusts quality level and background settings based on the device.</span></span> <span data-ttu-id="f0c39-186">Clave aquí es HolographicSettings.IsDisplayOpaque, que permite que un script detectar si el dispositivo es un HoloLens (IsDisplayOpaque devuelve false) o un auricular envolvente (IsDisplayOpaque devuelve true).</span><span class="sxs-lookup"><span data-stu-id="f0c39-186">Key here is HolographicSettings.IsDisplayOpaque, which allows a script to detect if the device is a HoloLens (IsDisplayOpaque returns false) or an immersive headset (IsDisplayOpaque returns true).</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="f0c39-187">Disfrute de su progreso</span><span class="sxs-lookup"><span data-stu-id="f0c39-187">Enjoy your progress</span></span>

<span data-ttu-id="f0c39-188">En este momento la aplicación solo representará un holograma.</span><span class="sxs-lookup"><span data-stu-id="f0c39-188">At this point the application will just render a hologram.</span></span> <span data-ttu-id="f0c39-189">Se agregará interacción para el holograma más adelante.</span><span class="sxs-lookup"><span data-stu-id="f0c39-189">We will add interaction to the hologram later.</span></span> <span data-ttu-id="f0c39-190">Ambos dispositivos representarán el holograma el mismo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-190">Both devices will render the hologram the same.</span></span> <span data-ttu-id="f0c39-191">Los auriculares envolventes también representarán un fondo azul cielo y nubes.</span><span class="sxs-lookup"><span data-stu-id="f0c39-191">The immersive headset will also render a blue sky and clouds background.</span></span>

## <a name="chapter-2---interaction"></a><span data-ttu-id="f0c39-192">Capítulo 2: interacción</span><span class="sxs-lookup"><span data-stu-id="f0c39-192">Chapter 2 - Interaction</span></span>

>[!VIDEO https://www.youtube.com/embed/Lrb1y4sQRvI]

### <a name="objectives"></a><span data-ttu-id="f0c39-193">Objetivos</span><span class="sxs-lookup"><span data-stu-id="f0c39-193">Objectives</span></span>

<span data-ttu-id="f0c39-194">Muestra cómo controlar la entrada para una aplicación de Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="f0c39-194">Show how to handle input for a Windows Mixed Reality application.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="f0c39-195">Vamos a crear</span><span class="sxs-lookup"><span data-stu-id="f0c39-195">What we will build</span></span>

<span data-ttu-id="f0c39-196">A partir de la aplicación desde el capítulo 1, se agregará funcionalidad para permitir al usuario recoger el holograma y colóquelo en una superficie del mundo real en HoloLens o en una tabla virtual de un auricular envolvente.</span><span class="sxs-lookup"><span data-stu-id="f0c39-196">Building on the application from chapter 1, we will add functionality to allow the user to pick up the hologram and place it on a real world surface in HoloLens or on a virtual table in an immersive headset.</span></span>

<span data-ttu-id="f0c39-197">**Actualizador de entrada:** En HoloLens el gesto de select es el **en el aire**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-197">**Input Refresher:** On HoloLens the select gesture is the **air tap**.</span></span> <span data-ttu-id="f0c39-198">En inmersivos, usaremos el **A** botón en el controlador de Xbox.</span><span class="sxs-lookup"><span data-stu-id="f0c39-198">On immersive headsets, we will use the **A** button on the Xbox controller.</span></span> <span data-ttu-id="f0c39-199">Para obtener más información en la entrada [comience aquí](gestures.md).</span><span class="sxs-lookup"><span data-stu-id="f0c39-199">For more information on input [start here](gestures.md).</span></span>

### <a name="steps"></a><span data-ttu-id="f0c39-200">Pasos</span><span class="sxs-lookup"><span data-stu-id="f0c39-200">Steps</span></span>
* <span data-ttu-id="f0c39-201">Agregar administrador de entrada</span><span class="sxs-lookup"><span data-stu-id="f0c39-201">Add Input manager</span></span>
    * <span data-ttu-id="f0c39-202">Desde **HoloToolkit > entrada > prefabricados** arrastre **InputManager** a **jerarquía** como elemento secundario de **administradores**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-202">From **HoloToolkit > Input > Prefabs** drag **InputManager** to **Hierarchy** as a child of **Managers**.</span></span>
    * <span data-ttu-id="f0c39-203">Desde **HoloToolkit > entrada > prefabricados > Cursor** arrastre **Cursor** a **jerarquía**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-203">From **HoloToolkit > Input > Prefabs > Cursor** drag **Cursor** to **Hierarchy**.</span></span>
* <span data-ttu-id="f0c39-204">Agregar asignación espacial</span><span class="sxs-lookup"><span data-stu-id="f0c39-204">Add Spatial Mapping</span></span>
    * <span data-ttu-id="f0c39-205">Desde **HoloToolkit > SpatialMapping > prefabricados** arrastre **SpatialMapping** a **jerarquía**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-205">From **HoloToolkit > SpatialMapping > Prefabs** drag **SpatialMapping** to **Hierarchy**.</span></span>
* <span data-ttu-id="f0c39-206">Agregar Playspace Virtual</span><span class="sxs-lookup"><span data-stu-id="f0c39-206">Add Virtual Playspace</span></span>
    * <span data-ttu-id="f0c39-207">En **jerarquía** expanda **MixedRealityCameraParent** seleccione **límite**</span><span class="sxs-lookup"><span data-stu-id="f0c39-207">In **Hierarchy** expand **MixedRealityCameraParent** select **Boundary**</span></span>
    * <span data-ttu-id="f0c39-208">En **Inspector** panel Active la casilla para habilitar **límite**</span><span class="sxs-lookup"><span data-stu-id="f0c39-208">In **Inspector** panel check the box to enable **Boundary**</span></span>
    * <span data-ttu-id="f0c39-209">Desde **AppPrefabs** arrastre **VRRoom** a **jerarquía**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-209">From **AppPrefabs** drag **VRRoom** to **Hierarchy**.</span></span>
* <span data-ttu-id="f0c39-210">Agregar WorldAnchorManager</span><span class="sxs-lookup"><span data-stu-id="f0c39-210">Add WorldAnchorManager</span></span>
    * <span data-ttu-id="f0c39-211">En **jerarquía**, seleccione **administradores**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-211">In **Hierarchy**, Select **Managers**.</span></span>
    * <span data-ttu-id="f0c39-212">En **Inspector**, haga clic en **Agregar componente**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-212">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="f0c39-213">Tipo **World delimitador Manager**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-213">Type **World Anchor Manager**.</span></span>
    * <span data-ttu-id="f0c39-214">Seleccione **World delimitador Manager** para agregarlo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-214">Select **World Anchor Manager** to add it.</span></span>
* <span data-ttu-id="f0c39-215">Agregar TapToPlace a la isla</span><span class="sxs-lookup"><span data-stu-id="f0c39-215">Add TapToPlace to the Island</span></span>
    * <span data-ttu-id="f0c39-216">En **jerarquía**, expanda **isla**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-216">In **Hierarchy**, expand **Island**.</span></span>
    * <span data-ttu-id="f0c39-217">Seleccione **MixedRealityLand**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-217">Select **MixedRealityLand**.</span></span>
    * <span data-ttu-id="f0c39-218">En **Inspector**, haga clic en **Agregar componente**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-218">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="f0c39-219">Tipo **pulse a otro** y selecciónelo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-219">Type **Tap To Place** and select it.</span></span>
    * <span data-ttu-id="f0c39-220">Comprobar **colocar primario al pulsar**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-220">Check **Place Parent On Tap**.</span></span>
    * <span data-ttu-id="f0c39-221">Establecer **colocación desplazamiento** a **(0, 0.1, 0)**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-221">Set **Placement Offset** to **(0, 0.1, 0)**.</span></span>
* <span data-ttu-id="f0c39-222">Guarde y compile como antes</span><span class="sxs-lookup"><span data-stu-id="f0c39-222">Save and Build as before</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="f0c39-223">Descripción detallada del código</span><span class="sxs-lookup"><span data-stu-id="f0c39-223">Digging into the code</span></span>

<span data-ttu-id="f0c39-224">**Script 1 - GamepadInput.cs**</span><span class="sxs-lookup"><span data-stu-id="f0c39-224">**Script 1 - GamepadInput.cs**</span></span>

<span data-ttu-id="f0c39-225">En el panel proyecto, vaya a **Assets\HoloToolkit\Input\Scripts\InputSources** y haga doble clic en **GamepadInput.cs** para abrirlo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-225">In the project panel navigate to **Assets\HoloToolkit\Input\Scripts\InputSources** and double click **GamepadInput.cs** to open it.</span></span> <span data-ttu-id="f0c39-226">Desde la misma ruta de acceso en el panel proyecto, hacer doble clic en **InteractionSourceInputSource.cs**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-226">From the same path in the project panel, also double click **InteractionSourceInputSource.cs**.</span></span>

<span data-ttu-id="f0c39-227">Tenga en cuenta que ambos scripts tienen una clase base común, BaseInputSource.</span><span class="sxs-lookup"><span data-stu-id="f0c39-227">Note that both scripts have a common base class, BaseInputSource.</span></span>

<span data-ttu-id="f0c39-228">BaseInputSource mantiene una referencia a un InputManager, que permite que un script para desencadenar eventos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-228">BaseInputSource keeps a reference to an InputManager, which allows a script to trigger events.</span></span> <span data-ttu-id="f0c39-229">En este caso, el evento InputClicked es relevante.</span><span class="sxs-lookup"><span data-stu-id="f0c39-229">In this case, the InputClicked event is relevant.</span></span> <span data-ttu-id="f0c39-230">Esto será importante recordar cuando llegamos a la secuencia de comandos 2, TapToPlace.</span><span class="sxs-lookup"><span data-stu-id="f0c39-230">This will be important to remember when we get to script 2, TapToPlace.</span></span> <span data-ttu-id="f0c39-231">En el caso de GamePadInput, nos sondear en busca de en el controlador de presionar el botón, a continuación, se genera el evento InputClicked.</span><span class="sxs-lookup"><span data-stu-id="f0c39-231">In the case of GamePadInput, we poll for the A button on the controller to be pressed, then we raise the InputClicked event.</span></span> <span data-ttu-id="f0c39-232">En el caso de InteractionSourceInputSource, se genera el evento de InputClicked en respuesta a la TappedEvent.</span><span class="sxs-lookup"><span data-stu-id="f0c39-232">In the case of InteractionSourceInputSource, we raise the InputClicked event in response to the TappedEvent.</span></span>

<span data-ttu-id="f0c39-233">**Secuencia de comandos 2 - TapToPlace.cs**</span><span class="sxs-lookup"><span data-stu-id="f0c39-233">**Script 2 - TapToPlace.cs**</span></span>

<span data-ttu-id="f0c39-234">En el panel proyecto, vaya a **Assets\HoloToolkit\SpatialMapping\Scripts** y haga doble clic en **TapToPlace.cs** para abrirlo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-234">In the project panel navigate to **Assets\HoloToolkit\SpatialMapping\Scripts** and double click **TapToPlace.cs** to open it.</span></span>

<span data-ttu-id="f0c39-235">Lo primero que muchos programadores desean implementar al crear una aplicación holográfica refiere a hologramas con la entrada del gesto.</span><span class="sxs-lookup"><span data-stu-id="f0c39-235">The first thing many developers want to implement when creating a Holographic application is moving Holograms with gesture input.</span></span> <span data-ttu-id="f0c39-236">Por lo tanto, nos hemos esforzado por exhaustivamente comentar esta secuencia de comandos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-236">As such, we've endeavored to thoroughly comment this script.</span></span> <span data-ttu-id="f0c39-237">Algunas cosas merecen la pena destacar en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="f0c39-237">A few things are worth highlighting for this tutorial.</span></span>

<span data-ttu-id="f0c39-238">En primer lugar, tenga en cuenta que TapToPlace implementa IInputClickHandler.</span><span class="sxs-lookup"><span data-stu-id="f0c39-238">First, note that TapToPlace implements IInputClickHandler.</span></span> <span data-ttu-id="f0c39-239">IInputClickHandler expone las funciones que controlan el evento InputClicked por GamePadInput.cs o InteractionSourceInputSource.cs.</span><span class="sxs-lookup"><span data-stu-id="f0c39-239">IInputClickHandler exposes the functions that handle the InputClicked event raised by GamePadInput.cs or InteractionSourceInputSource.cs.</span></span> <span data-ttu-id="f0c39-240">OnInputClicked se llama cuando un BaseInputSource detecta un clic, mientras que el objeto con TapToPlace tiene el foco.</span><span class="sxs-lookup"><span data-stu-id="f0c39-240">OnInputClicked is called when a BaseInputSource detects a click while the object with TapToPlace is in focus.</span></span> <span data-ttu-id="f0c39-241">Ser airtapping en HoloLens o al presionar el botón en el controlador de Xbox desencadenará el evento.</span><span class="sxs-lookup"><span data-stu-id="f0c39-241">Either airtapping on HoloLens or pressing the A button on the Xbox controller will trigger the event.</span></span>

<span data-ttu-id="f0c39-242">En segundo lugar está el código se ejecuta en update para comprobar si una superficie se está examinando por lo que podemos aplicar el objeto de juego en una superficie, como una tabla.</span><span class="sxs-lookup"><span data-stu-id="f0c39-242">Second is the code be executed in update to see if a surface is being looked at so we can place the game object on a surface, like a table.</span></span> <span data-ttu-id="f0c39-243">Los auriculares envolvente no tienen un concepto de superficies real, por lo que el objeto que representa la parte superior de la tabla (Vroom > TableThingy > cubo) se ha marcado con la capa física SpatialMapping, por lo que el rayo tinte Update entran en conflicto con la parte superior de la tabla virtual.</span><span class="sxs-lookup"><span data-stu-id="f0c39-243">The immersive headset doesn't have a concept of real surfaces, so the object that represents the table top (Vroom > TableThingy > Cube) has been marked with the SpatialMapping physics layer, so the ray cast in Update will collide with the virtual table top.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="f0c39-244">Disfrute de su progreso</span><span class="sxs-lookup"><span data-stu-id="f0c39-244">Enjoy your progress</span></span>

<span data-ttu-id="f0c39-245">Esta vez puede seleccionar la isla de moverla.</span><span class="sxs-lookup"><span data-stu-id="f0c39-245">This time you can select the island to move it.</span></span> <span data-ttu-id="f0c39-246">Puede mover la isla a una superficie real en HoloLens.</span><span class="sxs-lookup"><span data-stu-id="f0c39-246">On HoloLens you can move the island to a real surface.</span></span> <span data-ttu-id="f0c39-247">En los auriculares envolventes puede mover la isla a la tabla virtual que se ha agregado.</span><span class="sxs-lookup"><span data-stu-id="f0c39-247">In the immersive headset you can move the island to the virtual table we added.</span></span>

## <a name="chapter-3---sharing"></a><span data-ttu-id="f0c39-248">Capítulo 3: uso compartido</span><span class="sxs-lookup"><span data-stu-id="f0c39-248">Chapter 3 - Sharing</span></span>

>[!VIDEO https://www.youtube.com/embed/1diycJvxfDc]

### <a name="objectives"></a><span data-ttu-id="f0c39-249">Objetivos</span><span class="sxs-lookup"><span data-stu-id="f0c39-249">Objectives</span></span>

<span data-ttu-id="f0c39-250">Asegúrese de que la red está configurada correctamente y de detalle cómo delimitadores espaciales se comparten entre dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-250">Ensure that the network is correctly configured and detail how spatial anchors are shared between devices.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="f0c39-251">Vamos a crear</span><span class="sxs-lookup"><span data-stu-id="f0c39-251">What we will build</span></span>

<span data-ttu-id="f0c39-252">Nuestro proyecto se convertirá a un proyecto de varios jugadores.</span><span class="sxs-lookup"><span data-stu-id="f0c39-252">We will convert our project to a multiplayer project.</span></span> <span data-ttu-id="f0c39-253">Se agregará la interfaz de usuario y la lógica para sesiones de host o combinación.</span><span class="sxs-lookup"><span data-stu-id="f0c39-253">We will add UI and logic to host or join sessions.</span></span> <span data-ttu-id="f0c39-254">HoloLens verán los usuarios entre sí en la sesión con nubes abrumados y los usuarios de auriculares envolventes tienen nubes cerca de donde es el delimitador.</span><span class="sxs-lookup"><span data-stu-id="f0c39-254">HoloLens users will see each other in the session with clouds over their heads, and immersive headset users have clouds near to where the anchor is.</span></span> <span data-ttu-id="f0c39-255">Los usuarios en el inmersivos verán los usuarios de HoloLens en relación con el origen de la escena.</span><span class="sxs-lookup"><span data-stu-id="f0c39-255">Users in the immersive headsets will see the HoloLens users relative to the origin of the scene.</span></span> <span data-ttu-id="f0c39-256">Todos los usuarios de HoloLens verán el holograma de la isla en el mismo lugar.</span><span class="sxs-lookup"><span data-stu-id="f0c39-256">HoloLens users will all see the hologram of the island in the same place.</span></span> <span data-ttu-id="f0c39-257">Es la clave a tener en cuenta que los usuarios de la inmersivos no estará en la isla durante este capítulo, pero se comportarán de forma muy similar a HoloLens, con una vista de la isla de pájaros.</span><span class="sxs-lookup"><span data-stu-id="f0c39-257">It is key to note that the users in the immersive headsets will not be on the island during this chapter, but will behave very similarly to HoloLens, with a birds eye view of the island.</span></span>

### <a name="steps"></a><span data-ttu-id="f0c39-258">Pasos</span><span class="sxs-lookup"><span data-stu-id="f0c39-258">Steps</span></span>
* <span data-ttu-id="f0c39-259">Isla de quitar y VRRoom</span><span class="sxs-lookup"><span data-stu-id="f0c39-259">Remove Island and VRRoom</span></span>
    * <span data-ttu-id="f0c39-260">En **jerarquía** haga **isla** seleccione **eliminar**</span><span class="sxs-lookup"><span data-stu-id="f0c39-260">In **Hierarchy** right-click **Island** select **Delete**</span></span>
    * <span data-ttu-id="f0c39-261">En **jerarquía** haga **VRRoom** seleccione **eliminar**</span><span class="sxs-lookup"><span data-stu-id="f0c39-261">In **Hierarchy** right-click **VRRoom** select **Delete**</span></span>
* <span data-ttu-id="f0c39-262">Agregar Usland</span><span class="sxs-lookup"><span data-stu-id="f0c39-262">Add Usland</span></span>
    * <span data-ttu-id="f0c39-263">Desde **AppPrefabs** arrastre **Usland** a **jerarquía**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-263">From **AppPrefabs** drag **Usland** to **Hierarchy**.</span></span>
* <span data-ttu-id="f0c39-264">Desde **AppPrefabs** arrastre cada uno de los procedimientos siguientes para **jerarquía**:</span><span class="sxs-lookup"><span data-stu-id="f0c39-264">From **AppPrefabs** drag each of the following to **Hierarchy**:</span></span>
    * <span data-ttu-id="f0c39-265">**UNETSharingStage**</span><span class="sxs-lookup"><span data-stu-id="f0c39-265">**UNETSharingStage**</span></span>
    * <span data-ttu-id="f0c39-266">**UNetAnchorRoot**</span><span class="sxs-lookup"><span data-stu-id="f0c39-266">**UNetAnchorRoot**</span></span>
    * <span data-ttu-id="f0c39-267">**UIContainer**</span><span class="sxs-lookup"><span data-stu-id="f0c39-267">**UIContainer**</span></span>
    * <span data-ttu-id="f0c39-268">**DebugPanelButton**</span><span class="sxs-lookup"><span data-stu-id="f0c39-268">**DebugPanelButton**</span></span>
* <span data-ttu-id="f0c39-269">Guarde y compile como antes</span><span class="sxs-lookup"><span data-stu-id="f0c39-269">Save and Build as before</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="f0c39-270">Descripción detallada del código</span><span class="sxs-lookup"><span data-stu-id="f0c39-270">Digging into the code</span></span>

<span data-ttu-id="f0c39-271">En el panel proyecto, vaya a **Assets\AppPrefabs\Support\SharingWithUnet\Scripts** y haga doble clic en **UnetAnchorManager.cs**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-271">In the project panel, navigate to **Assets\AppPrefabs\Support\SharingWithUnet\Scripts** and double-click on **UnetAnchorManager.cs**.</span></span> <span data-ttu-id="f0c39-272">La capacidad de uno HoloLens compartir información de seguimiento con otro HoloLens tal que los dispositivos pueden compartir el mismo espacio es casi mágica.</span><span class="sxs-lookup"><span data-stu-id="f0c39-272">The ability for one HoloLens to share tracking information with another HoloLens such that both devices can share the same space is near magical.</span></span> <span data-ttu-id="f0c39-273">La eficacia de la realidad mixta cobra vida cuando dos o más personas pueden colaborar mediante los mismos datos digitales.</span><span class="sxs-lookup"><span data-stu-id="f0c39-273">The power of mixed reality comes alive when two or more people can collaborate using the same digital data.</span></span>

<span data-ttu-id="f0c39-274">Algunos aspectos que debe señalar en esta secuencia de comandos:</span><span class="sxs-lookup"><span data-stu-id="f0c39-274">A few things to point out in this script:</span></span>

<span data-ttu-id="f0c39-275">En la función de inicio, tenga en cuenta la comprobación de **IsDisplayOpaque**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-275">In the start function, notice the check for **IsDisplayOpaque**.</span></span> <span data-ttu-id="f0c39-276">En este caso, hemos fingir que se ha establecido el delimitador.</span><span class="sxs-lookup"><span data-stu-id="f0c39-276">In this case, we pretend that the Anchor is established.</span></span> <span data-ttu-id="f0c39-277">Esto es porque el inmersivos no exponen una manera de importar o exportar los delimitadores.</span><span class="sxs-lookup"><span data-stu-id="f0c39-277">This is because the immersive headsets do not expose a way to import or export anchors.</span></span> <span data-ttu-id="f0c39-278">Sin embargo, si se está ejecutando en un HoloLens, este script implementa los anclajes de uso compartidos entre los dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-278">If we are running on a HoloLens, however, this script implements sharing anchors between the devices.</span></span> <span data-ttu-id="f0c39-279">El dispositivo que se inicia la sesión, creará un delimitador para la exportación.</span><span class="sxs-lookup"><span data-stu-id="f0c39-279">The device that starts the session will create an anchor for exporting.</span></span> <span data-ttu-id="f0c39-280">El dispositivo que se une a una sesión solicitará el delimitador del dispositivo que se inició la sesión.</span><span class="sxs-lookup"><span data-stu-id="f0c39-280">The device that joins a session will request the anchor from the device that started the session.</span></span>

<span data-ttu-id="f0c39-281">**Exportar:**</span><span class="sxs-lookup"><span data-stu-id="f0c39-281">**Exporting:**</span></span>

<span data-ttu-id="f0c39-282">Cuando un usuario crea una sesión, NetworkDiscoveryWithAnchors llamará a la función UNETAnchorManagers CreateAnchor.</span><span class="sxs-lookup"><span data-stu-id="f0c39-282">When a user creates a session, NetworkDiscoveryWithAnchors will call UNETAnchorManagers CreateAnchor function.</span></span> <span data-ttu-id="f0c39-283">Vamos a seguir CreateAnchor flujo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-283">Let's follow CreateAnchor flow.</span></span>

<span data-ttu-id="f0c39-284">Empezaremos por realizar algunas tareas de mantenimiento, borrarlos de todos los datos que se han podemos recopilados para delimitadores anteriores.</span><span class="sxs-lookup"><span data-stu-id="f0c39-284">We start by doing some housekeeping, clearing out any data we may have collected for previous anchors.</span></span> <span data-ttu-id="f0c39-285">A continuación, comprobamos si hay un anclaje en caché para cargar.</span><span class="sxs-lookup"><span data-stu-id="f0c39-285">Then we check if there is a cached anchor to load.</span></span> <span data-ttu-id="f0c39-286">Los datos de anclaje tienden a ser entre 5 y 20 MB, por lo que puede guardar la reutilización de los anclajes en caché en la cantidad de datos que se necesitan para transferir a través de la red.</span><span class="sxs-lookup"><span data-stu-id="f0c39-286">The anchor data tends to be between 5 and 20 MB, so reusing cached anchors can save on the amount of data we need to transfer over the network.</span></span> <span data-ttu-id="f0c39-287">Veremos cómo funciona un poco más adelante.</span><span class="sxs-lookup"><span data-stu-id="f0c39-287">We'll see how this works a bit later.</span></span> <span data-ttu-id="f0c39-288">Aunque estamos usando nuevamente el delimitador, debemos obtener el delimitador de datos listos en caso de que une a un nuevo cliente que no tienen el delimitador.</span><span class="sxs-lookup"><span data-stu-id="f0c39-288">Even if we are reusing the anchor, we need to get the anchor data ready in case a new client joins that doesn't have the anchor.</span></span>

<span data-ttu-id="f0c39-289">Hablando de preparar los datos de anclaje, la clase WorldAnchorTransferBatch expone la funcionalidad para preparar los datos de anclaje para enviar a otro dispositivo o aplicación y la funcionalidad para importar los datos de anclaje.</span><span class="sxs-lookup"><span data-stu-id="f0c39-289">Speaking of getting the anchor data ready, the WorldAnchorTransferBatch class exposes the functionality to prepare anchor data for sending to another device or application and the functionality to import the anchor data.</span></span> <span data-ttu-id="f0c39-290">Puesto que estamos en la ruta de acceso de exportación, agregaremos nuestro delimitador para el WorldAnchorTransferBatch y llamar a la función ExportAsync.</span><span class="sxs-lookup"><span data-stu-id="f0c39-290">Since we're on the export path, we will add our anchor to the WorldAnchorTransferBatch and call the ExportAsync function.</span></span> <span data-ttu-id="f0c39-291">ExportAsync, a continuación, llamará a la devolución de llamada WriteBuffer cuando genera datos para la exportación.</span><span class="sxs-lookup"><span data-stu-id="f0c39-291">ExportAsync will then call the WriteBuffer callback as it generates data for export.</span></span> <span data-ttu-id="f0c39-292">Cuando todos los datos se ha exportado se llamará ExportComplete.</span><span class="sxs-lookup"><span data-stu-id="f0c39-292">When all of the data has been exported ExportComplete will be called.</span></span> <span data-ttu-id="f0c39-293">En WriteBuffer se agrega el fragmento de datos a una lista que se mantenga para la exportación.</span><span class="sxs-lookup"><span data-stu-id="f0c39-293">In WriteBuffer we add the chunk of data to a list we keep for exporting.</span></span> <span data-ttu-id="f0c39-294">En ExportComplete se convierta la lista en una matriz.</span><span class="sxs-lookup"><span data-stu-id="f0c39-294">In ExportComplete we convert the list to an array.</span></span> <span data-ttu-id="f0c39-295">La variable AnchorName también se establece, lo que activará otros dispositivos para solicitar el anclaje si no lo tienen.</span><span class="sxs-lookup"><span data-stu-id="f0c39-295">The AnchorName variable is also set, which will trigger other devices to request the anchor if they don't have it.</span></span>

<span data-ttu-id="f0c39-296">En algunos casos, el delimitador no exportar o creará tan pocos datos que se volverá a intentarlo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-296">In some cases the anchor won't export or will create so little data that we will try again.</span></span> <span data-ttu-id="f0c39-297">Aquí simplemente llamamos CreateAnchor nuevo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-297">Here we just call CreateAnchor again.</span></span>

<span data-ttu-id="f0c39-298">Una función final en la ruta de acceso de exportación es AnchorFoundRemotely.</span><span class="sxs-lookup"><span data-stu-id="f0c39-298">A final function in the export path is AnchorFoundRemotely.</span></span> <span data-ttu-id="f0c39-299">Cuando otro dispositivo encuentra el delimitador, ese dispositivo le indicará que el host y el host usará como una señal de que el delimitador es un "buena delimitador" y puede almacenarse en caché.</span><span class="sxs-lookup"><span data-stu-id="f0c39-299">When another device finds the anchor, that device will tell the host, and the host will use that as a signal that the anchor is a "good anchor" and can be cached.</span></span>

<span data-ttu-id="f0c39-300">**Importar:**</span><span class="sxs-lookup"><span data-stu-id="f0c39-300">**Importing:**</span></span>

<span data-ttu-id="f0c39-301">Cuando un HoloLens une a una sesión, debe importar un delimitador.</span><span class="sxs-lookup"><span data-stu-id="f0c39-301">When a HoloLens joins a session, it needs to import an anchor.</span></span> <span data-ttu-id="f0c39-302">En función de actualización del UNETAnchorManager, se sondea el AnchorName.</span><span class="sxs-lookup"><span data-stu-id="f0c39-302">In UNETAnchorManager's Update function, the AnchorName is polled.</span></span> <span data-ttu-id="f0c39-303">Cuando se cambia el nombre del delimitador, comienza el proceso de importación.</span><span class="sxs-lookup"><span data-stu-id="f0c39-303">When the anchor name changes, the import process begins.</span></span> <span data-ttu-id="f0c39-304">En primer lugar, se intenta cargar el delimitador con el nombre especificado del almacén local del delimitador.</span><span class="sxs-lookup"><span data-stu-id="f0c39-304">First, we try to load the anchor with the specified name from the local anchor store.</span></span> <span data-ttu-id="f0c39-305">Si se dispone de él, se puede usar sin volver a descargar los datos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-305">If we already have it, we can use it without downloading the data again.</span></span> <span data-ttu-id="f0c39-306">Si no lo tenemos, a continuación, llamamos al WaitForAnchor que iniciará la descarga.</span><span class="sxs-lookup"><span data-stu-id="f0c39-306">If we don't have it, then we call WaitForAnchor which will initiate the download.</span></span>

<span data-ttu-id="f0c39-307">Cuando se completa la descarga, se denomina NetworkTransmitter_dataReadyEvent.</span><span class="sxs-lookup"><span data-stu-id="f0c39-307">When the download is completed, NetworkTransmitter_dataReadyEvent is called.</span></span> <span data-ttu-id="f0c39-308">Esto señalará el bucle de actualización para llamar a ImportAsync con los datos descargados.</span><span class="sxs-lookup"><span data-stu-id="f0c39-308">This will signal the Update loop to call ImportAsync with the downloaded data.</span></span> <span data-ttu-id="f0c39-309">ImportAsync llamará a ImportComplete cuando se completa el proceso de importación.</span><span class="sxs-lookup"><span data-stu-id="f0c39-309">ImportAsync will call ImportComplete when the import process is complete.</span></span> <span data-ttu-id="f0c39-310">Si la importación se realiza correctamente, el delimitador se guardarán en el almacén local del Reproductor.</span><span class="sxs-lookup"><span data-stu-id="f0c39-310">If the import is successful, the anchor will be saved in the local player store.</span></span> <span data-ttu-id="f0c39-311">PlayerController.cs realmente realiza la llamada a AnchorFoundRemotely para que el host sepa que se ha establecido un anclaje de buena.</span><span class="sxs-lookup"><span data-stu-id="f0c39-311">PlayerController.cs actually makes the call to AnchorFoundRemotely to let the host know that a good anchor has been established.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="f0c39-312">Disfrute de su progreso</span><span class="sxs-lookup"><span data-stu-id="f0c39-312">Enjoy your progress</span></span>

<span data-ttu-id="f0c39-313">Esta vez un usuario con un HoloLens va a hospedar una sesión mediante el **iniciar sesión** botón en la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="f0c39-313">This time a user with a HoloLens will host a session using the **start session** button in the UI.</span></span> <span data-ttu-id="f0c39-314">Otros usuarios, tanto en HoloLens o un auricular envolvente, se selecciona la sesión y, a continuación, seleccione el **unirse a sesión** botón en la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="f0c39-314">Other users, both on HoloLens or an immersive headset, will select the session and then select the **join session** button in the UI.</span></span> <span data-ttu-id="f0c39-315">Si tiene varias personas con dispositivos HoloLens, tendrán nubes rojo abrumados.</span><span class="sxs-lookup"><span data-stu-id="f0c39-315">If you have multiple people with HoloLens devices, they will have red clouds over their heads.</span></span> <span data-ttu-id="f0c39-316">También habrá una nube azul para cada auriculares envolventes, pero las nubes azules no estará por encima de los auriculares, los auriculares no intenta buscar el mismo espacio de coordenadas universales como los dispositivos HoloLens.</span><span class="sxs-lookup"><span data-stu-id="f0c39-316">There will also be a blue cloud for each immersive headset, but the blue clouds will not be above the headsets, as the headsets are not trying to find the same world coordinate space as the HoloLens devices.</span></span>

<span data-ttu-id="f0c39-317">En este punto en el proyecto es una aplicación de uso compartida independiente; no hace mucho y puede servir como base.</span><span class="sxs-lookup"><span data-stu-id="f0c39-317">This point in the project is a contained sharing application; it doesn't do very much, and could act as a baseline.</span></span> <span data-ttu-id="f0c39-318">En los capítulos siguientes, comenzaremos a crear una experiencia de las personas a disfrutar.</span><span class="sxs-lookup"><span data-stu-id="f0c39-318">In the next chapters, we will start building an experience for people to enjoy.</span></span> <span data-ttu-id="f0c39-319">Para obtener más instrucciones sobre diseño de la experiencia compartido, vaya aquí.</span><span class="sxs-lookup"><span data-stu-id="f0c39-319">To get further guidance on shared experience design, go here.</span></span>

## <a name="chapter-4---immersion-and-teleporting"></a><span data-ttu-id="f0c39-320">Capítulo 4: inmersión y teleporting</span><span class="sxs-lookup"><span data-stu-id="f0c39-320">Chapter 4 - Immersion and teleporting</span></span>

>[!VIDEO https://www.youtube.com/embed/kUHZ5tCOfvY]

### <a name="objectives"></a><span data-ttu-id="f0c39-321">Objetivos</span><span class="sxs-lookup"><span data-stu-id="f0c39-321">Objectives</span></span>

<span data-ttu-id="f0c39-322">Satisfaga las necesidades de la experiencia de cada tipo de dispositivo de realidad mixta.</span><span class="sxs-lookup"><span data-stu-id="f0c39-322">Cater the experience to each type of mixed reality device.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="f0c39-323">Vamos a crear</span><span class="sxs-lookup"><span data-stu-id="f0c39-323">What we will build</span></span>

<span data-ttu-id="f0c39-324">Actualizaremos la aplicación para poner los auriculares envolventes de usuarios en la isla de una vista envolventes.</span><span class="sxs-lookup"><span data-stu-id="f0c39-324">We will update the application to put immersive headset users on the island with an immersive view.</span></span> <span data-ttu-id="f0c39-325">HoloLens a los usuarios seguirán teniendo la visión general de la isla.</span><span class="sxs-lookup"><span data-stu-id="f0c39-325">HoloLens users will still have the bird's eye view of the island.</span></span> <span data-ttu-id="f0c39-326">Pueden ver a otros usuarios a los usuarios de cada tipo de dispositivo tal y como aparecen en el mundo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-326">Users of each device type can see other users as they appear in the world.</span></span> <span data-ttu-id="f0c39-327">Por ejemplo, los usuarios de auriculares envolventes pueden ver los demás avatares en otras rutas de acceso de la isla y verán los usuarios de HoloLens como enorme nubes por encima de la isla.</span><span class="sxs-lookup"><span data-stu-id="f0c39-327">For instance, immersive headset users can see the other avatars on other paths on the island, and they see the HoloLens users as giant clouds above the island.</span></span> <span data-ttu-id="f0c39-328">Los usuarios de auriculares envolventes también verán el cursor de ray mirada de HoloLens del usuario si el usuario HoloLens está mirando la isla.</span><span class="sxs-lookup"><span data-stu-id="f0c39-328">Immersive headset users will also see the cursor of the HoloLens user's gaze ray if the HoloLens user is looking at the island.</span></span> <span data-ttu-id="f0c39-329">Los usuarios de HoloLens verán un avatar en la isla para representar a cada usuario auriculares envolventes.</span><span class="sxs-lookup"><span data-stu-id="f0c39-329">HoloLens users will see an avatar on the island to represent each immersive headset user.</span></span>

<span data-ttu-id="f0c39-330">**Entrada actualizada para el dispositivo envolvente:**</span><span class="sxs-lookup"><span data-stu-id="f0c39-330">**Updated Input for the Immersive device:**</span></span>
* <span data-ttu-id="f0c39-331">Los botones izquierdos paragolpes y paragolpes directamente en el controlador de Xbox girar el Reproductor</span><span class="sxs-lookup"><span data-stu-id="f0c39-331">The left bumper and right bumper buttons on the Xbox controller rotate the player</span></span>
* <span data-ttu-id="f0c39-332">Que contiene el botón Y en el controlador de Xbox permitirá un [teleport](navigating-the-windows-mixed-reality-home.md#getting-around-your-home) cursor.</span><span class="sxs-lookup"><span data-stu-id="f0c39-332">Holding the Y button on the Xbox controller will enable a [teleport](navigating-the-windows-mixed-reality-home.md#getting-around-your-home) cursor.</span></span> <span data-ttu-id="f0c39-333">Si el cursor tiene un indicador de flecha de giro al soltar el botón Y, será teleported a la posición del cursor.</span><span class="sxs-lookup"><span data-stu-id="f0c39-333">If the cursor has a spinning arrow indicator when you release the Y button, you will be teleported to the cursor's location.</span></span>

### <a name="steps"></a><span data-ttu-id="f0c39-334">Pasos</span><span class="sxs-lookup"><span data-stu-id="f0c39-334">Steps</span></span>
* <span data-ttu-id="f0c39-335">Agregar MixedRealityTeleport a MixedRealityCameraParent</span><span class="sxs-lookup"><span data-stu-id="f0c39-335">Add MixedRealityTeleport to MixedRealityCameraParent</span></span>
    * <span data-ttu-id="f0c39-336">En **jerarquía**, seleccione **Usland**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-336">In **Hierarchy**, select **Usland**.</span></span>
    * <span data-ttu-id="f0c39-337">En **Inspector**, habilitar **Control de nivel de**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-337">In **Inspector**, enable **Level Control**.</span></span>
    * <span data-ttu-id="f0c39-338">En **jerarquía**, seleccione **MixedRealityCameraParent**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-338">In **Hierarchy**, select **MixedRealityCameraParent**.</span></span>
    * <span data-ttu-id="f0c39-339">En **Inspector**, haga clic en **Agregar componente**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-339">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="f0c39-340">Tipo **Teleport de realidad mixta** y selecciónelo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-340">Type **Mixed Reality Teleport** and select it.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="f0c39-341">Descripción detallada del código</span><span class="sxs-lookup"><span data-stu-id="f0c39-341">Digging into the code</span></span>

<span data-ttu-id="f0c39-342">Los usuarios de auriculares envolventes se se bloqueado en sus equipos con un cable, pero nuestro isla es mayor que el cable es largo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-342">Immersive headset users will be tethered to their PCs with a cable, but our island is larger than the cable is long.</span></span> <span data-ttu-id="f0c39-343">Para compensar, necesitamos la capacidad para mover la cámara con independencia del movimiento del usuario.</span><span class="sxs-lookup"><span data-stu-id="f0c39-343">To compensate, we need the ability to move the camera independently of the user's motion.</span></span> <span data-ttu-id="f0c39-344">Consulte la [página de progreso](comfort.md) para obtener más información sobre el diseño de la aplicación de realidad mixta (movimiento propio en particular y desplazamiento).</span><span class="sxs-lookup"><span data-stu-id="f0c39-344">Please see the [comfort page](comfort.md) for more information about designing your mixed reality application (in particular self motion and locomotion).</span></span>

<span data-ttu-id="f0c39-345">Con el fin de describir este proceso será útil definir dos términos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-345">In order to describe this process it will be useful to define two terms.</span></span> <span data-ttu-id="f0c39-346">Primero, **plataforma de mantenimiento** será el objeto que se mueve la cámara de forma independiente del usuario.</span><span class="sxs-lookup"><span data-stu-id="f0c39-346">First, **dolly** will be the object that moves the camera independently from the user.</span></span> <span data-ttu-id="f0c39-347">Un objeto de juego secundarios de la **plataforma de mantenimiento** será el **cámara principal**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-347">A child game object of the **dolly** will be the **main camera**.</span></span> <span data-ttu-id="f0c39-348">La cámara principal está conectada a la cabeza del usuario.</span><span class="sxs-lookup"><span data-stu-id="f0c39-348">The main camera is attached to the user's head.</span></span>

<span data-ttu-id="f0c39-349">En el panel proyecto, vaya a **Assets\AppPrefabs\Support\Scripts\GameLogic** y haga doble clic en **MixedRealityTeleport.cs**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-349">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **MixedRealityTeleport.cs**.</span></span>

<span data-ttu-id="f0c39-350">MixedRealityTeleport tiene dos trabajos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-350">MixedRealityTeleport has two jobs.</span></span> <span data-ttu-id="f0c39-351">En primer lugar, controla la rotación mediante la paragolpes.</span><span class="sxs-lookup"><span data-stu-id="f0c39-351">First, it handles rotation using the bumpers.</span></span> <span data-ttu-id="f0c39-352">En la función update se sondean de 'ButtonUp' en LeftBumper y RightBumper.</span><span class="sxs-lookup"><span data-stu-id="f0c39-352">In the update function we poll for 'ButtonUp' on LeftBumper and RightBumper.</span></span> <span data-ttu-id="f0c39-353">GetButtonUp solo devuelve true en el primer fotograma de que un botón no está presionado después de haber estado inactivo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-353">GetButtonUp only returns true on the first frame a button is up after having been down.</span></span> <span data-ttu-id="f0c39-354">Si se hubiese producido cualquiera de los botones, sabremos entonces que el usuario debe girar.</span><span class="sxs-lookup"><span data-stu-id="f0c39-354">If either button had been raised, then we know the user needs to rotate.</span></span>

<span data-ttu-id="f0c39-355">Cuando se gira no atenuación y se atenúan mediante un sencillo script denominado "atenuación control".</span><span class="sxs-lookup"><span data-stu-id="f0c39-355">When we rotate we do a fade out and fade in using a simple script called 'fade control'.</span></span> <span data-ttu-id="f0c39-356">Hacemos esto para evitar que el usuario vea un movimiento no natural que podría provocar malestar.</span><span class="sxs-lookup"><span data-stu-id="f0c39-356">We do this to prevent the user from seeing an unnatural movement which could lead to discomfort.</span></span> <span data-ttu-id="f0c39-357">El fundido de entrada y salida efecto es bastante sencillo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-357">The fade in and out effect is fairly simple.</span></span> <span data-ttu-id="f0c39-358">Tenemos un cuadrado negro francesa delante de la **cámara principal**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-358">We have a black quad hanging in front of the **main camera**.</span></span> <span data-ttu-id="f0c39-359">Cuando atenúa, podemos cambiar el valor alfa de 0 a 1.</span><span class="sxs-lookup"><span data-stu-id="f0c39-359">When fading out we transition the alpha value from 0 to 1.</span></span> <span data-ttu-id="f0c39-360">Esto hace que gradualmente los píxeles negros de lo cuatro se representará y ocultar nada detrás de ellos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-360">This gradually causes the black pixels of the quad to render and obscure anything behind them.</span></span> <span data-ttu-id="f0c39-361">Cuando difuminación en transición el valor alfa en cero.</span><span class="sxs-lookup"><span data-stu-id="f0c39-361">When fading back in we transition the alpha value back to zero.</span></span>

<span data-ttu-id="f0c39-362">Cuando se calcula la rotación, tenga en cuenta que nos estamos girar nuestro **plataforma de mantenimiento** pero calcular la rotación alrededor de la **cámara principal**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-362">When we calculate the rotation, note that we are rotating our **dolly** but calculating the rotation around the **main camera**.</span></span> <span data-ttu-id="f0c39-363">Esto es importante que cuanto más lejos el **cámara principal** es lejos 0,0,0, menos preciso se convertiría en un giro alrededor de la plataforma de mantenimiento desde el punto de vista del usuario.</span><span class="sxs-lookup"><span data-stu-id="f0c39-363">This is important as the farther the **main camera** is away from 0,0,0, the less accurate a rotation around the dolly would become from the point of view of the user.</span></span> <span data-ttu-id="f0c39-364">De hecho, si no gira en torno a la posición de la cámara, el usuario se moverá en un arco en torno a la **plataforma de mantenimiento** en lugar de la rotación.</span><span class="sxs-lookup"><span data-stu-id="f0c39-364">In fact, if you do not rotate around the camera position, the user will move on an arc around the **dolly** rather than rotating.</span></span>

<span data-ttu-id="f0c39-365">El segundo trabajo de MixedRealityTeleport consiste en tratar de mover el **plataforma de mantenimiento**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-365">The second job for MixedRealityTeleport is to handle moving the **dolly**.</span></span> <span data-ttu-id="f0c39-366">Esto se hace en SetWorldPosition.</span><span class="sxs-lookup"><span data-stu-id="f0c39-366">This is done in SetWorldPosition.</span></span> <span data-ttu-id="f0c39-367">SetWorldPosition toma la posición deseada del mundo, la posición donde el usuario desea percieve que ocupan.</span><span class="sxs-lookup"><span data-stu-id="f0c39-367">SetWorldPosition takes the desired world position, the position where the user wants to percieve that they inhabit.</span></span> <span data-ttu-id="f0c39-368">Debemos poner nuestros **plataforma de mantenimiento** en esa posición menos la posición local de la **cámara principal**, ya que el desplazamiento se agregarán cada fotograma.</span><span class="sxs-lookup"><span data-stu-id="f0c39-368">We need to put our **dolly** at that position minus the local position of the **main camera**, as that offset will be added each frame.</span></span>

<span data-ttu-id="f0c39-369">Un segundo script llama a SetWorldPosition.</span><span class="sxs-lookup"><span data-stu-id="f0c39-369">A second script calls SetWorldPosition.</span></span> <span data-ttu-id="f0c39-370">Echemos un vistazo a ese script.</span><span class="sxs-lookup"><span data-stu-id="f0c39-370">Let's look at that script.</span></span> <span data-ttu-id="f0c39-371">En el panel proyecto, vaya a **Assets\AppPrefabs\Support\Scripts\GameLogic** y haga doble clic en **TeleportScript.cs**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-371">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **TeleportScript.cs**.</span></span>

<span data-ttu-id="f0c39-372">Este script es un poco más complicado que MixedRealityTeleport.</span><span class="sxs-lookup"><span data-stu-id="f0c39-372">This script is a little more involved than MixedRealityTeleport.</span></span> <span data-ttu-id="f0c39-373">Está comprobando la secuencia de comandos para que se mantiene presionado el botón Y en el controlador de Xbox.</span><span class="sxs-lookup"><span data-stu-id="f0c39-373">The script is checking for the Y Button on the Xbox controller to be held down.</span></span> <span data-ttu-id="f0c39-374">Mientras se mantiene el botón hacia abajo un teleport se representa el cursor y la secuencia de comandos convierte un rayo desde la posición del usuario mirada.</span><span class="sxs-lookup"><span data-stu-id="f0c39-374">While the button is held down a teleport cursor is rendered and the script casts a ray from the user's gaze position.</span></span> <span data-ttu-id="f0c39-375">Si ese ray está en conflicto con una superficie que es más o menos que apunta hacia arriba, se considera una buena superficie a teleport a la superficie de y se habilitará la animación en el cursor teleport.</span><span class="sxs-lookup"><span data-stu-id="f0c39-375">If that ray collides with a surface that is more or less pointing up, the surface will be considered a good surface to teleport to, and the animation on the teleport cursor will be enabled.</span></span> <span data-ttu-id="f0c39-376">Si el rayo no entren en conflicto con una superficie señalador más o menos, a continuación, se deshabilitará la animación en el cursor.</span><span class="sxs-lookup"><span data-stu-id="f0c39-376">If the ray does not collide with a surface more or less pointing up, then the animation on the cursor will be disabled.</span></span> <span data-ttu-id="f0c39-377">Cuando se suelta el botón Y y el punto del rayo calculado es una posición válida, el script llama a SetWorldPosition con la posición que se intersecan con el rayo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-377">When the Y button is released and the calculated point of the ray is a valid position, the script calls SetWorldPosition with the position the ray intersected.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="f0c39-378">Disfrute de su progreso</span><span class="sxs-lookup"><span data-stu-id="f0c39-378">Enjoy your progress</span></span>

<span data-ttu-id="f0c39-379">Esta vez deberá buscar a un amigo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-379">This time you'll need to find a friend.</span></span>

<span data-ttu-id="f0c39-380">Una vez más, un usuario con el HoloLens va a hospedar una sesión.</span><span class="sxs-lookup"><span data-stu-id="f0c39-380">Once again, a user with the HoloLens will host a session.</span></span> <span data-ttu-id="f0c39-381">Otros usuarios unirán a la sesión.</span><span class="sxs-lookup"><span data-stu-id="f0c39-381">Other users will join the session.</span></span> <span data-ttu-id="f0c39-382">La aplicación colocará los tres primeros usuarios de un auricular envolvente en una de las tres rutas de acceso de la isla al que unirse.</span><span class="sxs-lookup"><span data-stu-id="f0c39-382">The application will place the first three users to join from an immersive headset on one of the three paths on the island.</span></span> <span data-ttu-id="f0c39-383">No dude en explorar la isla de esta sección.</span><span class="sxs-lookup"><span data-stu-id="f0c39-383">Feel free to explore the island in this section.</span></span>

<span data-ttu-id="f0c39-384">Detalles a tener en cuenta:</span><span class="sxs-lookup"><span data-stu-id="f0c39-384">Details to notice:</span></span>
1. <span data-ttu-id="f0c39-385">Puede ver las caras en las nubes, lo que ayuda a un usuario sumergido ver en qué dirección mira un usuario de HoloLens.</span><span class="sxs-lookup"><span data-stu-id="f0c39-385">You can see faces in the clouds, which helps an immersed user see which direction a HoloLens user is looking.</span></span>
2. <span data-ttu-id="f0c39-386">Los avatares en la isla tienen que gira el cuello.</span><span class="sxs-lookup"><span data-stu-id="f0c39-386">The avatars on the island have necks that rotate.</span></span> <span data-ttu-id="f0c39-387">No siguen lo que el usuario está haciendo es realidad real (no tenemos esa información), pero resulta una buena experiencia.</span><span class="sxs-lookup"><span data-stu-id="f0c39-387">They won't follow what the user is doing is real reality (we don't have that information) but it makes for a nice experience.</span></span>
3. <span data-ttu-id="f0c39-388">Si el usuario HoloLens está buscando en la isla, los usuarios sumergidos pueden ver su cursor.</span><span class="sxs-lookup"><span data-stu-id="f0c39-388">If the HoloLens user is looking at the Island, the immersed users can see their cursor.</span></span>
4. <span data-ttu-id="f0c39-389">Las nubes que representan a los usuarios de HoloLens proyectar sombras.</span><span class="sxs-lookup"><span data-stu-id="f0c39-389">The clouds that represent the HoloLens users cast shadows.</span></span>

## <a name="chapter-5---finale"></a><span data-ttu-id="f0c39-390">Capítulo 5: filtrar</span><span class="sxs-lookup"><span data-stu-id="f0c39-390">Chapter 5 - Finale</span></span>

>[!VIDEO https://www.youtube.com/embed/n_HDWJbfpNg]

### <a name="objectives"></a><span data-ttu-id="f0c39-391">Objetivos</span><span class="sxs-lookup"><span data-stu-id="f0c39-391">Objectives</span></span>

<span data-ttu-id="f0c39-392">Crear una experiencia interactiva de colaboración entre los tipos de dos dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-392">Create a collaborative interactive experience between the two device types.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="f0c39-393">Vamos a crear</span><span class="sxs-lookup"><span data-stu-id="f0c39-393">What we will build</span></span>

<span data-ttu-id="f0c39-394">Los usuarios de HoloLens compilando en el capítulo 4, cuando un usuario con un auricular envolvente obtiene cerca de un rompecabezas de la isla, obtendrá una información sobre herramientas con una pista para el rompecabezas.</span><span class="sxs-lookup"><span data-stu-id="f0c39-394">Building on chapter 4, when a user with an immersive headset gets near a puzzle on the island, the HoloLens users will get a tool tip with a clue to the puzzle.</span></span> <span data-ttu-id="f0c39-395">Una vez más allá de sus rompecabezas y en el "panel de listo" todos los usuarios de auriculares envolventes obtención en la sala de rocket, se iniciará el cohete.</span><span class="sxs-lookup"><span data-stu-id="f0c39-395">Once all of the immersive headset users get past their puzzles and onto the "ready pad" in the rocket room, the rocket will launch.</span></span>

### <a name="steps"></a><span data-ttu-id="f0c39-396">Pasos</span><span class="sxs-lookup"><span data-stu-id="f0c39-396">Steps</span></span>
* <span data-ttu-id="f0c39-397">En **jerarquía**, seleccione **Usland**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-397">In **Hierarchy**, select **Usland**.</span></span>
* <span data-ttu-id="f0c39-398">En **Inspector**, en **Control nivel**, comprobar **habilitar colaboración**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-398">In **Inspector**, in **Level Control**, check **Enable Collaboration**.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="f0c39-399">Descripción detallada del código</span><span class="sxs-lookup"><span data-stu-id="f0c39-399">Digging into the code</span></span>

<span data-ttu-id="f0c39-400">Ahora examinemos LevelControl.cs.</span><span class="sxs-lookup"><span data-stu-id="f0c39-400">Now let us look at LevelControl.cs.</span></span> <span data-ttu-id="f0c39-401">Este script es el núcleo de la lógica del juego y mantiene el estado del juego.</span><span class="sxs-lookup"><span data-stu-id="f0c39-401">This script is the core of the game logic and maintains the game state.</span></span> <span data-ttu-id="f0c39-402">Puesto que se trata de un juego multijugador con UNET es necesario comprender cómo fluyen los datos, por lo menos tan bien para modificar este tutorial.</span><span class="sxs-lookup"><span data-stu-id="f0c39-402">Since this is a multiplayer game using UNET we need to understand how data flows, at least well enough to modify this tutorial.</span></span> <span data-ttu-id="f0c39-403">Para obtener una introducción más completa de UNET, consulte la documentación de Unity.</span><span class="sxs-lookup"><span data-stu-id="f0c39-403">For a more complete overview of UNET, please refer to Unity's documentation.</span></span>

<span data-ttu-id="f0c39-404">En el panel proyecto, vaya a **Assets\AppPrefabs\Support\Scripts\GameLogic** y haga doble clic en **LevelControl.cs**.</span><span class="sxs-lookup"><span data-stu-id="f0c39-404">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **LevelControl.cs**.</span></span>

<span data-ttu-id="f0c39-405">Vamos a explicar cómo un auricular envolvente indica que están listos para el lanzamiento de cohete.</span><span class="sxs-lookup"><span data-stu-id="f0c39-405">Let us understand how an immersive headset indicates that they are ready for the rocket launch.</span></span> <span data-ttu-id="f0c39-406">Preparación de lanzamiento de cohete se comunica estableciendo uno de tres bools en una lista de bools que corresponden a las tres rutas de acceso de la isla.</span><span class="sxs-lookup"><span data-stu-id="f0c39-406">Rocket Launch readiness is communicated by setting one of three bools in a list of bools that correspond to the three paths on the island.</span></span> <span data-ttu-id="f0c39-407">Bool de una ruta de acceso se establecerá cuando el usuario asignado a la ruta de acceso está en la parte superior del panel marrón dentro de la sala de rocket.</span><span class="sxs-lookup"><span data-stu-id="f0c39-407">A path's bool will be set when the user assigned to the path is on top of the brown pad inside the rocket room.</span></span> <span data-ttu-id="f0c39-408">Bien, ahora los detalles.</span><span class="sxs-lookup"><span data-stu-id="f0c39-408">Okay, now to the details.</span></span>

<span data-ttu-id="f0c39-409">Comenzamos en la función Update().</span><span class="sxs-lookup"><span data-stu-id="f0c39-409">We will start in the Update() function.</span></span> <span data-ttu-id="f0c39-410">Puede observar que hay una función 'de referencia rápida'.</span><span class="sxs-lookup"><span data-stu-id="f0c39-410">You will note that there is a 'cheat' function.</span></span> <span data-ttu-id="f0c39-411">Se usa en el desarrollo para probar el inicio de cohete y restablecer la secuencia.</span><span class="sxs-lookup"><span data-stu-id="f0c39-411">We used this in development to test the rocket launch and reset sequence.</span></span> <span data-ttu-id="f0c39-412">Esto no funcionará en la experiencia de usuario múltiple.</span><span class="sxs-lookup"><span data-stu-id="f0c39-412">It won't work in the multi user experience.</span></span> <span data-ttu-id="f0c39-413">Espero que en el momento que internalizar la siguiente información puede hacerlo funcionar.</span><span class="sxs-lookup"><span data-stu-id="f0c39-413">Hopefully by the time you internalize the following infromation you can make it work.</span></span> <span data-ttu-id="f0c39-414">Después, comprobamos si hacemos deberíamos trampa, comprobamos si el Reproductor local se sumerja.</span><span class="sxs-lookup"><span data-stu-id="f0c39-414">After we check to see if we should cheat, we check to see if the local player is immersed.</span></span> <span data-ttu-id="f0c39-415">Queremos centrarse en cómo encontramos que estamos en el objetivo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-415">We want to focus on how we find that we're at the goal.</span></span> <span data-ttu-id="f0c39-416">Dentro de if (sumerja) Compruebe que hay una llamada a CheckGoal oculta detrás de la **EnableCollaboration** bool.</span><span class="sxs-lookup"><span data-stu-id="f0c39-416">Inside of the if (Immersed) check, there is a call to CheckGoal hiding behind the **EnableCollaboration** bool.</span></span> <span data-ttu-id="f0c39-417">Esto corresponde a la casilla de verificación que se ha activado al completar los pasos de este capítulo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-417">This corresponds to the checkbox you checked while completing the steps for this chapter.</span></span> <span data-ttu-id="f0c39-418">Dentro de EnableCollaboration vemos una llamada a CheckGoal().</span><span class="sxs-lookup"><span data-stu-id="f0c39-418">Inside of EnableCollaboration we see a call to CheckGoal().</span></span>

<span data-ttu-id="f0c39-419">CheckGoal realiza un cálculo matemático para ver si se están más o menos permanente en el panel.</span><span class="sxs-lookup"><span data-stu-id="f0c39-419">CheckGoal does some math to see if we are more or less standing on the pad.</span></span> <span data-ttu-id="f0c39-420">Cuando estamos, nos Debug.Log "Entregada en objetivo" y, a continuación, llamar a 'SendAtGoalMessage()'.</span><span class="sxs-lookup"><span data-stu-id="f0c39-420">When we are, we Debug.Log "Arrived at goal" and then we call 'SendAtGoalMessage()'.</span></span> <span data-ttu-id="f0c39-421">En SendAtGoalMessage llamamos playerController.SendAtGoal.</span><span class="sxs-lookup"><span data-stu-id="f0c39-421">In SendAtGoalMessage we call playerController.SendAtGoal.</span></span> <span data-ttu-id="f0c39-422">Para ahorrar tiempo, este es el código:</span><span class="sxs-lookup"><span data-stu-id="f0c39-422">To save you some time, here's the code:</span></span>

```cs
private void CmdSendAtGoal(int GoalIndex)
       {
           levelState.SetGoalIndex(GoalIndex);
       }
```

```cs
public void SendAtGoal(int GoalIndex)
       {
           if (isLocalPlayer)
           {
               Debug.Log("sending at goal " + GoalIndex);
               CmdSendAtGoal(GoalIndex);
           }
       }
```

<span data-ttu-id="f0c39-423">Tenga en cuenta que SendAtGoalMessage llama CmdSendAtGoal, qué levelState.SetGoalIndex llamadas, que es nuevo en LevelControl.cs.</span><span class="sxs-lookup"><span data-stu-id="f0c39-423">Note that SendAtGoalMessage calls CmdSendAtGoal, which calls levelState.SetGoalIndex, which is back in LevelControl.cs.</span></span> <span data-ttu-id="f0c39-424">A primera vista parece extraño.</span><span class="sxs-lookup"><span data-stu-id="f0c39-424">At first glance this seems strange.</span></span> <span data-ttu-id="f0c39-425">¿Por qué no simplemente llamar SetGoalIndex en lugar de esto extraño de enrutamiento mediante el controlador player?</span><span class="sxs-lookup"><span data-stu-id="f0c39-425">Why not just call SetGoalIndex rather than this strange routing through the player controller?</span></span> <span data-ttu-id="f0c39-426">El motivo es que nos estamos conforme al modelo de datos que UNET se usa para mantener sincronizados los datos. Para evitar la trampa y paginación excesiva, UNET requiere que cada objeto tiene un usuario que tenga autoridad para cambiar las variables sincronizadas.</span><span class="sxs-lookup"><span data-stu-id="f0c39-426">The reason is that we are conforming to the data model UNET uses to keep data in sync. To prevent cheating and thrashing, UNET requires that each object has a user who has authority to change the synchronized variables.</span></span> <span data-ttu-id="f0c39-427">Además, el host (es decir, el usuario que inició la sesión) puede cambiar los datos directamente.</span><span class="sxs-lookup"><span data-stu-id="f0c39-427">Further, only the host (the user that started the session) can change data directly.</span></span> <span data-ttu-id="f0c39-428">Los usuarios que no son el host, pero tienen autoridad, necesitan enviar 'command' en el host que cambiará la variable.</span><span class="sxs-lookup"><span data-stu-id="f0c39-428">Users who are not the host, but have authority, need to send a 'command' to the host which will change the variable.</span></span> <span data-ttu-id="f0c39-429">De forma predeterminada el host tiene autoridad sobre todos los objetos, excepto para el objeto generado para representar al usuario.</span><span class="sxs-lookup"><span data-stu-id="f0c39-429">By default the host has authority over all objects, except for the object spawned to represent the user.</span></span> <span data-ttu-id="f0c39-430">En nuestro caso, este objeto tiene el script playercontroller.</span><span class="sxs-lookup"><span data-stu-id="f0c39-430">In our case this object has the playercontroller script.</span></span> <span data-ttu-id="f0c39-431">Hay una manera de solicitar la autoridad de un objeto y, a continuación, realizar cambios, pero se decide aprovechar el hecho de que el controlador player tiene comandos propios de autoridad y ruta mediante el controlador player.</span><span class="sxs-lookup"><span data-stu-id="f0c39-431">There is a way to request authority for an object and then make changes, but we choose to leverage the fact that the player controller has self authority and route commands through the player controller.</span></span>

<span data-ttu-id="f0c39-432">Dicho de otro modo, cuando nosotros mismos nos hemos encontrado en nuestro objetivo, el jugador necesita indicar al host y el host le dirá a todo el mundo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-432">Said another way, when we've found ourselves at our goal, the player needs to tell the host, and the host will tell everyone else.</span></span>

<span data-ttu-id="f0c39-433">En LevelControl.cs mirada SetGoalIndex.</span><span class="sxs-lookup"><span data-stu-id="f0c39-433">Back in LevelControl.cs look at SetGoalIndex.</span></span> <span data-ttu-id="f0c39-434">Aquí nos estamos establecer el valor de un valor en un synclist (AtGoal).</span><span class="sxs-lookup"><span data-stu-id="f0c39-434">Here we are setting the value of a value in a synclist (AtGoal).</span></span> <span data-ttu-id="f0c39-435">Recuerde que estamos en el contexto del host mientras lo hacemos.</span><span class="sxs-lookup"><span data-stu-id="f0c39-435">Remember that we are in the context of the host while we do this.</span></span> <span data-ttu-id="f0c39-436">Una llamada RPC es similar a un comando, es algo puede emitir el host que hará que todos los clientes ejecutar el código.</span><span class="sxs-lookup"><span data-stu-id="f0c39-436">Similar to a command, an RPC is something the host can issue that will cause all clients to run some code.</span></span> <span data-ttu-id="f0c39-437">Aquí utilizamos 'RpcCheckAllGoals'.</span><span class="sxs-lookup"><span data-stu-id="f0c39-437">Here we call 'RpcCheckAllGoals'.</span></span> <span data-ttu-id="f0c39-438">Cada cliente individualmente comprobamos si se establecen todas tres AtGoals y si es así, inicie el cohete.</span><span class="sxs-lookup"><span data-stu-id="f0c39-438">Each client will individually check to see if all three AtGoals are set, and if so, launch the rocket.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="f0c39-439">Disfrute de su progreso</span><span class="sxs-lookup"><span data-stu-id="f0c39-439">Enjoy your progress</span></span>

<span data-ttu-id="f0c39-440">Compilar en el capítulo anterior, se iniciará la sesión como antes.</span><span class="sxs-lookup"><span data-stu-id="f0c39-440">Building on the previous chapter, we will start the session as before.</span></span> <span data-ttu-id="f0c39-441">Esta vez que los usuarios en get auriculares envolventes a la "puerta principal" en su ruta de acceso, una información sobre herramientas aparecerá que pueden ver solo los usuarios de HoloLens.</span><span class="sxs-lookup"><span data-stu-id="f0c39-441">This time as the users in the immersive headset get to the "door" on their path, a tooltip will appear that only the HoloLens users can see.</span></span> <span data-ttu-id="f0c39-442">Los usuarios de HoloLens son responsables de comunicar esta pista a los usuarios en los auriculares envolventes.</span><span class="sxs-lookup"><span data-stu-id="f0c39-442">The HoloLens users are responsible for communicating this clue to the users in the immersive headset.</span></span> <span data-ttu-id="f0c39-443">Una vez cada avatar ha entrado en su panel marrón correspondiente dentro de los volcanes, se iniciará el cohete al espacio.</span><span class="sxs-lookup"><span data-stu-id="f0c39-443">The rocket will launch to space once each avatar has stepped on its corresponding brown pad inside the volcano.</span></span> <span data-ttu-id="f0c39-444">La escena se restablecerá después de 60 segundos, por lo que puede realizar de nuevo.</span><span class="sxs-lookup"><span data-stu-id="f0c39-444">The scene will reset after 60 seconds so you can do it again.</span></span>

## <a name="see-also"></a><span data-ttu-id="f0c39-445">Vea también</span><span class="sxs-lookup"><span data-stu-id="f0c39-445">See also</span></span>
* [<span data-ttu-id="f0c39-446">Entrada MR 213: Controladores de movimiento</span><span class="sxs-lookup"><span data-stu-id="f0c39-446">MR Input 213: Motion controllers</span></span>](mixed-reality-213.md)
