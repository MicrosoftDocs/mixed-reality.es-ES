---
title: Asignación espacial
description: Asignación espacial proporciona una representación detallada de las superficies reales en el entorno en torno a la HoloLens.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: asignación espacial, HoloLens, realidad mixta, reconstrucción expuesta, malla, sr
ms.openlocfilehash: 31abeca624512f1d5e721dbe879ca2243cf41345
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/12/2019
ms.locfileid: "59605772"
---
# <a name="spatial-mapping"></a><span data-ttu-id="802a3-104">Asignación espacial</span><span class="sxs-lookup"><span data-stu-id="802a3-104">Spatial mapping</span></span>

<span data-ttu-id="802a3-105">Asignación espacial proporciona una representación detallada de las superficies reales en el entorno en torno a la HoloLens, lo que permite a los desarrolladores crear una experiencia convincente de realidad mixta.</span><span class="sxs-lookup"><span data-stu-id="802a3-105">Spatial mapping provides a detailed representation of real-world surfaces in the environment around the HoloLens, allowing developers to create a convincing mixed reality experience.</span></span> <span data-ttu-id="802a3-106">Mediante la combinación del mundo real con el mundo virtual, una aplicación puede hacer hologramas parezca real.</span><span class="sxs-lookup"><span data-stu-id="802a3-106">By merging the real world with the virtual world, an application can make holograms seem real.</span></span> <span data-ttu-id="802a3-107">Las aplicaciones también pueden alinear forma más natural con las expectativas del usuario al proporcionar interacciones y familiares comportamientos reales.</span><span class="sxs-lookup"><span data-stu-id="802a3-107">Applications can also more naturally align with user expectations by providing familiar real-world behaviors and interactions.</span></span>

<br>

>[!VIDEO https://www.youtube.com/embed/zff2aQ1RaVo]

## <a name="device-support"></a><span data-ttu-id="802a3-108">Compatibilidad con dispositivos</span><span class="sxs-lookup"><span data-stu-id="802a3-108">Device support</span></span>

<table>
<tr>
<th><span data-ttu-id="802a3-109">Característica</span><span class="sxs-lookup"><span data-stu-id="802a3-109">Feature</span></span></th><th style="width:150px"> <span data-ttu-id="802a3-110"><a href="hololens-hardware-details.md">HoloLens (gen 1)</a></span><span class="sxs-lookup"><span data-stu-id="802a3-110"><a href="hololens-hardware-details.md">HoloLens (1st gen)</a></span></span></th><th style="width:150px"><span data-ttu-id="802a3-111">HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="802a3-111">HoloLens 2</span></span></th><th style="width:150px"> <span data-ttu-id="802a3-112"><a href="immersive-headset-hardware-details.md">Inmersivos</a></span><span class="sxs-lookup"><span data-stu-id="802a3-112"><a href="immersive-headset-hardware-details.md">Immersive headsets</a></span></span></th>
</tr><tr>
<td> <span data-ttu-id="802a3-113">Asignación espacial</span><span class="sxs-lookup"><span data-stu-id="802a3-113">Spatial mapping</span></span></td><td style="text-align: center;"> <span data-ttu-id="802a3-114">✔️</span><span class="sxs-lookup"><span data-stu-id="802a3-114">✔️</span></span></td><td style="text-align: center;"> <span data-ttu-id="802a3-115">✔️</span><span class="sxs-lookup"><span data-stu-id="802a3-115">✔️</span></span></td><td style="text-align: center;"></td>
</tr>
</table>



## <a name="conceptual-overview"></a><span data-ttu-id="802a3-116">Información general conceptual</span><span class="sxs-lookup"><span data-stu-id="802a3-116">Conceptual overview</span></span>

<span data-ttu-id="802a3-117">![Superficies de malla que abarcan una sala](images/SurfaceReconstruction.jpg)</span><span class="sxs-lookup"><span data-stu-id="802a3-117">![Mesh surfaces covering a room](images/SurfaceReconstruction.jpg)</span></span><br>
<span data-ttu-id="802a3-118">*Un ejemplo de una malla de asignación espacial que abarcan una sala*</span><span class="sxs-lookup"><span data-stu-id="802a3-118">*An example of a spatial mapping mesh covering a room*</span></span>

<span data-ttu-id="802a3-119">Los dos tipos de objeto principal que utiliza para la asignación espacial son 'Espacial observador superficie' y la superficie espacial.</span><span class="sxs-lookup"><span data-stu-id="802a3-119">The two primary object types used for spatial mapping are the 'Spatial Surface Observer' and the 'Spatial Surface'.</span></span>

<span data-ttu-id="802a3-120">La aplicación proporciona el observador de superficie espacial con uno o más volúmenes de delimitadores para definir las regiones de espacio en el que la aplicación desea recibir datos de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="802a3-120">The application provides the Spatial Surface Observer with one or more bounding volumes, to define the regions of space in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="802a3-121">Para cada uno de estos volúmenes, asignación espacial proporcionará la aplicación con un conjunto de superficies espacial.</span><span class="sxs-lookup"><span data-stu-id="802a3-121">For each of these volumes, spatial mapping will provide the application with a set of Spatial Surfaces.</span></span>

<span data-ttu-id="802a3-122">Estos volúmenes pueden estacionarios (en una ubicación fija con respecto a la vida real) o se pueden vincular a la HoloLens (mueve, pero no giran, con el HoloLens mientras se desplaza a través del entorno).</span><span class="sxs-lookup"><span data-stu-id="802a3-122">These volumes may be stationary (in a fixed location with respect to the real world) or they may be attached to the HoloLens (they move, but do not rotate, with the HoloLens as it moves through the environment).</span></span> <span data-ttu-id="802a3-123">Cada superficie espacial describe superficies del mundo real en un pequeño volumen de espacio, representado como una malla de triángulo que se adjunta a un mundo bloqueado [del sistema de coordenadas espacial](coordinate-systems.md).</span><span class="sxs-lookup"><span data-stu-id="802a3-123">Each spatial surface describes real-world surfaces in a small volume of space, represented as a triangle mesh attached to a world-locked [spatial coordinate system](coordinate-systems.md).</span></span>

<span data-ttu-id="802a3-124">Como el HoloLens recopila nuevos datos sobre el entorno y, cuando se producen cambios en el entorno, aparecerán las superficies espaciales, desaparecen y cambiar.</span><span class="sxs-lookup"><span data-stu-id="802a3-124">As the HoloLens gathers new data about the environment, and as changes to the environment occur, spatial surfaces will appear, disappear and change.</span></span>

## <a name="common-usage-scenarios"></a><span data-ttu-id="802a3-125">Escenarios de uso comunes</span><span class="sxs-lookup"><span data-stu-id="802a3-125">Common usage scenarios</span></span>

![Ilustraciones de los escenarios de uso comunes de asignación espacial: Selección de ubicación, oclusión, física y navegación](images/sm-concepts-1000px.png)

### <a name="placement"></a><span data-ttu-id="802a3-127">Colocación</span><span class="sxs-lookup"><span data-stu-id="802a3-127">Placement</span></span>

<span data-ttu-id="802a3-128">Asignación espacial proporciona aplicaciones con la oportunidad de presentar formularios naturales y familiares de interacción para el usuario. ¿Qué podría ser más natural que al colocar el teléfono hacia abajo en el departamento de soporte técnico?</span><span class="sxs-lookup"><span data-stu-id="802a3-128">Spatial mapping provides applications with the opportunity to present natural and familiar forms of interaction to the user; what could be more natural than placing your phone down on the desk?</span></span>

<span data-ttu-id="802a3-129">Restringir la colocación de hologramas (o más en general, cualquier selección de ubicaciones espaciales) tiene su origen en superficies proporciona una asignación natural de 3D (punto en el espacio) en 2D (punto de superficie).</span><span class="sxs-lookup"><span data-stu-id="802a3-129">Constraining the placement of holograms (or more generally, any selection of spatial locations) to lie on surfaces provides a natural mapping from 3D (point in space) to 2D (point on surface).</span></span> <span data-ttu-id="802a3-130">Esto reduce la cantidad de información que el usuario debe proporcionar a la aplicación y por lo tanto, las interacciones del usuario con mayor rapidez, más fácil y más preciso.</span><span class="sxs-lookup"><span data-stu-id="802a3-130">This reduces the amount of information the user needs to provide to the application and thus makes the user's interactions faster, easier and more precise.</span></span> <span data-ttu-id="802a3-131">Esto es especialmente cierto porque 'distancia' no es algo que nos estamos acostumbrados a comunicar físicamente a otras personas o equipos.</span><span class="sxs-lookup"><span data-stu-id="802a3-131">This is particularly true because 'distance away' is not something that we are used to physically communicating to other people or to computers.</span></span> <span data-ttu-id="802a3-132">Cuando se señala con nuestro dedo, vamos a especificar una dirección, pero no una distancia.</span><span class="sxs-lookup"><span data-stu-id="802a3-132">When we point with our finger, we are specifying a direction but not a distance.</span></span>

<span data-ttu-id="802a3-133">Una advertencia importante aquí es que cuando una aplicación infiere la distancia desde la dirección (por ejemplo mediante la realización de una raycast a lo largo mirada dirección del usuario buscar más cercano superficie espacial), esto debe producir resultados que el usuario puede prever con exactitud.</span><span class="sxs-lookup"><span data-stu-id="802a3-133">An important caveat here is that when an application infers distance from direction (for example by performing a raycast along the user's gaze direction to find the nearest spatial surface), this must yield results that the user is able to reliably predict.</span></span> <span data-ttu-id="802a3-134">En caso contrario, el usuario perderá su sentido de control y esto puede volverse rápidamente frustrante.</span><span class="sxs-lookup"><span data-stu-id="802a3-134">Otherwise, the user will lose their sense of control and this can quickly become frustrating.</span></span> <span data-ttu-id="802a3-135">Un método que ayuda en esto es realizar varias raycasts en lugar de uno.</span><span class="sxs-lookup"><span data-stu-id="802a3-135">One method that helps with this is to perform multiple raycasts instead of just one.</span></span> <span data-ttu-id="802a3-136">Los resultados agregados deben ser más suave y más predecible, menos susceptibles a influir de resultados 'valor 'transitorios atípico (como puede deberse a pasar a través de agujeros diminutos o cuándo llegarán pequeños fragmentos de geometría que el usuario no es consciente de los rayos).</span><span class="sxs-lookup"><span data-stu-id="802a3-136">The aggregate results should be smoother and more predictable, less susceptible to influence from transient 'outlier' results (as can be caused by rays passing through tiny holes or hitting small bits of geometry that the user is not aware of).</span></span> <span data-ttu-id="802a3-137">También se puede realizar la agregación o suavizado con el tiempo; Por ejemplo puede limitar la velocidad máxima a la que un holograma puede variar en la distancia desde el usuario.</span><span class="sxs-lookup"><span data-stu-id="802a3-137">Aggregation or smoothing can also be performed over time; for example you can limit the maximum speed at which a hologram can vary in distance from the user.</span></span> <span data-ttu-id="802a3-138">También puede ayudar simplemente limitando el valor de distancia mínima y máxima, por lo que el holograma que se va a mover repentinamente no Volar ausente en la distancia o bloquearían en frente al usuario.</span><span class="sxs-lookup"><span data-stu-id="802a3-138">Simply limiting the minimum and maximum distance value can also help, so the hologram being moved does not suddenly fly away into the distance or come crashing back into the user's face.</span></span>

<span data-ttu-id="802a3-139">Las aplicaciones también pueden usar la forma y la dirección de las superficies de la ubicación de holograma guía.</span><span class="sxs-lookup"><span data-stu-id="802a3-139">Applications can also use the shape and direction of surfaces to guide hologram placement.</span></span> <span data-ttu-id="802a3-140">Una silla holográfica no debería penetrar a través de las paredes y debería situarse vaciado con el límite inferior, aunque sea ligeramente desigual.</span><span class="sxs-lookup"><span data-stu-id="802a3-140">A holographic chair should not penetrate through walls and should sit flush with the floor even if it is slightly uneven.</span></span> <span data-ttu-id="802a3-141">Este tipo de funcionalidad probablemente haría confiar en que el uso de conflictos de leyes físicas, en lugar de simplemente raycasts, problemas semejantes pero se aplicarán.</span><span class="sxs-lookup"><span data-stu-id="802a3-141">This kind of functionality would likely rely upon the use of physics collisions rather than just raycasts, however similar concerns will apply.</span></span> <span data-ttu-id="802a3-142">Si el holograma colocado tiene muchos polígonos pequeño que seguir, como las piernas en una silla, lo puede que tenga sentido para expandir la representación física de esos polígonos en algo más anchos y más suave para que sean más capaz de deslizar sobre superficies espaciales sin enganche.</span><span class="sxs-lookup"><span data-stu-id="802a3-142">If the hologram being placed has many small polygons that stick out, like the legs on a chair, it may make sense to expand the physics representation of those polygons to something wider and smoother so that they are more able to slide over spatial surfaces without snagging.</span></span>

<span data-ttu-id="802a3-143">Por su parte, proporcionados por el usuario se pueden simplificar fuera por completo y superficies espaciales pueden usarse para realizar la selección de ubicación holograma completamente automático.</span><span class="sxs-lookup"><span data-stu-id="802a3-143">At its extreme, user input can be simplified away entirely and spatial surfaces can be used to perform entirely automatic hologram placement.</span></span> <span data-ttu-id="802a3-144">Por ejemplo, la aplicación podría poner un conmutador de luz holográfico en algún lugar en la pared para que el usuario presione.</span><span class="sxs-lookup"><span data-stu-id="802a3-144">For example, the application could place a holographic light-switch somewhere on the wall for the user to press.</span></span> <span data-ttu-id="802a3-145">Doblemente aquí; se aplica la misma salvedad sobre la capacidad de predicción Si el usuario espera control holograma ubicación, pero la aplicación no coloque siempre hologramas donde esperan (si el interruptor de la luz aparece en algún sitio que el usuario no puede llegar a), esto será una experiencia frustrante.</span><span class="sxs-lookup"><span data-stu-id="802a3-145">The same caveat about predictability applies doubly here; if the user expects control over hologram placement, but the application does not always place holograms where they expect (if the light-switch appears somewhere that the user cannot reach), then this will be a frustrating experience.</span></span> <span data-ttu-id="802a3-146">En realidad puede ser peor realizar la selección de ubicación automática que requiere corrección usuario algunas veces, de que solo se requiere al usuario realizar siempre la selección de ubicación; Dado que es la correcta colocación automática *espera*, corrección manual se siente como si una carga!</span><span class="sxs-lookup"><span data-stu-id="802a3-146">It can actually be worse to perform automatic placement that requires user correction some of the time, than to just require the user to always perform placement themselves; because successful automatic placement is *expected*, manual correction feels like a burden!</span></span>

<span data-ttu-id="802a3-147">Tenga en cuenta también que la capacidad de una aplicación para usar superficies espaciales para la selección de ubicación depende en gran medida en la aplicación [análisis experiencia](spatial-mapping-design.md#the-environment-scanning-experience).</span><span class="sxs-lookup"><span data-stu-id="802a3-147">Note also that the ability of an application to use spatial surfaces for placement depends heavily on the application's [scanning experience](spatial-mapping-design.md#the-environment-scanning-experience).</span></span> <span data-ttu-id="802a3-148">Si no se ha analizado una superficie, a continuación, no se puede usar para la ubicación.</span><span class="sxs-lookup"><span data-stu-id="802a3-148">If a surface has not been scanned, then it cannot be used for placement.</span></span> <span data-ttu-id="802a3-149">Es responsabilidad de la aplicación para aclarar este punto para el usuario, para que puede ayudar a analizar las superficies de nuevo o seleccione una nueva ubicación.</span><span class="sxs-lookup"><span data-stu-id="802a3-149">It is up to the application to make this clear to the user, so that they can either help scan new surfaces or select a new location.</span></span>

<span data-ttu-id="802a3-150">Los comentarios visuales para el usuario son de vital importancia durante la selección.</span><span class="sxs-lookup"><span data-stu-id="802a3-150">Visual feedback to the user is of paramount importance during placement.</span></span> <span data-ttu-id="802a3-151">El usuario tiene que saber dónde está el holograma con respecto a la superficie más cercana con [efectos de toma de tierra](spatial-mapping.md#visualization).</span><span class="sxs-lookup"><span data-stu-id="802a3-151">The user needs to know where the hologram is in relation to the nearest surface with [grounding effects](spatial-mapping.md#visualization).</span></span> <span data-ttu-id="802a3-152">Debe entender por qué se está restringiendo el movimiento de su holograma (por ejemplo, debido a la colisión con otra cercana superficie).</span><span class="sxs-lookup"><span data-stu-id="802a3-152">They should understand why the movement of their hologram is being constrained (for example, due to collision with another nearby surface).</span></span> <span data-ttu-id="802a3-153">Si un holograma no pueden colocar en la ubicación actual, a continuación, comentarios visuales deben dejar claro por qué no.</span><span class="sxs-lookup"><span data-stu-id="802a3-153">If they cannot place a hologram in the current location, then visual feedback should make it clear why not.</span></span> <span data-ttu-id="802a3-154">Por ejemplo, si el usuario intenta colocar un sofá holográfico atascado mitad de camino en la pared, a continuación, las partes del sofá que están detrás de la pared deben pulsan en un color enfadado.</span><span class="sxs-lookup"><span data-stu-id="802a3-154">For example, if the user is trying to place a holographic couch stuck half-way into the wall, then the portions of the couch that are behind the wall should pulsate in an angry color.</span></span> <span data-ttu-id="802a3-155">O por el contrario, si la aplicación no encuentra una superficie espacial en una ubicación donde el usuario puede ver una superficie del mundo real, a continuación, la aplicación debería aclarar esto.</span><span class="sxs-lookup"><span data-stu-id="802a3-155">Or conversely, if the application cannot find a spatial surface in a location where the user can see a real-world surface, then the application should make this clear.</span></span> <span data-ttu-id="802a3-156">La ausencia de un efecto de toma de tierra en esta área obvia puede lograr este objetivo.</span><span class="sxs-lookup"><span data-stu-id="802a3-156">The obvious absence of a grounding effect in this area may achieve this purpose.</span></span>

### <a name="occlusion"></a><span data-ttu-id="802a3-157">Oclusión</span><span class="sxs-lookup"><span data-stu-id="802a3-157">Occlusion</span></span>

<span data-ttu-id="802a3-158">Uno de los usos principales de las superficies de asignación espacial es simplemente occlude hologramas.</span><span class="sxs-lookup"><span data-stu-id="802a3-158">One of the primary uses of spatial mapping surfaces is simply to occlude holograms.</span></span> <span data-ttu-id="802a3-159">Este comportamiento simple tiene un impacto enorme en el realismo percibido de hologramas, lo que ayuda a crear una sensación visceral que realmente ocupan el mismo espacio físico que el usuario.</span><span class="sxs-lookup"><span data-stu-id="802a3-159">This simple behavior has a huge impact on the perceived realism of holograms, helping to create a visceral sense that really inhabit the same physical space as the user.</span></span>

<span data-ttu-id="802a3-160">Oclusión también proporciona información para el usuario. Cuando un holograma parece que se ocluyeron en una superficie del mundo real, esto proporciona información visual adicional que indique la ubicación espacial de ese holograma en el mundo.</span><span class="sxs-lookup"><span data-stu-id="802a3-160">Occlusion also provides information to the user; when a hologram appears to be occluded by a real-world surface, this provides additional visual feedback as to the spatial location of that hologram in the world.</span></span> <span data-ttu-id="802a3-161">Por el contrario, puede también útiles oclusión *ocultar* información del usuario; hologramas occluding detrás de las paredes puede reducir el desorden visual de manera intuitiva.</span><span class="sxs-lookup"><span data-stu-id="802a3-161">Conversely, occlusion can also usefully *hide* information from the user; occluding holograms behind walls can reduce visual clutter in an intuitive way.</span></span> <span data-ttu-id="802a3-162">Para mostrar u ocultar un holograma, el usuario simplemente tiene que mover su cabeza.</span><span class="sxs-lookup"><span data-stu-id="802a3-162">To hide or reveal a hologram, the user merely has to move their head.</span></span>

<span data-ttu-id="802a3-163">También puede usarse para preparar las expectativas para una interfaz de usuario natural según interacciones físicas familiares; oclusión Si un holograma se ocluyeron en una superficie es ya que se muestran es sólido, por lo que el usuario debe esperar que realizará el holograma *entren en conflicto* con la superficie y no basta con pasar a través de él.</span><span class="sxs-lookup"><span data-stu-id="802a3-163">Occlusion can also be used to prime expectations for a natural user interface based upon familiar physical interactions; if a hologram is occluded by a surface it is because that surface is solid, so the user should expect that the hologram will *collide* with that surface and not simply pass through it.</span></span>

<span data-ttu-id="802a3-164">A veces, no es deseable oclusión de hologramas.</span><span class="sxs-lookup"><span data-stu-id="802a3-164">Sometimes, occlusion of holograms is undesirable.</span></span> <span data-ttu-id="802a3-165">Si un usuario debe ser capaz de interactuar con un holograma, que necesitan poder verlo - incluso si está detrás de una superficie del mundo real.</span><span class="sxs-lookup"><span data-stu-id="802a3-165">If a user needs to be able to interact with a hologram, then they need to be able to see it - even if it is behind a real-world surface.</span></span> <span data-ttu-id="802a3-166">En tales casos, normalmente tiene sentido para representar tal un holograma diferente al que se ocluyeron (por ejemplo, en lo que reduce el brillo).</span><span class="sxs-lookup"><span data-stu-id="802a3-166">In such cases, it usually makes sense to render such a hologram differently when it is occluded (for example, by reducing its brightness).</span></span> <span data-ttu-id="802a3-167">De este modo, el usuario será capaz de ubicar visualmente el holograma, pero aún será conscientes de que está detrás de algo.</span><span class="sxs-lookup"><span data-stu-id="802a3-167">This way, the user will be able to visually locate the hologram, but they will still be aware that it is behind something.</span></span>

### <a name="physics"></a><span data-ttu-id="802a3-168">Física</span><span class="sxs-lookup"><span data-stu-id="802a3-168">Physics</span></span>

<span data-ttu-id="802a3-169">El uso de simulación física es otra forma en que la asignación espacial puede usarse para reforzar el *presencia* de hologramas en espacio físico del usuario.</span><span class="sxs-lookup"><span data-stu-id="802a3-169">The use of physics simulation is another way in which spatial mapping can be used to reinforce the *presence* of holograms in the user's physical space.</span></span> <span data-ttu-id="802a3-170">Cuando mi pelota de goma holográfica desplazará mi escritorio de manera realista, rebota en el suelo y desaparece en el sofá, podría ser difícil de creer que no es realmente ahí.</span><span class="sxs-lookup"><span data-stu-id="802a3-170">When my holographic rubber ball rolls realistically off my desk, bounces across the floor and disappears under the couch, it might be hard for me to believe that it's not really there.</span></span>

<span data-ttu-id="802a3-171">Simulación de leyes físicas también ofrece la oportunidad para una aplicación para usar las interacciones basadas en física naturales y familiares.</span><span class="sxs-lookup"><span data-stu-id="802a3-171">Physics simulation also provides the opportunity for an application to use natural and familiar physics-based interactions.</span></span> <span data-ttu-id="802a3-172">Mover una pieza de muebles holográfica en torno a en el suelo probablemente será más fácil para el usuario si los muebles responde como si lo estaba deslizante en el piso con la inercia adecuado y fricción.</span><span class="sxs-lookup"><span data-stu-id="802a3-172">Moving a piece of holographic furniture around on the floor will likely be easier for the user if the furniture responds as if it were sliding across the floor with the appropriate inertia and friction.</span></span>

<span data-ttu-id="802a3-173">Para generar los comportamientos físicos realistas, es probable que necesite realizar algunas [mesh procesamiento](spatial-mapping.md#mesh-processing) como rellenar agujeros, quitar flotante alucinaciones y suavizado aproximado superficies.</span><span class="sxs-lookup"><span data-stu-id="802a3-173">In order to generate realistic physical behaviors, you will likely need to perform some [mesh processing](spatial-mapping.md#mesh-processing) such as filling holes, removing floating hallucinations and smoothing rough surfaces.</span></span>

<span data-ttu-id="802a3-174">También necesitará tener en cuenta cómo la aplicación [análisis experiencia](spatial-mapping-design.md#the-environment-scanning-experience) influye en su simulación física.</span><span class="sxs-lookup"><span data-stu-id="802a3-174">You will also need to consider how your application's [scanning experience](spatial-mapping-design.md#the-environment-scanning-experience) influences its physics simulation.</span></span> <span data-ttu-id="802a3-175">En primer lugar, no entren en conflicto falta superficies con nada; ¿Qué ocurre cuando se implemente la pelota de goma desactivar hacia abajo el corredor y fuera del extremo del mundo conocido?</span><span class="sxs-lookup"><span data-stu-id="802a3-175">Firstly, missing surfaces won't collide with anything; what happens when the rubber ball rolls off down the corridor and off the end of the known world?</span></span> <span data-ttu-id="802a3-176">En segundo lugar, debe decidir si continuará responder a cambios en el entorno con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="802a3-176">Secondly, you need to decide whether you will continue to respond to changes in the environment over time.</span></span> <span data-ttu-id="802a3-177">En algunos casos, desea responder lo más rápidamente posible; Diga si el usuario está utilizando las puertas y muebles como movible señalización de obras de defensa contra un tempest de flechas Roman entrantes.</span><span class="sxs-lookup"><span data-stu-id="802a3-177">In some cases, you will want to respond as quickly as possible; say if the user is using doors and furniture as movable barricades in defense against a tempest of incoming Roman arrows.</span></span> <span data-ttu-id="802a3-178">En otros casos, sin embargo, es posible que desee omitir nuevas actualizaciones; impulsar su automóvil deportivo holográfica alrededor de la pista de carreras en el suelo, de repente, no puede ser tan divertido si decide que el perro se colocan en el medio de la pista.</span><span class="sxs-lookup"><span data-stu-id="802a3-178">In other cases though, you may want to ignore new updates; driving your holographic sports car around the racetrack on your floor may suddenly not be so fun if your dog decides to sit in the middle of the track.</span></span>

### <a name="navigation"></a><span data-ttu-id="802a3-179">Navegación</span><span class="sxs-lookup"><span data-stu-id="802a3-179">Navigation</span></span>

<span data-ttu-id="802a3-180">Las aplicaciones pueden usar datos de asignación espacial para conceder a la capacidad de navegar por el mundo real de la misma manera que una persona real sería holográfica caracteres (o agentes).</span><span class="sxs-lookup"><span data-stu-id="802a3-180">Applications can use spatial mapping data to grant holographic characters (or agents) the ability to navigate the real world in the same way a real person would.</span></span> <span data-ttu-id="802a3-181">Esto puede ayudar a reforzar la presencia de caracteres holográficas restringiendo el mismo conjunto de comportamientos naturales y conocidos como las del usuario y sus amigos.</span><span class="sxs-lookup"><span data-stu-id="802a3-181">This can help reinforce the presence of holographic characters by restricting them to the same set of natural, familiar behaviors as those of the user and their friends.</span></span>

<span data-ttu-id="802a3-182">Funciones de navegación podrían ser útiles para los usuarios también.</span><span class="sxs-lookup"><span data-stu-id="802a3-182">Navigation capabilities could be useful to users as well.</span></span> <span data-ttu-id="802a3-183">Una vez que se ha creado un mapa de navegación en un área determinada, se podría compartir para proporcionar instrucciones holográficas para nuevos usuarios familiarizados con esa ubicación.</span><span class="sxs-lookup"><span data-stu-id="802a3-183">Once a navigation map has been built in a given area, it could be shared to provide holographic directions for new users unfamiliar with that location.</span></span> <span data-ttu-id="802a3-184">Esta asignación podría diseñarse para ayudar a mantener peatones '' el flujo del tráfico sin problemas, o para evitar los accidentes en ubicaciones peligrosos como sitios de construcción.</span><span class="sxs-lookup"><span data-stu-id="802a3-184">This map could be designed to help keep pedestrian 'traffic' flowing smoothly, or to avoid accidents in dangerous locations like construction sites.</span></span>

<span data-ttu-id="802a3-185">Los principales retos técnicos implicados en la implementación de la funcionalidad de navegación será una detección fiable de superficies transitable (los seres humanos no camine en tablas!) y estable adaptación a los cambios en el entorno (los seres humanos no recorra las puertas cerradas!).</span><span class="sxs-lookup"><span data-stu-id="802a3-185">The key technical challenges involved in implementing navigation functionality will be reliable detection of walkable surfaces (humans don't walk on tables!) and graceful adaptation to changes in the environment (humans don't walk through closed doors!).</span></span> <span data-ttu-id="802a3-186">La malla puede requerir algunos [procesamiento](spatial-mapping.md#mesh-processing) antes de que se puede utilizar para la navegación por un carácter virtual y el diseño de la ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="802a3-186">The mesh may require some [processing](spatial-mapping.md#mesh-processing) before it is usable for path-planning and navigation by a virtual character.</span></span> <span data-ttu-id="802a3-187">Suavizado de la malla y quitar alucinaciones pueden ayudar a evitar caracteres bloqueados cada vez.</span><span class="sxs-lookup"><span data-stu-id="802a3-187">Smoothing the mesh and removing hallucinations may help avoid characters becoming stuck.</span></span> <span data-ttu-id="802a3-188">También es posible que desee simplificar drásticamente la malla con el fin de acelerar su carácter planeamiento de ruta de acceso y los cálculos de navegación.</span><span class="sxs-lookup"><span data-stu-id="802a3-188">You may also wish to drastically simplify the mesh in order to speed up your character's path-planning and navigation calculations.</span></span> <span data-ttu-id="802a3-189">Estos desafíos han recibido mucha atención en el desarrollo de tecnología de videojuegos, y hay una gran cantidad de literatura de investigación disponibles en estos temas.</span><span class="sxs-lookup"><span data-stu-id="802a3-189">These challenges have received a great deal of attention in the development of videogame technology, and there is a wealth of available research literature on these topics.</span></span>

<span data-ttu-id="802a3-190">Tenga en cuenta que no se puede usar la funcionalidad integrada de NavMesh en Unity con superficies de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="802a3-190">Note that the built-in NavMesh functionality in Unity cannot be used with spatial mapping surfaces.</span></span> <span data-ttu-id="802a3-191">Esto es porque no se conocen las superficies de asignación espacial hasta que la aplicación se inicia, mientras que los archivos de datos de NavMesh deben generarse a partir de componentes de origen antes de tiempo.</span><span class="sxs-lookup"><span data-stu-id="802a3-191">This is because spatial mapping surfaces are not known until the application starts, whereas NavMesh data files need to be generated from source assets ahead of time.</span></span> <span data-ttu-id="802a3-192">Tenga en cuenta también que, al sistema de asignación espacial no proporcionará [información acerca de las superficies muy lejos](spatial-mapping-design.md#the-environment-scanning-experience) desde la ubicación del usuario actual.</span><span class="sxs-lookup"><span data-stu-id="802a3-192">Also note that, the spatial mapping system will not provide [information about surfaces very far away](spatial-mapping-design.md#the-environment-scanning-experience) from the user's current location.</span></span> <span data-ttu-id="802a3-193">Por lo que la aplicación debe 'recordar' superficies Sí si se van a crear un mapa de un área muy grande.</span><span class="sxs-lookup"><span data-stu-id="802a3-193">So the application must 'remember' surfaces itself if it is to build a map of a very large area.</span></span>

### <a name="visualization"></a><span data-ttu-id="802a3-194">visualización</span><span class="sxs-lookup"><span data-stu-id="802a3-194">Visualization</span></span>

<span data-ttu-id="802a3-195">La mayoría de los casos es adecuado para las superficies espaciales sea invisible; Para minimizar el desorden visual y dejar que el real world hablen por sí mismos.</span><span class="sxs-lookup"><span data-stu-id="802a3-195">Most of the time it is appropriate for spatial surfaces to be invisible; to minimize visual clutter and let the real world speak for itself.</span></span> <span data-ttu-id="802a3-196">Sin embargo, a veces es útil visualizar las superficies de asignación espacial directamente, a pesar del hecho de que sus equivalentes en el mundo real ya están visibles.</span><span class="sxs-lookup"><span data-stu-id="802a3-196">However, sometimes it is useful to visualize spatial mapping surfaces directly, despite the fact that their real-world counterparts are already visible.</span></span>

<span data-ttu-id="802a3-197">Por ejemplo, cuando el usuario intenta colocar un holograma hasta una superficie (colocación de un archivador holographic en la pared, por ejemplo) puede resultar útil a masa el holograma al convertir una sombra a la superficie.</span><span class="sxs-lookup"><span data-stu-id="802a3-197">For example, when the user is trying to place a hologram onto a surface (placing a holographic cabinet on the wall, say) it can be useful to 'ground' the hologram by casting a shadow onto the surface.</span></span> <span data-ttu-id="802a3-198">Esto proporciona al usuario una idea mucho más clara de la proximidad física exacta entre el holograma y la superficie.</span><span class="sxs-lookup"><span data-stu-id="802a3-198">This gives the user a much clearer sense of the exact physical proximity between the hologram and the surface.</span></span> <span data-ttu-id="802a3-199">También es un ejemplo de la práctica más general de visualmente 'vista previa de' un cambio antes de que el usuario se confirma en él.</span><span class="sxs-lookup"><span data-stu-id="802a3-199">This is also an example of the more general practice of visually 'previewing' a change before the user commits to it.</span></span>

<span data-ttu-id="802a3-200">Mediante la visualización de las superficies, la aplicación puede compartir con el usuario, su comprensión del entorno.</span><span class="sxs-lookup"><span data-stu-id="802a3-200">By visualizing surfaces, the application can share with the user its understanding of the environment.</span></span> <span data-ttu-id="802a3-201">Por ejemplo, un juego de mesa holográfico pudiera visualizar las superficies horizontales que ha identificado como "tablas", para que el usuario sepa dónde debe ir para interactuar.</span><span class="sxs-lookup"><span data-stu-id="802a3-201">For example, a holographic board game could visualize the horizontal surfaces that it has identified as 'tables', so the user knows where they should go to interact.</span></span>

<span data-ttu-id="802a3-202">Visualización de las superficies de puede ser una manera útil para mostrar al usuario cercanas espacios que están ocultos de la vista.</span><span class="sxs-lookup"><span data-stu-id="802a3-202">Visualizing surfaces can be a useful way to show the user nearby spaces that are hidden from view.</span></span> <span data-ttu-id="802a3-203">Esto puede proporcionar una manera sencilla de proporcionar al usuario acceso a su cocina (y todos sus contenidos hologramas) de su sala de estar.</span><span class="sxs-lookup"><span data-stu-id="802a3-203">This could provide a simple way to give the user access to their kitchen (and all of its contained holograms) from their living room.</span></span>

<span data-ttu-id="802a3-204">Las mallas de superficie proporcionadas por asignación espacial no pueden ser especialmente "limpias".</span><span class="sxs-lookup"><span data-stu-id="802a3-204">The surface meshes provided by spatial mapping may not be particularly 'clean'.</span></span> <span data-ttu-id="802a3-205">Por lo tanto es importante visualizarlos de manera adecuada.</span><span class="sxs-lookup"><span data-stu-id="802a3-205">Thus it is important to visualize them appropriately.</span></span> <span data-ttu-id="802a3-206">Cálculos de iluminación tradicional pueden resaltar errores en las normales de superficie de una manera visualmente confuso, mientras se proyectan en la superficie de texturas "limpias" pueden ayudar a darle un aspecto más limpio.</span><span class="sxs-lookup"><span data-stu-id="802a3-206">Traditional lighting calculations may highlight errors in surface normals in a visually distracting manner, whilst 'clean' textures projected onto the surface may help to give it a tidier appearance.</span></span> <span data-ttu-id="802a3-207">También es posible realizar [mesh procesamiento](spatial-mapping.md#mesh-processing) para mejorar las propiedades de la malla, antes de que se representan las superficies.</span><span class="sxs-lookup"><span data-stu-id="802a3-207">It is also possible to perform [mesh processing](spatial-mapping.md#mesh-processing) to improve mesh properties, before the surfaces are rendered.</span></span>

## <a name="using-the-surface-observer"></a><span data-ttu-id="802a3-208">Utilizando el observador de superficie</span><span class="sxs-lookup"><span data-stu-id="802a3-208">Using The Surface Observer</span></span>

<span data-ttu-id="802a3-209">El punto de partida para la asignación espacial es el observador de superficie.</span><span class="sxs-lookup"><span data-stu-id="802a3-209">The starting point for spatial mapping is the surface observer.</span></span> <span data-ttu-id="802a3-210">Flujo del programa es como sigue:</span><span class="sxs-lookup"><span data-stu-id="802a3-210">Program flow is as follows:</span></span>
* <span data-ttu-id="802a3-211">Crear un objeto observador de superficie</span><span class="sxs-lookup"><span data-stu-id="802a3-211">Create a surface observer object</span></span>
   * <span data-ttu-id="802a3-212">Proporcionar uno o más volúmenes espaciales, para definir las áreas de interés en el que la aplicación desea recibir datos de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="802a3-212">Provide one or more spatial volumes, to define the regions of interest in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="802a3-213">Un volumen espacial es simplemente una forma de definir una región de espacio, como una esfera o cuadro.</span><span class="sxs-lookup"><span data-stu-id="802a3-213">A spatial volume is simply a shape defining a region of space, such as a sphere or a box.</span></span>
   * <span data-ttu-id="802a3-214">Usar un volumen espacial con un sistema de coordenadas espacial bloqueado por el mundo para identificar una región del mundo físico fija.</span><span class="sxs-lookup"><span data-stu-id="802a3-214">Use a spatial volume with a world-locked spatial coordinate system to identify a fixed region of the physical world.</span></span>
   * <span data-ttu-id="802a3-215">Uso de un volumen espacial, actualizado para cada fotograma con un cuerpo bloqueado espacial sistema de coordenadas, para identificar una región de espacio que se mueve (pero no se gira) con el usuario.</span><span class="sxs-lookup"><span data-stu-id="802a3-215">Use a spatial volume, updated each frame with a body-locked spatial coordinate system, to identify a region of space that moves (but does not rotate) with the user.</span></span>
   * <span data-ttu-id="802a3-216">Estos volúmenes espaciales pueden cambiarse más adelante en cualquier momento, como el estado de la aplicación o el usuario cambia.</span><span class="sxs-lookup"><span data-stu-id="802a3-216">These spatial volumes may be changed later at any time, as the status of the application or the user changes.</span></span>
* <span data-ttu-id="802a3-217">Usar sondeo o notificación para recuperar información acerca de las superficies espaciales</span><span class="sxs-lookup"><span data-stu-id="802a3-217">Use polling or notification to retrieve information about spatial surfaces</span></span>
   * <span data-ttu-id="802a3-218">Es posible que 'sondea' el observador de superficie para el estado de superficie espacial en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="802a3-218">You may 'poll' the surface observer for spatial surface status at any time.</span></span> <span data-ttu-id="802a3-219">Como alternativa, puede registrarse para eventos del observador expuesta 'superficies cambiado', que notifique a la aplicación cuando han cambiado las superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="802a3-219">Alternatively, you may register for the surface observer's 'surfaces changed' event, which will notify the application when spatial surfaces have changed.</span></span>
   * <span data-ttu-id="802a3-220">Para un volumen dinámico espacial, como frustum de vista, o un volumen bloqueado por el cuerpo, las aplicaciones debe sondear en busca de cambios cada fotograma mediante el establecimiento de la región de interés y, a continuación, obtener el conjunto actual de superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="802a3-220">For a dynamic spatial volume, such as the view frustum, or a body-locked volume, applications will need to poll for changes each frame by setting the region of interest and then obtaining the current set of spatial surfaces.</span></span>
   * <span data-ttu-id="802a3-221">Para un volumen estático, como un cubo bloqueado por el mundo que abarcan una habitación individual, pueden registrar las aplicaciones para que el evento 'superficies cambiado' recibir una notificación cuando pueden haber cambiado superficies espaciales dentro de ese volumen.</span><span class="sxs-lookup"><span data-stu-id="802a3-221">For a static volume, such as a world-locked cube covering a single room, applications may register for the 'surfaces changed' event to be notified when spatial surfaces inside that volume may have changed.</span></span>
* <span data-ttu-id="802a3-222">Cambios de las superficies de procesos</span><span class="sxs-lookup"><span data-stu-id="802a3-222">Process surfaces changes</span></span>
   * <span data-ttu-id="802a3-223">Recorrer en iteración el conjunto proporcionado de superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="802a3-223">Iterate the provided set of spatial surfaces.</span></span>
   * <span data-ttu-id="802a3-224">Clasificar espaciales superficies como se ha agregado, cambiado o quitado.</span><span class="sxs-lookup"><span data-stu-id="802a3-224">Classify spatial surfaces as added, changed or removed.</span></span>
   * <span data-ttu-id="802a3-225">Para cada superficie espacial han agregado o modificado, si es necesario enviar una solicitud asincrónica para recibir la malla actualizada que representa el estado actual de la superficie en el nivel de detalle deseado.</span><span class="sxs-lookup"><span data-stu-id="802a3-225">For each added or changed spatial surface, if appropriate submit an asynchronous request to receive updated mesh representing the surface's current state at the desired level of detail.</span></span>
* <span data-ttu-id="802a3-226">Procesar la solicitud asincrónica de malla (más detalles en las secciones siguientes).</span><span class="sxs-lookup"><span data-stu-id="802a3-226">Process the asynchronous mesh request (more details in following sections).</span></span>

## <a name="mesh-caching"></a><span data-ttu-id="802a3-227">Almacenamiento en caché de malla</span><span class="sxs-lookup"><span data-stu-id="802a3-227">Mesh Caching</span></span>

<span data-ttu-id="802a3-228">Las superficies espaciales se representan mediante mallas de triangulares densa.</span><span class="sxs-lookup"><span data-stu-id="802a3-228">Spatial surfaces are represented by dense triangle meshes.</span></span> <span data-ttu-id="802a3-229">Almacenar, procesar y procesar estos mallas pueden consumir importantes recursos de cálculo y almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="802a3-229">Storing, rendering and processing these meshes can consume significant computational and storage resources.</span></span> <span data-ttu-id="802a3-230">Por lo tanto, cada aplicación debe adoptar una malla de almacenamiento en caché de esquema adecuado para sus necesidades, con el fin de minimizar los recursos utilizados para el almacenamiento y procesamiento de la malla.</span><span class="sxs-lookup"><span data-stu-id="802a3-230">As such, each application should adopt a mesh caching scheme appropriate to its needs, in order to minimize the resources used for mesh processing and storage.</span></span> <span data-ttu-id="802a3-231">Este esquema debe determinar que mallas para conservar y cuáles se deben descartar, así como cuándo se debe actualizar la malla para cada superficie espacial.</span><span class="sxs-lookup"><span data-stu-id="802a3-231">This scheme should determine which meshes to retain and which to discard, as well as when to update the mesh for each spatial surface.</span></span>

<span data-ttu-id="802a3-232">Muchas de las consideraciones que se ha tratado informará directamente cómo la aplicación debe aproximarse al almacenamiento en caché de malla.</span><span class="sxs-lookup"><span data-stu-id="802a3-232">Many of the considerations discussed there will directly inform how your application should approach mesh caching.</span></span> <span data-ttu-id="802a3-233">Debe considerar cómo el usuario se mueve a través del entorno, se necesitan las superficies que, cuando se observará los diferentes tipos de superficies y cuándo se deben capturar los cambios en el entorno.</span><span class="sxs-lookup"><span data-stu-id="802a3-233">You should consider how the user moves through the environment, which surfaces are needed, when different surfaces will be observed and when changes in the environment should be captured.</span></span>

<span data-ttu-id="802a3-234">Al interpretar el evento 'superficies cambiado' proporcionado por el observador expuesto, la lógica de almacenamiento en caché de malla básica es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="802a3-234">When interpreting the 'surfaces changed' event provided by the surface observer, the basic mesh caching logic is as follows:</span></span>
* <span data-ttu-id="802a3-235">Si la aplicación ve un identificador de superficie espacial que no ha visto antes, debería tratarlo como una nueva superficie espacial.</span><span class="sxs-lookup"><span data-stu-id="802a3-235">If the application sees a spatial surface ID that it has not seen before, it should treat this as a new spatial surface.</span></span>
* <span data-ttu-id="802a3-236">Si la aplicación ve una superficie espacial con un identificador conocido, pero con una nueva hora de actualización, debería tratarlo como una superficie espacial actualizada.</span><span class="sxs-lookup"><span data-stu-id="802a3-236">If the application sees a spatial surface with a known ID but with a new update time, it should treat this as an updated spatial surface.</span></span>
* <span data-ttu-id="802a3-237">Si la aplicación ya no ve una superficie espacial con un identificador conocido, debería tratarlo como una superficie espacial quitada.</span><span class="sxs-lookup"><span data-stu-id="802a3-237">If the application no longer sees a spatial surface with a known ID, it should treat this as a removed spatial surface.</span></span>

<span data-ttu-id="802a3-238">Depende de cada aplicación para, a continuación, realice las siguientes selecciones:</span><span class="sxs-lookup"><span data-stu-id="802a3-238">It is up to each application to then make the following choices:</span></span>
* <span data-ttu-id="802a3-239">¿Para las superficies espaciales nuevo, se debe solicitar malla?</span><span class="sxs-lookup"><span data-stu-id="802a3-239">For new spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="802a3-240">Por lo general se debe solicitar malla inmediatamente para nuevas superficies espaciales, que pueden proporcionar información útil de nuevo al usuario.</span><span class="sxs-lookup"><span data-stu-id="802a3-240">Generally mesh should be requested immediately for new spatial surfaces, which may provide useful new information to the user.</span></span>
   * <span data-ttu-id="802a3-241">Sin embargo, nuevas superficies espaciales cerca de y delante del usuario deben tener prioridad y se debe solicitar primero su malla.</span><span class="sxs-lookup"><span data-stu-id="802a3-241">However, new spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="802a3-242">Si no es necesaria la malla nuevo, si por ejemplo la aplicación ha permanente o temporalmente 'inmoviliza' su modelo del entorno, a continuación, debe no ser solicitados.</span><span class="sxs-lookup"><span data-stu-id="802a3-242">If the new mesh is not needed, if for example the application has permanently or temporarily 'frozen' its model of the environment, then it should not be requested.</span></span>
* <span data-ttu-id="802a3-243">¿Para las superficies espaciales actualizadas, se debe solicitar malla?</span><span class="sxs-lookup"><span data-stu-id="802a3-243">For updated spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="802a3-244">Superficies espaciales actualizadas cerca de y delante del usuario deben tener prioridad y se debe solicitar primero su malla.</span><span class="sxs-lookup"><span data-stu-id="802a3-244">Updated spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="802a3-245">También puede ser adecuado dar prioridad a nuevas superficies que al actualizar las superficies, especialmente durante la experiencia de exploración.</span><span class="sxs-lookup"><span data-stu-id="802a3-245">It may also be appropriate to give higher priority to new surfaces than to updated surfaces, especially during the scanning experience.</span></span>
   * <span data-ttu-id="802a3-246">Para limitar los costos de procesamiento, las aplicaciones que desee limitar la velocidad a la que procesan las actualizaciones de las superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="802a3-246">To limit processing costs, applications may wish to throttle the rate at which they process updates to spatial surfaces.</span></span>
   * <span data-ttu-id="802a3-247">Es posible deducir que son menores, por ejemplo, si los límites de la superficie son pequeños, en cuyo caso la actualización puede no ser lo suficientemente importante como para procesar los cambios realizados en una superficie espacial.</span><span class="sxs-lookup"><span data-stu-id="802a3-247">It may be possible to infer that changes to a spatial surface are minor, for example if the bounds of the surface are small, in which case the update may not be important enough to process.</span></span>
   * <span data-ttu-id="802a3-248">Las actualizaciones de las superficies espaciales fuera de la región de interés del usuario actual se pueden omitir por completo, aunque en este caso puede ser más eficaz para modificar los volúmenes de delimitadores espaciales usando el observador de superficie.</span><span class="sxs-lookup"><span data-stu-id="802a3-248">Updates to spatial surfaces outside the current region of interest of the user may be ignored entirely, though in this case it may be more efficient to modify the spatial bounding volumes in use by the surface observer.</span></span>
* <span data-ttu-id="802a3-249">¿Para las superficies espaciales quitadas, debe descartarse malla?</span><span class="sxs-lookup"><span data-stu-id="802a3-249">For removed spatial surfaces, should mesh be discarded?</span></span>
   * <span data-ttu-id="802a3-250">Por lo general malla debe descartarse inmediatamente para las superficies espaciales quitadas, para que permanezca correcta oclusión holograma.</span><span class="sxs-lookup"><span data-stu-id="802a3-250">Generally mesh should be discarded immediately for removed spatial surfaces, so that hologram occlusion remains correct.</span></span>
   * <span data-ttu-id="802a3-251">Sin embargo, si la aplicación tiene motivos para creer que una superficie espacial volverá a aparecer en breve (quizás basándose en el diseño de la experiencia del usuario), a continuación, puede ser más eficaz para conservarlo que to descartar su malla y crearla de nuevo más tarde.</span><span class="sxs-lookup"><span data-stu-id="802a3-251">However, if the application has reason to believe that a spatial surface will reappear shortly (perhaps based upon the design of the user experience), then it may be more efficient to retain it than to discard its mesh and recreate it again later.</span></span>
   * <span data-ttu-id="802a3-252">Si la aplicación está creando un modelo a gran escala del entorno de usuario es posible que no quiere descartar las mallas en absoluto.</span><span class="sxs-lookup"><span data-stu-id="802a3-252">If the application is building a large-scale model of the user's environment then it may not wish to discard any meshes at all.</span></span> <span data-ttu-id="802a3-253">Todavía será necesario limitar el uso de recursos sin embargo, posiblemente mediante mallas de puesta en cola en el disco como superficies espaciales desaparecen.</span><span class="sxs-lookup"><span data-stu-id="802a3-253">It will still need to limit resource usage though, possibly by spooling meshes to disk as spatial surfaces disappear.</span></span>
   * <span data-ttu-id="802a3-254">Tenga en cuenta que algunos eventos durante la generación de superficie espacial relativamente poco frecuentes pueden causar espaciales superficies será sustituido por nuevas superficies espaciales en una ubicación similar pero con distintos identificadores.</span><span class="sxs-lookup"><span data-stu-id="802a3-254">Note that some relatively rare events during spatial surface generation can cause spatial surfaces to be replaced by new spatial surfaces in a similar location but with different IDs.</span></span> <span data-ttu-id="802a3-255">Por lo tanto, las aplicaciones que elija no para descartar una superficie quitada procure no final copia con varios superpuesta altamente espaciales expuestas mallas que abarcan la misma ubicación.</span><span class="sxs-lookup"><span data-stu-id="802a3-255">Consequently, applications that choose not to discard a removed surface should take care not to end up with multiple highly-overlapped spatial surface meshes covering the same location.</span></span>
* <span data-ttu-id="802a3-256">¿Debe descartarse malla para otras superficies espaciales?</span><span class="sxs-lookup"><span data-stu-id="802a3-256">Should mesh be discarded for any other spatial surfaces?</span></span>
   * <span data-ttu-id="802a3-257">Aunque existe una superficie espacial, si ya no es útil para la experiencia del usuario, a continuación, debe descartarse.</span><span class="sxs-lookup"><span data-stu-id="802a3-257">Even while a spatial surface exists, if it is no longer useful to the user's experience then it should be discarded.</span></span> <span data-ttu-id="802a3-258">Por ejemplo, si la aplicación "reemplaza" la habitación en el otro lado de una puerta de entrada con un espacio virtual alternativo, a continuación, las superficies espaciales en ese espacio ya no importan.</span><span class="sxs-lookup"><span data-stu-id="802a3-258">For example, if the application 'replaces' the room on the other side of a doorway with an alternate virtual space then the spatial surfaces in that room no longer matter.</span></span>

<span data-ttu-id="802a3-259">Aquí es una ejemplo malla estrategia almacenamiento en caché, mediante histéresis espaciales y temporales:</span><span class="sxs-lookup"><span data-stu-id="802a3-259">Here is an example mesh caching strategy, using spatial and temporal hysteresis:</span></span>
* <span data-ttu-id="802a3-260">Considere una aplicación que quiera utilizar un volumen en forma de frustum espacial de interés que sigue la mirada del usuario que parezcan y andar.</span><span class="sxs-lookup"><span data-stu-id="802a3-260">Consider an application that wishes to use a frustum-shaped spatial volume of interest that follows the user's gaze as they look around and walk around.</span></span>
* <span data-ttu-id="802a3-261">Una superficie espacial puede desaparecer temporalmente de este volumen simplemente porque el usuario busca lejos de la superficie o pasos adicionales fuera de él... solo para mirar hacia atrás o se mueve cerca de nuevo más tarde unos instantes.</span><span class="sxs-lookup"><span data-stu-id="802a3-261">A spatial surface may disappear temporarily from this volume simply because the user looks away from the surface or steps further away from it... only to look back or moves closer again a moment later.</span></span> <span data-ttu-id="802a3-262">En este caso, descartando y volver a crear la malla para esta superficie representan una gran cantidad de procesamiento de redundante.</span><span class="sxs-lookup"><span data-stu-id="802a3-262">In this case, discarding and re-creating the mesh for this surface represents a lot of redundant processing.</span></span>
* <span data-ttu-id="802a3-263">Para reducir el número de cambios procesados, la aplicación usa dos observadores superficies espaciales, uno dentro de la otra.</span><span class="sxs-lookup"><span data-stu-id="802a3-263">To reduce the number of changes processed, the application uses two spatial surface observers, one contained within the other.</span></span> <span data-ttu-id="802a3-264">El volumen más grande es esférico y sigue el usuario 'forma diferida;' solo se mueve cuando sea necesario para garantizar que su centro está en 2,0 metros del usuario.</span><span class="sxs-lookup"><span data-stu-id="802a3-264">The larger volume is spherical and follows the user 'lazily'; it only moves when necessary to ensure that its centre is within 2.0 metres of the user.</span></span>
* <span data-ttu-id="802a3-265">Siempre se procesan en nuevas y actualizadas mallas de superficie espaciales desde el observador superficie interno más pequeño, pero las mallas se almacenan en caché hasta que éstas desaparecen del observador superficie externo más grande.</span><span class="sxs-lookup"><span data-stu-id="802a3-265">New and updated spatial surface meshes are always processed from the smaller inner surface observer, but meshes are cached until they disappear from the larger outer surface observer.</span></span> <span data-ttu-id="802a3-266">Esto permite que la aplicación evitar el procesamiento de muchos cambios redundantes debido al movimiento de usuario local.</span><span class="sxs-lookup"><span data-stu-id="802a3-266">This allows the application to avoid processing many redundant changes due to local user movement.</span></span>
* <span data-ttu-id="802a3-267">Puesto que una superficie espacial también puede desaparecer temporalmente debido a la pérdida de seguimiento, la aplicación también aplaza descartar superficies espaciales quitadas durante el seguimiento de la pérdida.</span><span class="sxs-lookup"><span data-stu-id="802a3-267">Since a spatial surface may also disappear temporarily due to tracking loss, the application also defers discarding removed spatial surfaces during tracking loss.</span></span>
* <span data-ttu-id="802a3-268">En general, una aplicación debe evaluar el equilibrio entre el proceso de actualización menor y mayor uso de memoria para determinar su estrategia de almacenamiento en caché ideal.</span><span class="sxs-lookup"><span data-stu-id="802a3-268">In general, an application should evaluate the tradeoff between reduced update processing and increased memory usage to determine its ideal caching strategy.</span></span>

## <a name="rendering"></a><span data-ttu-id="802a3-269">Representación</span><span class="sxs-lookup"><span data-stu-id="802a3-269">Rendering</span></span>

<span data-ttu-id="802a3-270">Hay tres formas principales en el que las mallas de asignación espacial tienden a ser utilizadas para la representación:</span><span class="sxs-lookup"><span data-stu-id="802a3-270">There are three primary ways in which spatial mapping meshes tend to be used for rendering:</span></span>
* <span data-ttu-id="802a3-271">Para la visualización de superficie</span><span class="sxs-lookup"><span data-stu-id="802a3-271">For surface visualization</span></span>
   * <span data-ttu-id="802a3-272">A menudo resulta útil visualizar las superficies espaciales directamente.</span><span class="sxs-lookup"><span data-stu-id="802a3-272">It is often useful to visualize spatial surfaces directly.</span></span> <span data-ttu-id="802a3-273">Por ejemplo, conversión 'shadows' de los objetos en superficies espaciales pueden proporcionar comentarios visuales útiles al usuario mientras coloca en superficies hologramas.</span><span class="sxs-lookup"><span data-stu-id="802a3-273">For example, casting 'shadows' from objects onto spatial surfaces can provide helpful visual feedback to the user while they are placing holograms on surfaces.</span></span>
   * <span data-ttu-id="802a3-274">Una cosa a tener en cuenta es que las mallas espaciales son diferentes para el tipo de las mallas que podría crear un intérprete en 3D.</span><span class="sxs-lookup"><span data-stu-id="802a3-274">One thing to bear in mind is that spatial meshes are different to the kind of meshes that a 3D artist might create.</span></span> <span data-ttu-id="802a3-275">La topología de triángulo no será tan 'Limpiar' como topología creados por humanos y la malla se verá afectado de [varios errores](spatial-mapping-design.md#what-influences-spatial-mapping-quality).</span><span class="sxs-lookup"><span data-stu-id="802a3-275">The triangle topology will not be as 'clean' as human-created topology, and the mesh will suffer from [various errors](spatial-mapping-design.md#what-influences-spatial-mapping-quality).</span></span>
   * <span data-ttu-id="802a3-276">Para crear una estética visual agradable, es posible que, por tanto, desea realizar algunas [mesh procesamiento](spatial-mapping.md#mesh-processing), por ejemplo a vulnerabilidades de relleno o smooth normales de superficie.</span><span class="sxs-lookup"><span data-stu-id="802a3-276">In order to create a pleasing visual aesthetic, you may thus want to perform some [mesh processing](spatial-mapping.md#mesh-processing), for example to fill holes or smooth surface normals.</span></span> <span data-ttu-id="802a3-277">También es posible que desee usar a un sombreador a las texturas diseñado por el intérprete de proyecto en la malla en lugar de visualizar directamente la topología de malla y las normales.</span><span class="sxs-lookup"><span data-stu-id="802a3-277">You may also wish to use a shader to project artist-designed textures onto your mesh instead of directly visualizing mesh topology and normals.</span></span>
* <span data-ttu-id="802a3-278">Para occluding hologramas tras las superficies del mundo real</span><span class="sxs-lookup"><span data-stu-id="802a3-278">For occluding holograms behind real-world surfaces</span></span>
   * <span data-ttu-id="802a3-279">Superficies espaciales se pueden representar en una fase de profundidad que solo afecta a la [búfer de profundidad](https://msdn.microsoft.com/library/windows/desktop/bb219616(v=vs.85).aspx) y no afecta a los destinos de representación de color.</span><span class="sxs-lookup"><span data-stu-id="802a3-279">Spatial surfaces can be rendered in a depth-only pass which only affects the [depth buffer](https://msdn.microsoft.com/library/windows/desktop/bb219616(v=vs.85).aspx) and does not affect color render targets.</span></span>
   * <span data-ttu-id="802a3-280">Esto prepara el búfer de profundidad para occlude representan posteriormente hologramas tras las superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="802a3-280">This primes the depth buffer to occlude subsequently-rendered holograms behind spatial surfaces.</span></span> <span data-ttu-id="802a3-281">Precisa oclusión de hologramas mejora el sentido de que realmente existen hologramas dentro del espacio físico del usuario.</span><span class="sxs-lookup"><span data-stu-id="802a3-281">Accurate occlusion of holograms enhances the sense that holograms really exist within the user's physical space.</span></span>
   * <span data-ttu-id="802a3-282">Para habilitar la representación sólo profundidad, actualice su estado de mezcla para establecer el [RenderTargetWriteMask](https://msdn.microsoft.com/library/windows/desktop/hh404492(v=vs.85).aspx) en cero para el color de todos los destinos de representación.</span><span class="sxs-lookup"><span data-stu-id="802a3-282">To enable depth-only rendering, update your blend state to set the [RenderTargetWriteMask](https://msdn.microsoft.com/library/windows/desktop/hh404492(v=vs.85).aspx) to zero for all color render targets.</span></span>
* <span data-ttu-id="802a3-283">Para modificar la apariencia de hologramas ocluidos en superficies del mundo real</span><span class="sxs-lookup"><span data-stu-id="802a3-283">For modifying the appearance of holograms occluded by real-world surfaces</span></span>
   * <span data-ttu-id="802a3-284">Geometría representado normalmente está oculto cuando se es ocluido.</span><span class="sxs-lookup"><span data-stu-id="802a3-284">Normally rendered geometry is hidden when it is occluded.</span></span> <span data-ttu-id="802a3-285">Esto se consigue estableciendo la función de profundidad su [estado de la Galería de símbolos de profundidad](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx) a "menor o igual", lo que hace que la geometría sea visible sólo cuando sea **más de cerca** a la cámara que todos se representan previamente geometría.</span><span class="sxs-lookup"><span data-stu-id="802a3-285">This is achieved by setting the depth function in your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx) to "less than or equal", which causes geometry to be visible only where it is **closer** to the camera than all previously rendered geometry.</span></span>
   * <span data-ttu-id="802a3-286">Sin embargo, puede ser útil para mantener determinado geometría visible incluso cuando se está ocluido y modificar su apariencia cuando ocluidos como una manera de proporcionar comentarios visuales al usuario.</span><span class="sxs-lookup"><span data-stu-id="802a3-286">However, it may be useful to keep certain geometry visible even when it is occluded, and to modify its appearance when occluded as a way of providing visual feedback to the user.</span></span> <span data-ttu-id="802a3-287">Por ejemplo, esto permite que la aplicación mostrar al usuario la ubicación de un objeto mientras lo que claramente que está detrás de una superficie del mundo real.</span><span class="sxs-lookup"><span data-stu-id="802a3-287">For example, this allows the application to show the user the location of an object whilst making it clear that is behind a real-world surface.</span></span>
   * <span data-ttu-id="802a3-288">Para lograr esto, se representan la geometría de una segunda vez con un sombreado diferente que crea la apariencia deseada 'occluded'.</span><span class="sxs-lookup"><span data-stu-id="802a3-288">To achieve this, render the geometry a second time with a different shader that creates the desired 'occluded' appearance.</span></span> <span data-ttu-id="802a3-289">Antes de procesar la geometría por segunda vez, realizar dos cambios en su [estado de la Galería de símbolos de profundidad](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="802a3-289">Before rendering the geometry for the second time, make two changes to your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span></span> <span data-ttu-id="802a3-290">En primer lugar, Establece la función de profundidad en "mayor o igual que" para que la geometría verá sólo cuando sea **más** desde la cámara que toda la geometría procesada anteriormente.</span><span class="sxs-lookup"><span data-stu-id="802a3-290">First, set the depth function to "greater than or equal" so that the geometry will be visible only where it is **further** from the camera than all previously rendered geometry.</span></span> <span data-ttu-id="802a3-291">En segundo lugar, establezca el DepthWriteMask a cero, por lo que no se modificará el búfer de profundidad (el búfer de profundidad debe continuar representar la profundidad de la geometría **más cercano** a la cámara).</span><span class="sxs-lookup"><span data-stu-id="802a3-291">Second, set the DepthWriteMask to zero, so that the depth buffer will not be modified (the depth buffer should continue to represent the depth of the geometry **closest** to the camera).</span></span>

<span data-ttu-id="802a3-292">[Rendimiento](understanding-performance-for-mixed-reality.md) es una preocupación importante al representar las mallas de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="802a3-292">[Performance](understanding-performance-for-mixed-reality.md) is an important concern when rendering spatial mapping meshes.</span></span> <span data-ttu-id="802a3-293">Estas son algunas técnicas de rendimiento de representación específica para representar las mallas de asignación espacial:</span><span class="sxs-lookup"><span data-stu-id="802a3-293">Here are some rendering performance techniques specific to rendering spatial mapping meshes:</span></span>
* <span data-ttu-id="802a3-294">Ajustar la densidad de triángulo</span><span class="sxs-lookup"><span data-stu-id="802a3-294">Adjust triangle density</span></span>
   * <span data-ttu-id="802a3-295">Cuando el solicitante superficie espacial mallas de su superficie observador, solicitar la menor densidad de mallas de triangulares será suficiente para sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="802a3-295">When requesting spatial surface meshes from your surface observer, request the lowest density of triangle meshes that will suffice for your needs.</span></span>
   * <span data-ttu-id="802a3-296">Puede que tenga sentido para variar la densidad de triángulo en una base de superficie por superficie, dependiendo de la distancia de la superficie del usuario y su importancia para la experiencia del usuario.</span><span class="sxs-lookup"><span data-stu-id="802a3-296">It may make sense to vary triangle density on a surface by surface basis, depending on the surface's distance from the user, and its relevance to the user experience.</span></span>
   * <span data-ttu-id="802a3-297">Recuentos de triángulo que se reducen reducirá el uso de memoria y los costos de procesamiento de vértices en la GPU, aunque no afectará a los costos de procesamiento de píxeles.</span><span class="sxs-lookup"><span data-stu-id="802a3-297">Reducing triangle counts will reduce memory usage and vertex processing costs on the GPU, though it will not affect pixel processing costs.</span></span>
* <span data-ttu-id="802a3-298">Realizar frustum caras traseras</span><span class="sxs-lookup"><span data-stu-id="802a3-298">Perform frustum culling</span></span>
   * <span data-ttu-id="802a3-299">Caras traseras frustum omite los objetos de dibujo que no estén visibles porque están fuera del frustum de visualización actual.</span><span class="sxs-lookup"><span data-stu-id="802a3-299">Frustum culling skips drawing objects that cannot be seen because they are outside the current display frustum.</span></span> <span data-ttu-id="802a3-300">Esto reduce los costos de procesamiento de CPU y GPU.</span><span class="sxs-lookup"><span data-stu-id="802a3-300">This reduces both CPU and GPU processing costs.</span></span>
   * <span data-ttu-id="802a3-301">Puesto que la selección se realiza en una base por cada malla y superficies espaciales pueden ser grandes, divide cada malla de superficie espacial en fragmentos más pequeños puede producir más eficaz de caras traseras (en que se representan menos triángulos fuera de la pantalla).</span><span class="sxs-lookup"><span data-stu-id="802a3-301">Since culling is performed on a per-mesh basis and spatial surfaces can be large, breaking each spatial surface mesh into smaller chunks may result in more efficient culling (in that fewer offscreen triangles are rendered).</span></span> <span data-ttu-id="802a3-302">Hay una desventaja, sin embargo; las mallas más que tiene, las llamadas de dibujo más debe realizar, lo que pueden aumentar los costos de CPU.</span><span class="sxs-lookup"><span data-stu-id="802a3-302">There is a tradeoff, however; the more meshes you have, the more draw calls you must make, which can increase CPU costs.</span></span> <span data-ttu-id="802a3-303">En casos extremos, la frustum caras traseras cálculos propios incluso podría tener un costo de CPU puede medir.</span><span class="sxs-lookup"><span data-stu-id="802a3-303">In an extreme case, the frustum culling calculations themselves could even have a measurable CPU cost.</span></span>
* <span data-ttu-id="802a3-304">Ajustar el orden de procesamiento</span><span class="sxs-lookup"><span data-stu-id="802a3-304">Adjust rendering order</span></span>
   * <span data-ttu-id="802a3-305">Las superficies espaciales tienden a ser grandes, ya que representan todo el entorno del usuario a su alrededor.</span><span class="sxs-lookup"><span data-stu-id="802a3-305">Spatial surfaces tend to be large, because they represent the user's entire environment surrounding them.</span></span> <span data-ttu-id="802a3-306">Los costos en la GPU de procesamiento de píxeles, por tanto, pueden ser elevado, especialmente en casos donde hay más de una capa de geometría visible (incluidas las superficies espaciales y otros hologramas).</span><span class="sxs-lookup"><span data-stu-id="802a3-306">Pixel processing costs on the GPU can thus be high, especially in cases where there is more than one layer of visible geometry (including both spatial surfaces and other holograms).</span></span> <span data-ttu-id="802a3-307">En este caso, la capa más cercana al usuario se se occluding aún más las capas, por lo que se desperdicia GPU el tiempo dedicado a procesar esas capas más lejanos.</span><span class="sxs-lookup"><span data-stu-id="802a3-307">In this case, the layer nearest to the user will be occluding any layers further away, so any GPU time spent rendering those more distant layers is wasted.</span></span>
   * <span data-ttu-id="802a3-308">Para reducir este trabajo redundante en la GPU, ayuda a presentar superficies opacas en orden de delante hacia atrás (los más de cerca en primer lugar, más alejados de los últimos).</span><span class="sxs-lookup"><span data-stu-id="802a3-308">To reduce this redundant work on the GPU, it helps to render opaque surfaces in front-to-back order (closer ones first, more distant ones last).</span></span> <span data-ttu-id="802a3-309">Por 'opaque' nos referimos a las superficies para el que el DepthWriteMask se establece en uno de sus [estado de la Galería de símbolos de profundidad](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="802a3-309">By 'opaque' we mean surfaces for which the DepthWriteMask is set to one in your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span></span> <span data-ttu-id="802a3-310">Cuando se representan las superficies más cercanos, desbloquear el búfer de profundidad para que las superficies más lejanos se omiten eficazmente por el procesador de píxel en la GPU.</span><span class="sxs-lookup"><span data-stu-id="802a3-310">When the nearest surfaces are rendered, they will prime the depth buffer so that more distant surfaces are efficiently skipped by the pixel processor on the GPU.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="802a3-311">Procesamiento de malla</span><span class="sxs-lookup"><span data-stu-id="802a3-311">Mesh Processing</span></span>

<span data-ttu-id="802a3-312">Una aplicación puede realizar [varias operaciones](spatial-mapping.md#mesh-processing) en mallas de superficie espaciales para satisfacer sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="802a3-312">An application may want to perform [various operations](spatial-mapping.md#mesh-processing) on spatial surface meshes to suit its needs.</span></span> <span data-ttu-id="802a3-313">Los datos de índice y del vértice proporcionados con cada malla de superficie espacial usan el mismo diseño familiar que el [búferes de vértices e índice](https://msdn.microsoft.com/library/windows/desktop/bb147325%28v=vs.85%29.aspx) que se usan para representar las mallas de triangulares en representación moderno todas las API.</span><span class="sxs-lookup"><span data-stu-id="802a3-313">The index and vertex data provided with each spatial surface mesh uses the same familiar layout as the [vertex and index buffers](https://msdn.microsoft.com/library/windows/desktop/bb147325%28v=vs.85%29.aspx) that are used for rendering triangle meshes in all modern rendering APIs.</span></span> <span data-ttu-id="802a3-314">Sin embargo, un hecho clave a tener en cuenta es que los triángulos asignación espacial tienen un **front-hacia la derecha orden de devanado**.</span><span class="sxs-lookup"><span data-stu-id="802a3-314">However, one key fact to be aware of is that spatial mapping triangles have a **front-clockwise winding order**.</span></span> <span data-ttu-id="802a3-315">Cada triángulo se representa mediante tres índices de vértices en el búfer de índice de la malla y estos índices identificará los vértices del triángulo en un **hacia la derecha** orden cuando se ve el triángulo de la **front** lado.</span><span class="sxs-lookup"><span data-stu-id="802a3-315">Each triangle is represented by three vertex indices in the mesh's index buffer and these indices will identify the triangle's vertices in a **clockwise** order, when the triangle is viewed from the **front** side.</span></span> <span data-ttu-id="802a3-316">La parte delantera en paralelo (o exterior) de mallas de superficie espaciales corresponde como cabría esperar a la parte frontal (visible) de las superficies del mundo real.</span><span class="sxs-lookup"><span data-stu-id="802a3-316">The front side (or outside) of spatial surface meshes corresponds as you would expect to the front (visible) side of real world surfaces.</span></span>

<span data-ttu-id="802a3-317">Las aplicaciones deben realizar solo simplificación de la malla si la densidad de triángulo menos detallada proporcionada por la superficie observador es todavía insuficientemente general - este trabajo es consumen muchos recursos y ya no se realice el tiempo de ejecución para generar los distintos proporciona niveles de detalle.</span><span class="sxs-lookup"><span data-stu-id="802a3-317">Applications should only perform mesh simplification if the coarsest triangle density provided by the surface observer is still insufficiently coarse - this work is computationally expensive and already being performed by the runtime to generate the various provided levels of detail.</span></span>

<span data-ttu-id="802a3-318">Dado que cada observador expuesta puede proporcionar varias superficies espaciales desconectadas, algunas aplicaciones que desee recortar estos espacial superficie mallas con cada símbolo de compresión otro, a continuación, ellos juntos.</span><span class="sxs-lookup"><span data-stu-id="802a3-318">Because each surface observer can provide multiple unconnected spatial surfaces, some applications may wish to clip these spatial surface meshes against each other, then zipper them together.</span></span> <span data-ttu-id="802a3-319">En general, el paso de recorte es necesario que cercanas mallas de superficie espaciales a menudo se superpongan ligeramente.</span><span class="sxs-lookup"><span data-stu-id="802a3-319">In general, the clipping step is required, as nearby spatial surface meshes often overlap slightly.</span></span>

## <a name="raycasting-and-collision"></a><span data-ttu-id="802a3-320">Detalles y colisión</span><span class="sxs-lookup"><span data-stu-id="802a3-320">Raycasting and Collision</span></span>

<span data-ttu-id="802a3-321">En orden para una API de leyes físicas (como [Havok](http://www.havok.com/)) para proporcionar una aplicación con funcionalidad de detalles y colisión para superficies espaciales, la aplicación debe proporcionar la superficie espacial mallas a la API de física.</span><span class="sxs-lookup"><span data-stu-id="802a3-321">In order for a physics API (such as [Havok](http://www.havok.com/)) to provide an application with raycasting and collision functionality for spatial surfaces, the application must provide spatial surface meshes to the physics API.</span></span> <span data-ttu-id="802a3-322">Las mallas que se usan con frecuencia para física tienen las siguientes propiedades:</span><span class="sxs-lookup"><span data-stu-id="802a3-322">Meshes used for physics often have the following properties:</span></span>
* <span data-ttu-id="802a3-323">Contienen solo un número reducido de triángulos.</span><span class="sxs-lookup"><span data-stu-id="802a3-323">They contain only small numbers of triangles.</span></span> <span data-ttu-id="802a3-324">Las operaciones de leyes físicas son más intensivas que las operaciones de representación.</span><span class="sxs-lookup"><span data-stu-id="802a3-324">Physics operations are more computationally intensive than rendering operations.</span></span>
* <span data-ttu-id="802a3-325">Son 'agua estrecha'.</span><span class="sxs-lookup"><span data-stu-id="802a3-325">They are 'water-tight'.</span></span> <span data-ttu-id="802a3-326">Las superficies que pretende ser sólido no deberían tener pequeñas orificios; incluso agujeros demasiado pequeños para ser visible pueden causar problemas.</span><span class="sxs-lookup"><span data-stu-id="802a3-326">Surfaces intended to be solid should not have small holes in them; even holes too small to be visible can cause problems.</span></span>
* <span data-ttu-id="802a3-327">Se convierten en cáscaras convexas.</span><span class="sxs-lookup"><span data-stu-id="802a3-327">They are converted into convex hulls.</span></span> <span data-ttu-id="802a3-328">Cáscaras convexos tienen pocos polígonos y libres de vulnerabilidades, y son computacionalmente mucho más eficaces para procesar de mallas de triángulo sin procesar.</span><span class="sxs-lookup"><span data-stu-id="802a3-328">Convex hulls have few polygons and are free of holes, and they are much more computationally efficient to process than raw triangle meshes.</span></span>

<span data-ttu-id="802a3-329">Cuando raycasts rendimiento frente a las superficies espaciales, tenga en cuenta que estas superficies a menudo son complejas, formas desordenadas llenos de detalles poco desorganizados - simplemente como su escritorio!</span><span class="sxs-lookup"><span data-stu-id="802a3-329">When performing raycasts against spatial surfaces, bear in mind that these surfaces are often complex, cluttered shapes full of messy little details - just like your desk!</span></span> <span data-ttu-id="802a3-330">Esto significa que un único raycast a menudo es insuficiente para proporcionar suficiente información sobre la forma de la superficie y la forma del espacio vacío cerca de ella.</span><span class="sxs-lookup"><span data-stu-id="802a3-330">This means that a single raycast is often insufficient to give you enough information about the shape of the surface and the shape of the empty space near it.</span></span> <span data-ttu-id="802a3-331">Normalmente, por tanto, es una buena idea realizar muchos raycasts dentro de un área pequeña y a usar los resultados agregados para derivar un conocimiento más confiable de la superficie.</span><span class="sxs-lookup"><span data-stu-id="802a3-331">It is thus usually a good idea to perform many raycasts within a small area and to use the aggregate results to derive a more reliable understanding of the surface.</span></span> <span data-ttu-id="802a3-332">Por ejemplo, utilizando el promedio de 10 raycasts guía holograma ubicación en una superficie producirá un resultado mucho más suave y menos 'nerviosos' que utilizando solo un único raycast.</span><span class="sxs-lookup"><span data-stu-id="802a3-332">For example, using the average of 10 raycasts to guide hologram placement on a surface will yield a far smoother and less 'jittery' result that using just a single raycast.</span></span>

<span data-ttu-id="802a3-333">Sin embargo, tenga en cuenta que cada raycast puede tener un alto costo computacional.</span><span class="sxs-lookup"><span data-stu-id="802a3-333">However, bear in mind that each raycast can have a high computational cost.</span></span> <span data-ttu-id="802a3-334">Por tanto, según el escenario de uso que debe sacrificar el costo computacional de raycasts adicionales (se realiza cada fotograma) contra el costo computacional de [mesh procesamiento](spatial-mapping.md#mesh-processing) para suavizar y quitar agujeros en superficies espaciales ( realiza cuando se actualizan las mallas espaciales).</span><span class="sxs-lookup"><span data-stu-id="802a3-334">Thus depending on your usage scenario you should trade off the computational cost of additional raycasts (performed every frame) against the computational cost of [mesh processing](spatial-mapping.md#mesh-processing) to smooth and remove holes in spatial surfaces (performed when spatial meshes are updated).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="802a3-335">Solución de problemas</span><span class="sxs-lookup"><span data-stu-id="802a3-335">Troubleshooting</span></span>
* <span data-ttu-id="802a3-336">Para las mallas expuestas se oriente correctamente, cada GameObject debe estar activo antes de enviarlo a la SurfaceObeserver tener su malla construido.</span><span class="sxs-lookup"><span data-stu-id="802a3-336">In order for the surface meshes to be orientated correctly, each GameObject needs to be active before it is sent to the SurfaceObeserver to have its mesh constructed.</span></span> <span data-ttu-id="802a3-337">En caso contrario, las mallas se mostrarán en tu espacio, pero se ha girado en ángulos extraños.</span><span class="sxs-lookup"><span data-stu-id="802a3-337">Otherwise, the meshes will show up in your space but rotated at weird angles.</span></span>
* <span data-ttu-id="802a3-338">El GameObject que se ejecuta la secuencia de comandos que se comunica con el SurfaceObserver debe establecerse en el origen.</span><span class="sxs-lookup"><span data-stu-id="802a3-338">The GameObject that runs the script that communicates with the SurfaceObserver needs to be set to the origin.</span></span> <span data-ttu-id="802a3-339">De lo contrario, todos GameObjects que crear y enviar a la SurfaceObserver tener sus mallas construidas tendrán un desplazamiento igual que el desplazamiento del objeto de juego primario.</span><span class="sxs-lookup"><span data-stu-id="802a3-339">Otherwise, all of GameObjects that you create and send to the SurfaceObserver to have their meshes constructed will have an offset equal to the offset of the Parent Game Object.</span></span> <span data-ttu-id="802a3-340">Esto puede hacer que su mallas se muestran varios medidores distancia que resulta muy difícil depurar lo que está ocurriendo.</span><span class="sxs-lookup"><span data-stu-id="802a3-340">This can make your meshes show up several meters away which makes it very hard to debug what is going on.</span></span>

## <a name="see-also"></a><span data-ttu-id="802a3-341">Vea también</span><span class="sxs-lookup"><span data-stu-id="802a3-341">See also</span></span>
* [<span data-ttu-id="802a3-342">Sistemas de coordenadas</span><span class="sxs-lookup"><span data-stu-id="802a3-342">Coordinate systems</span></span>](coordinate-systems.md)
* [<span data-ttu-id="802a3-343">Asignación espacial en DirectX</span><span class="sxs-lookup"><span data-stu-id="802a3-343">Spatial mapping in DirectX</span></span>](spatial-mapping-in-directx.md)
* [<span data-ttu-id="802a3-344">Asignación espacial en Unity</span><span class="sxs-lookup"><span data-stu-id="802a3-344">Spatial mapping in Unity</span></span>](spatial-mapping-in-unity.md)
* [<span data-ttu-id="802a3-345">Diseño de la asignación espacial</span><span class="sxs-lookup"><span data-stu-id="802a3-345">Spatial mapping design</span></span>](spatial-mapping-design.md)
* [<span data-ttu-id="802a3-346">Caso práctico: examinar los huecos en la realidad</span><span class="sxs-lookup"><span data-stu-id="802a3-346">Case study - Looking through holes in your reality</span></span>](case-study-looking-through-holes-in-your-reality.md)
